
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>vlearn.roa.utils package &#8212; vlearn 0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="vlearn.roa package" href="vlearn.roa.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="vlearn-roa-utils-package">
<h1>vlearn.roa.utils package<a class="headerlink" href="#vlearn-roa-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.autoaugment_utils">
<span id="vlearn-roa-utils-autoaugment-utils-module"></span><h2>vlearn.roa.utils.autoaugment_utils module<a class="headerlink" href="#module-vlearn.roa.utils.autoaugment_utils" title="Permalink to this headline">¶</a></h2>
<p>AutoAugment util file.</p>
<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.autocontrast">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">autocontrast</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.autocontrast" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Autocontrast function from PIL using TF ops.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> – A 3D uint8 tensor.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The image after it has had autocontrast applied to it and will be of type
uint8.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.bbox_cutout">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">bbox_cutout</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">pad_fraction</em>, <em class="sig-param">replace_with_mean</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.bbox_cutout" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies cutout to the image according to bbox information.</p>
<p>This is a cutout variant that using bbox information to make more informed
decisions on where to place the cutout mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – 3D uint8 Tensor.</p></li>
<li><p><strong>bboxes</strong> – 2D Tensor that is a list of the bboxes in the image. Each bbox
has 4 elements (min_y, min_x, max_y, max_x) of type float with values
between [0, 1].</p></li>
<li><p><strong>pad_fraction</strong> – Float that specifies how large the cutout mask should be in
in reference to the size of the original bbox. If pad_fraction is 0.25,
then the cutout mask will be of shape
(0.25 * bbox height, 0.25 * bbox width).</p></li>
<li><p><strong>replace_with_mean</strong> – Boolean that specified what value should be filled in
where the cutout mask is applied. Since the incoming image will be of
uint8 and will not have had any mean normalization applied, by default
we set the value to be 128. If replace_with_mean is True then we find
the mean pixel values across the channel dimension and use those to fill
in where the cutout mask is applied.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple. First element is a tensor of the same shape as image that has
cutout applied to it. Second element is the bboxes that were passed in
that will be unchanged.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.bbox_wrapper">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">bbox_wrapper</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.bbox_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a bboxes function argument to func and returns unchanged bboxes.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.blend">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">blend</code><span class="sig-paren">(</span><em class="sig-param">image1</em>, <em class="sig-param">image2</em>, <em class="sig-param">factor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.blend" title="Permalink to this definition">¶</a></dt>
<dd><p>Blend image1 and image2 using ‘factor’.</p>
<p>Factor can be above 0.0.  A value of 0.0 means only image1 is used.
A value of 1.0 means only image2 is used.  A value between 0.0 and
1.0 means we linearly interpolate the pixel values between the two
images.  A value greater than 1.0 “extrapolates” the difference
between the two pixel values, and we clip the results to values
between 0 and 255.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image1</strong> – An image Tensor of type uint8.</p></li>
<li><p><strong>image2</strong> – An image Tensor of type uint8.</p></li>
<li><p><strong>factor</strong> – A floating point value above 0.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A blended image Tensor of type uint8.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.brightness">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">brightness</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">factor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.brightness" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Brightness.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.build_and_apply_nas_policy">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">build_and_apply_nas_policy</code><span class="sig-paren">(</span><em class="sig-param">policies</em>, <em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">augmentation_hparams</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.build_and_apply_nas_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a policy from the given policies passed in and apply to image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policies</strong> – list of lists of tuples in the form <cite>(func, prob, level)</cite>, <cite>func</cite>
is a string name of the augmentation function, <cite>prob</cite> is the probability
of applying the <cite>func</cite> operation, <cite>level</cite> is the input argument for
<cite>func</cite>.</p></li>
<li><p><strong>image</strong> – tf.Tensor that the resulting policy will be applied to.</p></li>
<li><p><strong>bboxes</strong> – </p></li>
<li><p><strong>augmentation_hparams</strong> – Hparams associated with the NAS learned policy.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A version of image that now has data augmentation applied to it based on
the <cite>policies</cite> pass into the function. Additionally, returns bboxes if
a value for them is passed in that is not None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.color">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">color</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">factor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.color" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Color.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.contrast">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">contrast</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">factor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.contrast" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Contrast.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.cutout">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">cutout</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">pad_size</em>, <em class="sig-param">replace=0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.cutout" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply cutout (<a class="reference external" href="https://arxiv.org/abs/1708.04552">https://arxiv.org/abs/1708.04552</a>) to image.</p>
<p>This operation applies a (2*pad_size x 2*pad_size) mask of zeros to
a random location within <cite>img</cite>. The pixel values filled in will be of the
value <cite>replace</cite>. The located where the mask will be applied is randomly
chosen uniformly over the whole image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – An image Tensor of type uint8.</p></li>
<li><p><strong>pad_size</strong> – Specifies how big the zero mask that will be generated is that
is applied to the image. The mask will be of size
(2*pad_size x 2*pad_size).</p></li>
<li><p><strong>replace</strong> – What pixel value to fill in the image in the area that has
the cutout mask applied to it.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An image Tensor that is of type uint8.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.cutout_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">cutout_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">pad_size</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.cutout_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply cutout to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.distort_image_with_autoaugment">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">distort_image_with_autoaugment</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">augmentation_name</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.distort_image_with_autoaugment" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the AutoAugment policy to <cite>image</cite> and <cite>bboxes</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – <cite>Tensor</cite> of shape [height, width, 3] representing an image.</p></li>
<li><p><strong>bboxes</strong> – <cite>Tensor</cite> of shape [N, 4] representing ground truth boxes that are
normalized between [0, 1].</p></li>
<li><p><strong>augmentation_name</strong> – The name of the AutoAugment policy to use. The available
options are <cite>v0</cite>, <cite>v1</cite>, <cite>v2</cite>, <cite>v3</cite> and <cite>test</cite>. <cite>v0</cite> is the policy used for
all of the results in the paper and was found to achieve the best results
on the COCO dataset. <cite>v1</cite>, <cite>v2</cite> and <cite>v3</cite> are additional good policies
found on the COCO dataset that have slight variation in what operations
were used during the search procedure along with how many operations are
applied in parallel to a single image (2 vs 3).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing the augmented versions of <cite>image</cite> and <cite>bboxes</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.equalize">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">equalize</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.equalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Equalize function from PIL using TF ops.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.equalize_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">equalize_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.equalize_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply equalize to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.flip_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">flip_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.flip_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply flip_lr to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.level_to_arg">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">level_to_arg</code><span class="sig-paren">(</span><em class="sig-param">hparams</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.level_to_arg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.policy_v0">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">policy_v0</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.policy_v0" title="Permalink to this definition">¶</a></dt>
<dd><p>Autoaugment policy that was used in AutoAugment Detection Paper.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.policy_v1">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">policy_v1</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.policy_v1" title="Permalink to this definition">¶</a></dt>
<dd><p>Autoaugment policy that was used in AutoAugment Detection Paper.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.policy_v2">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">policy_v2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.policy_v2" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional policy that performs well on object detection.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.policy_v3">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">policy_v3</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.policy_v3" title="Permalink to this definition">¶</a></dt>
<dd><p>“Additional policy that performs well on object detection.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.policy_vtest">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">policy_vtest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.policy_vtest" title="Permalink to this definition">¶</a></dt>
<dd><p>Autoaugment test policy for debugging.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.posterize">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">posterize</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bits</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.posterize" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Posterize.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.random_shift_bbox">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">random_shift_bbox</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bbox</em>, <em class="sig-param">pixel_scaling</em>, <em class="sig-param">replace</em>, <em class="sig-param">new_min_bbox_coords=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.random_shift_bbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the bbox and the image content to a slightly new random location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – 3D uint8 Tensor.</p></li>
<li><p><strong>bbox</strong> – <p>1D Tensor that has 4 elements (min_y, min_x, max_y, max_x)
of type float that represents the normalized coordinates between 0 and 1.
The potential values for the new min corner of the bbox will be between
[old_min - pixel_scaling * bbox_height/2,</p>
<blockquote>
<div><p>old_min - pixel_scaling * bbox_height/2].</p>
</div></blockquote>
</p></li>
<li><p><strong>pixel_scaling</strong> – A float between 0 and 1 that specifies the pixel range
that the new bbox location will be sampled from.</p></li>
<li><p><strong>replace</strong> – A one or three value 1D tensor to fill empty pixels.</p></li>
<li><p><strong>new_min_bbox_coords</strong> – If not None, then this is a tuple that specifies the
(min_y, min_x) coordinates of the new bbox. Normally this is randomly
specified, but this allows it to be manually set. The coordinates are
the absolute coordinates between 0 and image height/width and are int32.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new image that will have the shifted bbox location in it along with
the new bbox that contains the new coordinates.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.rotate">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">rotate</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">degrees</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.rotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates the image by degrees either clockwise or counterclockwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – An image Tensor of type uint8.</p></li>
<li><p><strong>degrees</strong> – Float, a scalar angle in degrees to rotate all images by. If
degrees is positive the image will be rotated clockwise otherwise it will
be rotated counterclockwise.</p></li>
<li><p><strong>replace</strong> – A one or three value 1D tensor to fill empty pixels caused by
the rotate operation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The rotated version of image.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.rotate_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">rotate_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">degrees</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.rotate_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply rotate to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.rotate_with_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">rotate_with_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">degrees</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.rotate_with_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Rotate that rotates the image and bbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – 3D uint8 Tensor.</p></li>
<li><p><strong>bboxes</strong> – 2D Tensor that is a list of the bboxes in the image. Each bbox
has 4 elements (min_y, min_x, max_y, max_x) of type float.</p></li>
<li><p><strong>degrees</strong> – Float, a scalar angle in degrees to rotate all images by. If
degrees is positive the image will be rotated clockwise otherwise it will
be rotated counterclockwise.</p></li>
<li><p><strong>replace</strong> – A one or three value 1D tensor to fill empty pixels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing a 3D uint8 Tensor that will be the result of rotating
image by degrees. The second element of the tuple is bboxes, where now
the coordinates will be shifted to reflect the rotated image.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.select_and_apply_random_policy">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">select_and_apply_random_policy</code><span class="sig-paren">(</span><em class="sig-param">policies</em>, <em class="sig-param">image</em>, <em class="sig-param">bboxes</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.select_and_apply_random_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a random policy from <cite>policies</cite> and apply it to <cite>image</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.sharpness">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">sharpness</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">factor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.sharpness" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Sharpness function from PIL using TF ops.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.shear_with_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">shear_with_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">level</em>, <em class="sig-param">replace</em>, <em class="sig-param">shear_horizontal</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.shear_with_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies Shear Transformation to the image and shifts the bboxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – 3D uint8 Tensor.</p></li>
<li><p><strong>bboxes</strong> – 2D Tensor that is a list of the bboxes in the image. Each bbox
has 4 elements (min_y, min_x, max_y, max_x) of type float with values
between [0, 1].</p></li>
<li><p><strong>level</strong> – Float. How much to shear the image. This value will be between
-0.3 to 0.3.</p></li>
<li><p><strong>replace</strong> – A one or three value 1D tensor to fill empty pixels.</p></li>
<li><p><strong>shear_horizontal</strong> – Boolean. If true then shear in X dimension else shear in
the Y dimension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing a 3D uint8 Tensor that will be the result of shearing
image by level. The second element of the tuple is bboxes, where now
the coordinates will be shifted to reflect the sheared image.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.shear_x">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">shear_x</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">level</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.shear_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Shearing in X dimension.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.shear_x_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">shear_x_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">level</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.shear_x_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply shear_x to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.shear_y">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">shear_y</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">level</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.shear_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Shearing in Y dimension.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.shear_y_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">shear_y_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">level</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.shear_y_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply shear_y to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.solarize">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">solarize</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">threshold=128</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.solarize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.solarize_add">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">solarize_add</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">addition=0</em>, <em class="sig-param">threshold=128</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.solarize_add" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.solarize_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">solarize_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">threshold</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.solarize_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply solarize to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.translate_bbox">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">translate_bbox</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">pixels</em>, <em class="sig-param">replace</em>, <em class="sig-param">shift_horizontal</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.translate_bbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Translate in X/Y dimension that shifts image and bbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – 3D uint8 Tensor.</p></li>
<li><p><strong>bboxes</strong> – 2D Tensor that is a list of the bboxes in the image. Each bbox
has 4 elements (min_y, min_x, max_y, max_x) of type float with values
between [0, 1].</p></li>
<li><p><strong>pixels</strong> – An int. How many pixels to shift the image and bboxes</p></li>
<li><p><strong>replace</strong> – A one or three value 1D tensor to fill empty pixels.</p></li>
<li><p><strong>shift_horizontal</strong> – Boolean. If true then shift in X dimension else shift in
Y dimension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing a 3D uint8 Tensor that will be the result of translating
image by pixels. The second element of the tuple is bboxes, where now
the coordinates will be shifted to reflect the shifted image.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.translate_x">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">translate_x</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">pixels</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.translate_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Translate in X dimension.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.translate_x_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">translate_x_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">pixels</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.translate_x_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply translate_x to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.translate_y">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">translate_y</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">pixels</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.translate_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of PIL Translate in Y dimension.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.translate_y_only_bboxes">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">translate_y_only_bboxes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">bboxes</em>, <em class="sig-param">prob</em>, <em class="sig-param">pixels</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.translate_y_only_bboxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply translate_y to each bbox in the image with probability prob.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.unwrap">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">unwrap</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">replace</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Unwraps an image produced by wrap.</p>
<p>Where there is a 0 in the last channel for every spatial position,
the rest of the three channels in that spatial dimension are grayed
(set to 128).  Operations like translate and shear on a wrapped
Tensor will leave 0s in empty locations.  Some transformations look
at the intensity of values to do preprocessing, and we want these
empty pixels to assume the ‘average’ value, rather than pure black.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – A 3D Image Tensor with 4 channels.</p></li>
<li><p><strong>replace</strong> – A one or three value 1D tensor to fill empty pixels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 3D image Tensor with 3 channels.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.autoaugment_utils.wrap">
<code class="sig-prename descclassname">vlearn.roa.utils.autoaugment_utils.</code><code class="sig-name descname">wrap</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.autoaugment_utils.wrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns ‘image’ with an extra channel set to all 1s.</p>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.category_util">
<span id="vlearn-roa-utils-category-util-module"></span><h2>vlearn.roa.utils.category_util module<a class="headerlink" href="#module-vlearn.roa.utils.category_util" title="Permalink to this headline">¶</a></h2>
<p>Functions for importing/exporting Object Detection categories.</p>
<dl class="function">
<dt id="vlearn.roa.utils.category_util.load_categories_from_csv_file">
<code class="sig-prename descclassname">vlearn.roa.utils.category_util.</code><code class="sig-name descname">load_categories_from_csv_file</code><span class="sig-paren">(</span><em class="sig-param">csv_path</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.category_util.load_categories_from_csv_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads categories from a csv file.</p>
<p>The CSV file should have one comma delimited numeric category id and string
category name pair per line. For example:</p>
<p>0,”cat”
1,”dog”
2,”bird”
…</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>csv_path</strong> – Path to the csv file to be parsed into categories.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of dictionaries representing all possible categories.</dt><dd><p>The categories will contain an integer ‘id’ field and a string
‘name’ field.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>categories</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the csv file is incorrectly formatted.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.category_util.save_categories_to_csv_file">
<code class="sig-prename descclassname">vlearn.roa.utils.category_util.</code><code class="sig-name descname">save_categories_to_csv_file</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">csv_path</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.category_util.save_categories_to_csv_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves categories to a csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>categories</strong> – A list of dictionaries representing categories to save to file.
Each category must contain an ‘id’ and ‘name’ field.</p></li>
<li><p><strong>csv_path</strong> – Path to the csv file to be parsed into categories.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.category_util_test">
<span id="vlearn-roa-utils-category-util-test-module"></span><h2>vlearn.roa.utils.category_util_test module<a class="headerlink" href="#module-vlearn.roa.utils.category_util_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.category_util.</p>
<dl class="class">
<dt id="vlearn.roa.utils.category_util_test.EvalUtilTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.category_util_test.</code><code class="sig-name descname">EvalUtilTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.category_util_test.EvalUtilTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.category_util_test.EvalUtilTest.test_load_categories_from_csv_file">
<code class="sig-name descname">test_load_categories_from_csv_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.category_util_test.EvalUtilTest.test_load_categories_from_csv_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.category_util_test.EvalUtilTest.test_save_categories_to_csv_file">
<code class="sig-name descname">test_save_categories_to_csv_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.category_util_test.EvalUtilTest.test_save_categories_to_csv_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.config_util">
<span id="vlearn-roa-utils-config-util-module"></span><h2>vlearn.roa.utils.config_util module<a class="headerlink" href="#module-vlearn.roa.utils.config_util" title="Permalink to this headline">¶</a></h2>
<p>Functions for reading and updating configuration files.</p>
<dl class="function">
<dt id="vlearn.roa.utils.config_util.check_and_parse_input_config_key">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">check_and_parse_input_config_key</code><span class="sig-paren">(</span><em class="sig-param">configs</em>, <em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.check_and_parse_input_config_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks key and returns specific fields if key is valid input config update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> – Dictionary of configuration objects. See outputs from
get_configs_from_pipeline_file() or get_configs_from_multiple_files().</p></li>
<li><p><strong>key</strong> – string indicates the target of update operation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A boolean indicate whether the input key is to</dt><dd><p>update input config(s).</p>
</dd>
<dt>key_name: ‘eval_input_configs’ or ‘train_input_config’ string if</dt><dd><p>is_valid_input_config_key is true. None if is_valid_input_config_key is
false.</p>
</dd>
<dt>input_name: the name of the input config to be updated. None if</dt><dd><p>is_valid_input_config_key is false.</p>
</dd>
<dt>field_name: the field name in input config. <cite>key</cite> itself if</dt><dd><p>is_valid_input_config_key is false.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>is_valid_input_config_key</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – when the input key format doesn’t match any known formats.</p></li>
<li><p><strong>ValueError</strong> – if key_name doesn’t match ‘eval_input_configs’ or
    ‘train_input_config’.</p></li>
<li><p><strong>ValueError</strong> – if input_name doesn’t match any name in train or eval input
    configs.</p></li>
<li><p><strong>ValueError</strong> – if field_name doesn’t match any supported fields.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.create_configs_from_pipeline_proto">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">create_configs_from_pipeline_proto</code><span class="sig-paren">(</span><em class="sig-param">pipeline_config</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.create_configs_from_pipeline_proto" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a configs dictionary from pipeline_pb2.TrainEvalPipelineConfig.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pipeline_config</strong> – pipeline_pb2.TrainEvalPipelineConfig proto object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary of configuration objects. Keys are <cite>model</cite>, <cite>train_config</cite>,</dt><dd><p><cite>train_input_config</cite>, <cite>eval_config</cite>, <cite>eval_input_configs</cite>. Value are
the corresponding config objects or list of config objects (only for
eval_input_configs).</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.create_pipeline_proto_from_configs">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">create_pipeline_proto_from_configs</code><span class="sig-paren">(</span><em class="sig-param">configs</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.create_pipeline_proto_from_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a pipeline_pb2.TrainEvalPipelineConfig from configs dictionary.</p>
<p>This function performs the inverse operation of
create_configs_from_pipeline_proto().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>configs</strong> – Dictionary of configs. See get_configs_from_pipeline_file().</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A fully populated pipeline_pb2.TrainEvalPipelineConfig.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_configs_from_multiple_files">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_configs_from_multiple_files</code><span class="sig-paren">(</span><em class="sig-param">model_config_path=''</em>, <em class="sig-param">train_config_path=''</em>, <em class="sig-param">train_input_config_path=''</em>, <em class="sig-param">eval_config_path=''</em>, <em class="sig-param">eval_input_config_path=''</em>, <em class="sig-param">graph_rewriter_config_path=''</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_configs_from_multiple_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads training configuration from multiple config files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_config_path</strong> – Path to model_pb2.DetectionModel.</p></li>
<li><p><strong>train_config_path</strong> – Path to train_pb2.TrainConfig.</p></li>
<li><p><strong>train_input_config_path</strong> – Path to input_reader_pb2.InputReader.</p></li>
<li><p><strong>eval_config_path</strong> – Path to eval_pb2.EvalConfig.</p></li>
<li><p><strong>eval_input_config_path</strong> – Path to input_reader_pb2.InputReader.</p></li>
<li><p><strong>graph_rewriter_config_path</strong> – Path to graph_rewriter_pb2.GraphRewriter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary of configuration objects. Keys are <cite>model</cite>, <cite>train_config</cite>,</dt><dd><dl class="simple">
<dt><cite>train_input_config</cite>, <cite>eval_config</cite>, <cite>eval_input_config</cite>. Key/Values are</dt><dd><p>returned only for valid (non-empty) strings.</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_configs_from_pipeline_file">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_configs_from_pipeline_file</code><span class="sig-paren">(</span><em class="sig-param">pipeline_config_path</em>, <em class="sig-param">config_override=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_configs_from_pipeline_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads config from a file containing pipeline_pb2.TrainEvalPipelineConfig.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline_config_path</strong> – Path to pipeline_pb2.TrainEvalPipelineConfig text
proto.</p></li>
<li><p><strong>config_override</strong> – A pipeline_pb2.TrainEvalPipelineConfig text proto to
override pipeline_config_path.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary of configuration objects. Keys are <cite>model</cite>, <cite>train_config</cite>,</dt><dd><p><cite>train_input_config</cite>, <cite>eval_config</cite>, <cite>eval_input_config</cite>. Value are the
corresponding config objects.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_graph_rewriter_config_from_file">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_graph_rewriter_config_from_file</code><span class="sig-paren">(</span><em class="sig-param">graph_rewriter_config_file</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_graph_rewriter_config_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses config for graph rewriter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph_rewriter_config_file</strong> – file path to the graph rewriter config.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>graph_rewriter_pb2.GraphRewriter proto</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_image_resizer_config">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_image_resizer_config</code><span class="sig-paren">(</span><em class="sig-param">model_config</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_image_resizer_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the image resizer config from a model config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_config</strong> – A model_pb2.DetectionModel.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An image_resizer_pb2.ImageResizer.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the model type is not recognized.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_learning_rate_type">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_learning_rate_type</code><span class="sig-paren">(</span><em class="sig-param">optimizer_config</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_learning_rate_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the learning rate type for training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>optimizer_config</strong> – An optimizer_pb2.Optimizer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The type of the learning rate.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_number_of_classes">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_number_of_classes</code><span class="sig-paren">(</span><em class="sig-param">model_config</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_number_of_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of classes for a detection model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_config</strong> – A model_pb2.DetectionModel.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of classes.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the model type is not recognized.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_optimizer_type">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_optimizer_type</code><span class="sig-paren">(</span><em class="sig-param">train_config</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_optimizer_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the optimizer type for training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>train_config</strong> – A train_pb2.TrainConfig.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The type of the optimizer</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.get_spatial_image_size">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">get_spatial_image_size</code><span class="sig-paren">(</span><em class="sig-param">image_resizer_config</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.get_spatial_image_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns expected spatial size of the output image from a given config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image_resizer_config</strong> – An image_resizer_pb2.ImageResizer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of two integers of the form [height, width]. <cite>height</cite> and <cite>width</cite> are
set  -1 if they cannot be determined during graph construction.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the model type is not recognized.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.merge_external_params_with_configs">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">merge_external_params_with_configs</code><span class="sig-paren">(</span><em class="sig-param">configs</em>, <em class="sig-param">hparams=None</em>, <em class="sig-param">kwargs_dict=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.merge_external_params_with_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates <cite>configs</cite> dictionary based on supplied parameters.</p>
<p>This utility is for modifying specific fields in the object detection configs.
Say that one would like to experiment with different learning rates, momentum
values, or batch sizes. Rather than creating a new config text file for each
experiment, one can use a single base config file, and update particular
values.</p>
<p>There are two types of field overrides:
1. Strategy-based overrides, which update multiple relevant configuration
options. For example, updating <cite>learning_rate</cite> will update both the warmup and
final learning rates.
In this case key can be one of the following formats:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>legacy update: single string that indicates the attribute to be</p></li>
</ol>
<blockquote>
<div><p>updated. E.g. ‘label_map_path’, ‘eval_input_path’, ‘shuffle’.
Note that when updating fields (e.g. eval_input_path, eval_shuffle) in
eval_input_configs, the override will only be applied when
eval_input_configs has exactly 1 element.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>specific update: colon separated string that indicates which field in</p></li>
</ol>
<blockquote>
<div><p>which input_config to update. It should have 3 fields:
- key_name: Name of the input config we should update, either</p>
<blockquote>
<div><p>‘train_input_config’ or ‘eval_input_configs’</p>
</div></blockquote>
<ul class="simple">
<li><p>input_name: a ‘name’ that can be used to identify elements, especially
when configs[key_name] is a repeated field.</p></li>
<li><p>field_name: name of the field that you want to override.</p></li>
</ul>
<dl>
<dt>For example, given configs dict as below:</dt><dd><dl>
<dt>configs = {</dt><dd><p>‘model’: {…}
‘train_config’: {…}
‘train_input_config’: {…}
‘eval_config’: {…}
‘eval_input_configs’: [{ name:”eval_coco”, …},</p>
<blockquote>
<div><p>{ name:”eval_voc”, … }]</p>
</div></blockquote>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>Assume we want to update the input_path of the eval_input_config
whose name is ‘eval_coco’. The <cite>key</cite> would then be:
‘eval_input_configs:eval_coco:input_path’</p>
</div></blockquote>
</div></blockquote>
<p>2. Generic key/value, which update a specific parameter based on namespaced
configuration keys. For example,
<cite>model.ssd.loss.hard_example_miner.max_negatives_per_positive</cite> will update the
hard example miner configuration for an SSD model config. Generic overrides
are automatically detected based on the namespaced keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> – Dictionary of configuration objects. See outputs from
get_configs_from_pipeline_file() or get_configs_from_multiple_files().</p></li>
<li><p><strong>hparams</strong> – A <cite>HParams</cite>.</p></li>
<li><p><strong>kwargs_dict</strong> – Extra keyword arguments that are treated the same way as
attribute/value pairs in <cite>hparams</cite>. Note that hyperparameters with the
same names will override keyword arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>configs</cite> dictionary.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – when the key string doesn’t match any of its allowed formats.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.save_pipeline_config">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">save_pipeline_config</code><span class="sig-paren">(</span><em class="sig-param">pipeline_config</em>, <em class="sig-param">directory</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.save_pipeline_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a pipeline config text file to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline_config</strong> – A pipeline_pb2.TrainEvalPipelineConfig.</p></li>
<li><p><strong>directory</strong> – The model directory into which the pipeline config file will be
saved.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.config_util.update_input_reader_config">
<code class="sig-prename descclassname">vlearn.roa.utils.config_util.</code><code class="sig-name descname">update_input_reader_config</code><span class="sig-paren">(</span><em class="sig-param">configs</em>, <em class="sig-param">key_name=None</em>, <em class="sig-param">input_name=None</em>, <em class="sig-param">field_name=None</em>, <em class="sig-param">value=None</em>, <em class="sig-param">path_updater=&lt;function _update_tf_record_input_path&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util.update_input_reader_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates specified input reader config field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> – Dictionary of configuration objects. See outputs from
get_configs_from_pipeline_file() or get_configs_from_multiple_files().</p></li>
<li><p><strong>key_name</strong> – Name of the input config we should update, either
‘train_input_config’ or ‘eval_input_configs’</p></li>
<li><p><strong>input_name</strong> – String name used to identify input config to update with. Should
be either None or value of the ‘name’ field in one of the input reader
configs.</p></li>
<li><p><strong>field_name</strong> – Field name in input_reader_pb2.InputReader.</p></li>
<li><p><strong>value</strong> – Value used to override existing field value.</p></li>
<li><p><strong>path_updater</strong> – helper function used to update the input path. Only used when
field_name is “input_path”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – when input field_name is None.</p></li>
<li><p><strong>ValueError</strong> – when input_name is None and number of eval_input_readers does
    not equal to 1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.config_util_test">
<span id="vlearn-roa-utils-config-util-test-module"></span><h2>vlearn.roa.utils.config_util_test module<a class="headerlink" href="#module-vlearn.roa.utils.config_util_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.config_util.</p>
<dl class="class">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.config_util_test.</code><code class="sig-name descname">ConfigUtilTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testAdamOptimizerWithNewLearningRate">
<code class="sig-name descname">testAdamOptimizerWithNewLearningRate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testAdamOptimizerWithNewLearningRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests new learning rates for Adam Optimizer.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testCheckAndParseInputConfigKey">
<code class="sig-name descname">testCheckAndParseInputConfigKey</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testCheckAndParseInputConfigKey" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testDontOverwriteEmptyLabelMapPath">
<code class="sig-name descname">testDontOverwriteEmptyLabelMapPath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testDontOverwriteEmptyLabelMapPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that label map path will not by overwritten with empty string.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testErrorOverwritingMultipleInputConfig">
<code class="sig-name descname">testErrorOverwritingMultipleInputConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testErrorOverwritingMultipleInputConfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testEvalShuffle">
<code class="sig-name descname">testEvalShuffle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testEvalShuffle" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that <cite>eval_shuffle</cite> keyword arguments are applied correctly.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGenericConfigOverride">
<code class="sig-name descname">testGenericConfigOverride</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGenericConfigOverride" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests generic config overrides for all top-level configs.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetImageResizerConfig">
<code class="sig-name descname">testGetImageResizerConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetImageResizerConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that number of classes can be retrieved.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetNumberOfClasses">
<code class="sig-name descname">testGetNumberOfClasses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetNumberOfClasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that number of classes can be retrieved.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromAspectPreservingResizerConfig">
<code class="sig-name descname">testGetSpatialImageSizeFromAspectPreservingResizerConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromAspectPreservingResizerConfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromAspectPreservingResizerDynamic">
<code class="sig-name descname">testGetSpatialImageSizeFromAspectPreservingResizerDynamic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromAspectPreservingResizerDynamic" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromConditionalShapeResizer">
<code class="sig-name descname">testGetSpatialImageSizeFromConditionalShapeResizer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromConditionalShapeResizer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromFixedShapeResizerConfig">
<code class="sig-name descname">testGetSpatialImageSizeFromFixedShapeResizerConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testGetSpatialImageSizeFromFixedShapeResizerConfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testKeyValueOverrideBadKey">
<code class="sig-name descname">testKeyValueOverrideBadKey</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testKeyValueOverrideBadKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that overwriting with a bad key causes an exception.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testMergingKeywordArguments">
<code class="sig-name descname">testMergingKeywordArguments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testMergingKeywordArguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that keyword arguments get merged as do hyperparameters.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testMomentumOptimizerWithNewLearningRate">
<code class="sig-name descname">testMomentumOptimizerWithNewLearningRate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testMomentumOptimizerWithNewLearningRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests new learning rates for Momentum Optimizer.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewBatchSize">
<code class="sig-name descname">testNewBatchSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewBatchSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that batch size is updated appropriately.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewBatchSizeWithClipping">
<code class="sig-name descname">testNewBatchSizeWithClipping</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewBatchSizeWithClipping" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that batch size is clipped to 1 from below.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewClassificationLocalizationWeightRatio">
<code class="sig-name descname">testNewClassificationLocalizationWeightRatio</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewClassificationLocalizationWeightRatio" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that the loss weight ratio is updated appropriately.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewFocalLossParameters">
<code class="sig-name descname">testNewFocalLossParameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewFocalLossParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that the loss weight ratio is updated appropriately.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewLabelMapPath">
<code class="sig-name descname">testNewLabelMapPath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewLabelMapPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that label map path can be overwritten in input readers.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewMaskType">
<code class="sig-name descname">testNewMaskType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewMaskType" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that mask type can be overwritten in input readers.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewMomentumOptimizerValue">
<code class="sig-name descname">testNewMomentumOptimizerValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewMomentumOptimizerValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that new momentum value is updated appropriately.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewTrainInputPath">
<code class="sig-name descname">testNewTrainInputPath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewTrainInputPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that train input path can be overwritten with single file.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewTrainInputPathList">
<code class="sig-name descname">testNewTrainInputPathList</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testNewTrainInputPathList" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that train input path can be overwritten with multiple files.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverWriteRetainOriginalImages">
<code class="sig-name descname">testOverWriteRetainOriginalImages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverWriteRetainOriginalImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that <cite>train_shuffle</cite> keyword arguments are applied correctly.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteAllEvalNumEpochs">
<code class="sig-name descname">testOverwriteAllEvalNumEpochs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteAllEvalNumEpochs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteAllEvalSampling">
<code class="sig-name descname">testOverwriteAllEvalSampling</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteAllEvalSampling" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteBatchSizeWithBadValueType">
<code class="sig-name descname">testOverwriteBatchSizeWithBadValueType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteBatchSizeWithBadValueType" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that overwriting with a bad valuye type causes an exception.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteBatchSizeWithKeyValue">
<code class="sig-name descname">testOverwriteBatchSizeWithKeyValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testOverwriteBatchSizeWithKeyValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that batch size is overwritten based on key/value.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testRMSPropWithNewLearingRate">
<code class="sig-name descname">testRMSPropWithNewLearingRate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testRMSPropWithNewLearingRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests new learning rates for RMSProp Optimizer.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testTrainShuffle">
<code class="sig-name descname">testTrainShuffle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testTrainShuffle" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that <cite>train_shuffle</cite> keyword arguments are applied correctly.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testUpdateInputReaderConfigErrors">
<code class="sig-name descname">testUpdateInputReaderConfigErrors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testUpdateInputReaderConfigErrors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testUpdateInputReaderConfigSuccess">
<code class="sig-name descname">testUpdateInputReaderConfigSuccess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testUpdateInputReaderConfigSuccess" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testUpdateMaskTypeForAllInputConfigs">
<code class="sig-name descname">testUpdateMaskTypeForAllInputConfigs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testUpdateMaskTypeForAllInputConfigs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.testUseMovingAverageForEval">
<code class="sig-name descname">testUseMovingAverageForEval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.testUseMovingAverageForEval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.test_create_configs_from_pipeline_proto">
<code class="sig-name descname">test_create_configs_from_pipeline_proto</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.test_create_configs_from_pipeline_proto" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests creating configs dictionary from pipeline proto.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.test_create_pipeline_proto_from_configs">
<code class="sig-name descname">test_create_pipeline_proto_from_configs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.test_create_pipeline_proto_from_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that proto can be reconstructed from configs dictionary.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.test_get_configs_from_multiple_files">
<code class="sig-name descname">test_get_configs_from_multiple_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.test_get_configs_from_multiple_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that proto configs can be read from multiple files.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.test_get_configs_from_pipeline_file">
<code class="sig-name descname">test_get_configs_from_pipeline_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.test_get_configs_from_pipeline_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that proto configs can be read from pipeline config file.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.config_util_test.ConfigUtilTest.test_save_pipeline_config">
<code class="sig-name descname">test_save_pipeline_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.config_util_test.ConfigUtilTest.test_save_pipeline_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that the pipeline config is properly saved to disk.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.context_manager">
<span id="vlearn-roa-utils-context-manager-module"></span><h2>vlearn.roa.utils.context_manager module<a class="headerlink" href="#module-vlearn.roa.utils.context_manager" title="Permalink to this headline">¶</a></h2>
<p>Python context management helper.</p>
<dl class="class">
<dt id="vlearn.roa.utils.context_manager.IdentityContextManager">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.context_manager.</code><code class="sig-name descname">IdentityContextManager</code><a class="headerlink" href="#vlearn.roa.utils.context_manager.IdentityContextManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Returns an identity context manager that does nothing.</p>
<p>This is helpful in setting up conditional <cite>with</cite> statement as below:</p>
<dl class="simple">
<dt>with slim.arg_scope(x) if use_slim_scope else IdentityContextManager():</dt><dd><p>do_stuff()</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.context_manager_test">
<span id="vlearn-roa-utils-context-manager-test-module"></span><h2>vlearn.roa.utils.context_manager_test module<a class="headerlink" href="#module-vlearn.roa.utils.context_manager_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for tensorflow_models.object_detection.utils.context_manager.</p>
<dl class="class">
<dt id="vlearn.roa.utils.context_manager_test.ContextManagerTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.context_manager_test.</code><code class="sig-name descname">ContextManagerTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.context_manager_test.ContextManagerTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.context_manager_test.ContextManagerTest.test_identity_context_manager">
<code class="sig-name descname">test_identity_context_manager</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.context_manager_test.ContextManagerTest.test_identity_context_manager" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.dataset_util">
<span id="vlearn-roa-utils-dataset-util-module"></span><h2>vlearn.roa.utils.dataset_util module<a class="headerlink" href="#module-vlearn.roa.utils.dataset_util" title="Permalink to this headline">¶</a></h2>
<p>Utility functions for creating TFRecord data sets.</p>
<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.bytes_feature">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">bytes_feature</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.bytes_feature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.bytes_list_feature">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">bytes_list_feature</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.bytes_list_feature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.float_list_feature">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">float_list_feature</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.float_list_feature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.int64_feature">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">int64_feature</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.int64_feature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.int64_list_feature">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">int64_list_feature</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.int64_list_feature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.read_examples_list">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">read_examples_list</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.read_examples_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Read list of training or validation examples.</p>
<p>The file is assumed to contain a single example per line where the first
token in the line is an identifier that allows us to find the image and
annotation xml for that example.</p>
<p>For example, the line:
xyz 3
would allow us to find files xyz.jpg and xyz.xml (the 3 would be ignored).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – absolute path to examples list file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of example identifiers (strings).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.dataset_util.recursive_parse_xml_to_dict">
<code class="sig-prename descclassname">vlearn.roa.utils.dataset_util.</code><code class="sig-name descname">recursive_parse_xml_to_dict</code><span class="sig-paren">(</span><em class="sig-param">xml</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util.recursive_parse_xml_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively parses XML contents to python dict.</p>
<p>We assume that <cite>object</cite> tags are the only ones that can appear
multiple times at the same level of a tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>xml</strong> – xml tree obtained by parsing XML file contents using lxml.etree</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Python dictionary holding XML contents.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.dataset_util_test">
<span id="vlearn-roa-utils-dataset-util-test-module"></span><h2>vlearn.roa.utils.dataset_util_test module<a class="headerlink" href="#module-vlearn.roa.utils.dataset_util_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.dataset_util.</p>
<dl class="class">
<dt id="vlearn.roa.utils.dataset_util_test.DatasetUtilTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.dataset_util_test.</code><code class="sig-name descname">DatasetUtilTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util_test.DatasetUtilTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.dataset_util_test.DatasetUtilTest.test_read_examples_list">
<code class="sig-name descname">test_read_examples_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.dataset_util_test.DatasetUtilTest.test_read_examples_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.json_utils">
<span id="vlearn-roa-utils-json-utils-module"></span><h2>vlearn.roa.utils.json_utils module<a class="headerlink" href="#module-vlearn.roa.utils.json_utils" title="Permalink to this headline">¶</a></h2>
<p>Utilities for dealing with writing json strings.</p>
<p>json_utils wraps json.dump and json.dumps so that they can be used to safely
control the precision of floats when writing to json strings or files.</p>
<dl class="function">
<dt id="vlearn.roa.utils.json_utils.Dump">
<code class="sig-prename descclassname">vlearn.roa.utils.json_utils.</code><code class="sig-name descname">Dump</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">fid</em>, <em class="sig-param">float_digits=-1</em>, <em class="sig-param">**params</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils.Dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper of json.dump that allows specifying the float precision used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to dump.</p></li>
<li><p><strong>fid</strong> – The file id to write to.</p></li>
<li><p><strong>float_digits</strong> – The number of digits of precision when writing floats out.</p></li>
<li><p><strong>**params</strong> – Additional parameters to pass to json.dumps.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.json_utils.Dumps">
<code class="sig-prename descclassname">vlearn.roa.utils.json_utils.</code><code class="sig-name descname">Dumps</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">float_digits=-1</em>, <em class="sig-param">**params</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils.Dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper of json.dumps that allows specifying the float precision used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – The object to dump.</p></li>
<li><p><strong>float_digits</strong> – The number of digits of precision when writing floats out.</p></li>
<li><p><strong>**params</strong> – Additional parameters to pass to json.dumps.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>JSON string representation of obj.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>output</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.json_utils.PrettyParams">
<code class="sig-prename descclassname">vlearn.roa.utils.json_utils.</code><code class="sig-name descname">PrettyParams</code><span class="sig-paren">(</span><em class="sig-param">**params</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils.PrettyParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns parameters for use with Dump and Dumps to output pretty json.</p>
<dl>
<dt>Example usage:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">`json_str</span> <span class="pre">=</span> <span class="pre">json_utils.Dumps(obj,</span> <span class="pre">**json_utils.PrettyParams())`</span></code>
<a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>json_str = json_utils.Dumps(</p>
<blockquote>
<div><p>obj, <a href="#id5"><span class="problematic" id="id6">**</span></a>json_utils.PrettyParams(allow_nans=False))```</p>
</div></blockquote>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**params</strong> – Additional params to pass to json.dump or json.dumps.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Parameters that are compatible with json_utils.Dump and</dt><dd><p>json_utils.Dumps.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>params</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.json_utils_test">
<span id="vlearn-roa-utils-json-utils-test-module"></span><h2>vlearn.roa.utils.json_utils_test module<a class="headerlink" href="#module-vlearn.roa.utils.json_utils_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for google3.image.understanding.object_detection.utils.json_utils.</p>
<dl class="class">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.json_utils_test.</code><code class="sig-name descname">JsonUtilsTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpPassExtraParams">
<code class="sig-name descname">testDumpPassExtraParams</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpPassExtraParams" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpReasonablePrecision">
<code class="sig-name descname">testDumpReasonablePrecision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpReasonablePrecision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpUnspecifiedPrecision">
<code class="sig-name descname">testDumpUnspecifiedPrecision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpUnspecifiedPrecision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpZeroPrecision">
<code class="sig-name descname">testDumpZeroPrecision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpZeroPrecision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsPassExtraParams">
<code class="sig-name descname">testDumpsPassExtraParams</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsPassExtraParams" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsReasonablePrecision">
<code class="sig-name descname">testDumpsReasonablePrecision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsReasonablePrecision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsUnspecifiedPrecision">
<code class="sig-name descname">testDumpsUnspecifiedPrecision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsUnspecifiedPrecision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsZeroPrecision">
<code class="sig-name descname">testDumpsZeroPrecision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testDumpsZeroPrecision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testPrettyParams">
<code class="sig-name descname">testPrettyParams</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testPrettyParams" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testPrettyParamsExtraParamsInside">
<code class="sig-name descname">testPrettyParamsExtraParamsInside</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testPrettyParamsExtraParamsInside" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.json_utils_test.JsonUtilsTest.testPrettyParamsExtraParamsOutside">
<code class="sig-name descname">testPrettyParamsExtraParamsOutside</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.json_utils_test.JsonUtilsTest.testPrettyParamsExtraParamsOutside" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.label_map_util">
<span id="vlearn-roa-utils-label-map-util-module"></span><h2>vlearn.roa.utils.label_map_util module<a class="headerlink" href="#module-vlearn.roa.utils.label_map_util" title="Permalink to this headline">¶</a></h2>
<p>Label map utility functions.</p>
<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.convert_label_map_to_categories">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">convert_label_map_to_categories</code><span class="sig-paren">(</span><em class="sig-param">label_map</em>, <em class="sig-param">max_num_classes</em>, <em class="sig-param">use_display_name=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.convert_label_map_to_categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Given label map proto returns categories list compatible with eval.</p>
<p>This function converts label map proto and returns a list of dicts, each of
which  has the following keys:</p>
<blockquote>
<div><p>‘id’: (required) an integer id uniquely identifying this category.
‘name’: (required) string representing category name</p>
<blockquote>
<div><p>e.g., ‘cat’, ‘dog’, ‘pizza’.</p>
</div></blockquote>
</div></blockquote>
<p>We only allow class into the list if its id-label_id_offset is
between 0 (inclusive) and max_num_classes (exclusive).
If there are several items mapping to the same id in the label map,
we will only keep the first one in the categories list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_map</strong> – a StringIntLabelMapProto or None.  If None, a default categories
list is created with max_num_classes categories.</p></li>
<li><p><strong>max_num_classes</strong> – maximum number of (consecutive) label indices to include.</p></li>
<li><p><strong>use_display_name</strong> – (boolean) choose whether to load ‘display_name’ field as
category name.  If False or if the display_name field does not exist, uses
‘name’ field as category names instead.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of dictionaries representing all possible categories.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>categories</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.create_categories_from_labelmap">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">create_categories_from_labelmap</code><span class="sig-paren">(</span><em class="sig-param">label_map_path</em>, <em class="sig-param">use_display_name=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.create_categories_from_labelmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a label map and returns categories list compatible with eval.</p>
<p>This function converts label map proto and returns a list of dicts, each of
which  has the following keys:</p>
<blockquote>
<div><p>‘id’: an integer id uniquely identifying this category.
‘name’: string representing category name e.g., ‘cat’, ‘dog’.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_map_path</strong> – Path to <cite>StringIntLabelMap</cite> proto text file.</p></li>
<li><p><strong>use_display_name</strong> – (boolean) choose whether to load ‘display_name’ field
as category name.  If False or if the display_name field does not exist,
uses ‘name’ field as category names instead.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of dictionaries representing all possible categories.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>categories</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.create_category_index">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">create_category_index</code><span class="sig-paren">(</span><em class="sig-param">categories</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.create_category_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates dictionary of COCO compatible categories keyed by category id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>categories</strong> – <p>a list of dicts, each of which has the following keys:
‘id’: (required) an integer id uniquely identifying this category.
‘name’: (required) string representing category name</p>
<blockquote>
<div><p>e.g., ‘cat’, ‘dog’, ‘pizza’.</p>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a dict containing the same entries as categories, but keyed</dt><dd><p>by the ‘id’ field of each category.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>category_index</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.create_category_index_from_labelmap">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">create_category_index_from_labelmap</code><span class="sig-paren">(</span><em class="sig-param">label_map_path</em>, <em class="sig-param">use_display_name=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.create_category_index_from_labelmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a label map and returns a category index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_map_path</strong> – Path to <cite>StringIntLabelMap</cite> proto text file.</p></li>
<li><p><strong>use_display_name</strong> – (boolean) choose whether to load ‘display_name’ field
as category name.  If False or if the display_name field does not exist,
uses ‘name’ field as category names instead.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A category index, which is a dictionary that maps integer ids to dicts
containing categories, e.g.
{1: {‘id’: 1, ‘name’: ‘dog’}, 2: {‘id’: 2, ‘name’: ‘cat’}, …}</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.create_class_agnostic_category_index">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">create_class_agnostic_category_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.create_class_agnostic_category_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a category index with a single <cite>object</cite> class.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.get_label_map_dict">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">get_label_map_dict</code><span class="sig-paren">(</span><em class="sig-param">label_map_path</em>, <em class="sig-param">use_display_name=False</em>, <em class="sig-param">fill_in_gaps_and_background=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.get_label_map_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a label map and returns a dictionary of label names to id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_map_path</strong> – path to StringIntLabelMap proto text file.</p></li>
<li><p><strong>use_display_name</strong> – whether to use the label map items’ display names as keys.</p></li>
<li><p><strong>fill_in_gaps_and_background</strong> – whether to fill in gaps and background with</p></li>
<li><p><strong>to the id field in the proto. The id</strong> (<em>respect</em>) – 0 is reserved for the</p></li>
<li><p><strong>class and will be added if it is missing. All other missing</strong> (<em>'background'</em>) – </p></li>
<li><p><strong>in range</strong> (<em>ids</em>) – </p></li>
<li><p><strong>if they are missing.</strong> (<em>(</em><em>&quot;class_&lt;id&gt;&quot;</em><em>)</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary mapping label names to id.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if fill_in_gaps_and_background and label_map has non-integer or</p></li>
<li><p><strong>negative values.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.get_max_label_map_index">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">get_max_label_map_index</code><span class="sig-paren">(</span><em class="sig-param">label_map</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.get_max_label_map_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get maximum index in label map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>label_map</strong> – a StringIntLabelMapProto</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an integer</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.label_map_util.load_labelmap">
<code class="sig-prename descclassname">vlearn.roa.utils.label_map_util.</code><code class="sig-name descname">load_labelmap</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util.load_labelmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads label map proto.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – path to StringIntLabelMap proto text file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a StringIntLabelMapProto</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.label_map_util_test">
<span id="vlearn-roa-utils-label-map-util-test-module"></span><h2>vlearn.roa.utils.label_map_util_test module<a class="headerlink" href="#module-vlearn.roa.utils.label_map_util_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.label_map_util.</p>
<dl class="class">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.label_map_util_test.</code><code class="sig-name descname">LabelMapUtilTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_convert_label_map_to_categories">
<code class="sig-name descname">test_convert_label_map_to_categories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_convert_label_map_to_categories" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_convert_label_map_to_categories_no_label_map">
<code class="sig-name descname">test_convert_label_map_to_categories_no_label_map</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_convert_label_map_to_categories_no_label_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_convert_label_map_to_categories_with_few_classes">
<code class="sig-name descname">test_convert_label_map_to_categories_with_few_classes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_convert_label_map_to_categories_with_few_classes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_categories_from_labelmap">
<code class="sig-name descname">test_create_categories_from_labelmap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_categories_from_labelmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_category_index">
<code class="sig-name descname">test_create_category_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_category_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_category_index_from_labelmap">
<code class="sig-name descname">test_create_category_index_from_labelmap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_category_index_from_labelmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_category_index_from_labelmap_display">
<code class="sig-name descname">test_create_category_index_from_labelmap_display</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_create_category_index_from_labelmap_display" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_label_map_dict">
<code class="sig-name descname">test_get_label_map_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_label_map_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_label_map_dict_display">
<code class="sig-name descname">test_get_label_map_dict_display</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_label_map_dict_display" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_label_map_dict_with_fill_in_gaps_and_background">
<code class="sig-name descname">test_get_label_map_dict_with_fill_in_gaps_and_background</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_label_map_dict_with_fill_in_gaps_and_background" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_max_label_map_index">
<code class="sig-name descname">test_get_max_label_map_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_get_max_label_map_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_keep_categories_with_unique_id">
<code class="sig-name descname">test_keep_categories_with_unique_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_keep_categories_with_unique_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_load_bad_label_map">
<code class="sig-name descname">test_load_bad_label_map</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_load_bad_label_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_load_label_map_with_background">
<code class="sig-name descname">test_load_label_map_with_background</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.label_map_util_test.LabelMapUtilTest.test_load_label_map_with_background" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.learning_schedules">
<span id="vlearn-roa-utils-learning-schedules-module"></span><h2>vlearn.roa.utils.learning_schedules module<a class="headerlink" href="#module-vlearn.roa.utils.learning_schedules" title="Permalink to this headline">¶</a></h2>
<p>Library of common learning rate schedules.</p>
<dl class="function">
<dt id="vlearn.roa.utils.learning_schedules.cosine_decay_with_warmup">
<code class="sig-prename descclassname">vlearn.roa.utils.learning_schedules.</code><code class="sig-name descname">cosine_decay_with_warmup</code><span class="sig-paren">(</span><em class="sig-param">global_step</em>, <em class="sig-param">learning_rate_base</em>, <em class="sig-param">total_steps</em>, <em class="sig-param">warmup_learning_rate=0.0</em>, <em class="sig-param">warmup_steps=0</em>, <em class="sig-param">hold_base_rate_steps=0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.learning_schedules.cosine_decay_with_warmup" title="Permalink to this definition">¶</a></dt>
<dd><p>Cosine decay schedule with warm up period.</p>
<dl class="simple">
<dt>Cosine annealing learning rate as described in:</dt><dd><p>Loshchilov and Hutter, SGDR: Stochastic Gradient Descent with Warm Restarts.
ICLR 2017. <a class="reference external" href="https://arxiv.org/abs/1608.03983">https://arxiv.org/abs/1608.03983</a></p>
</dd>
</dl>
<p>In this schedule, the learning rate grows linearly from warmup_learning_rate
to learning_rate_base for warmup_steps, then transitions to a cosine decay
schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_step</strong> – int64 (scalar) tensor representing global step.</p></li>
<li><p><strong>learning_rate_base</strong> – base learning rate.</p></li>
<li><p><strong>total_steps</strong> – total number of training steps.</p></li>
<li><p><strong>warmup_learning_rate</strong> – initial learning rate for warm up.</p></li>
<li><p><strong>warmup_steps</strong> – number of warmup steps.</p></li>
<li><p><strong>hold_base_rate_steps</strong> – Optional number of steps to hold base learning rate
before decaying.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>returns a no-arg callable that outputs the (scalar)</dt><dd><p>float tensor learning rate given the current value of global_step.</p>
</dd>
<dt>If in a graph:</dt><dd><p>immediately returns a (scalar) float tensor representing learning rate.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>If executing eagerly</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if warmup_learning_rate is larger than learning_rate_base,
    or if warmup_steps is larger than total_steps.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.learning_schedules.exponential_decay_with_burnin">
<code class="sig-prename descclassname">vlearn.roa.utils.learning_schedules.</code><code class="sig-name descname">exponential_decay_with_burnin</code><span class="sig-paren">(</span><em class="sig-param">global_step</em>, <em class="sig-param">learning_rate_base</em>, <em class="sig-param">learning_rate_decay_steps</em>, <em class="sig-param">learning_rate_decay_factor</em>, <em class="sig-param">burnin_learning_rate=0.0</em>, <em class="sig-param">burnin_steps=0</em>, <em class="sig-param">min_learning_rate=0.0</em>, <em class="sig-param">staircase=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.learning_schedules.exponential_decay_with_burnin" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponential decay schedule with burn-in period.</p>
<p>In this schedule, learning rate is fixed at burnin_learning_rate
for a fixed period, before transitioning to a regular exponential
decay schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_step</strong> – int tensor representing global step.</p></li>
<li><p><strong>learning_rate_base</strong> – base learning rate.</p></li>
<li><p><strong>learning_rate_decay_steps</strong> – steps to take between decaying the learning rate.
Note that this includes the number of burn-in steps.</p></li>
<li><p><strong>learning_rate_decay_factor</strong> – multiplicative factor by which to decay
learning rate.</p></li>
<li><p><strong>burnin_learning_rate</strong> – initial learning rate during burn-in period.  If
0.0 (which is the default), then the burn-in learning rate is simply
set to learning_rate_base.</p></li>
<li><p><strong>burnin_steps</strong> – number of steps to use burnin learning rate.</p></li>
<li><p><strong>min_learning_rate</strong> – the minimum learning rate.</p></li>
<li><p><strong>staircase</strong> – whether use staircase decay.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>returns a no-arg callable that outputs the (scalar)</dt><dd><p>float tensor learning rate given the current value of global_step.</p>
</dd>
<dt>If in a graph:</dt><dd><p>immediately returns a (scalar) float tensor representing learning rate.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>If executing eagerly</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.learning_schedules.manual_stepping">
<code class="sig-prename descclassname">vlearn.roa.utils.learning_schedules.</code><code class="sig-name descname">manual_stepping</code><span class="sig-paren">(</span><em class="sig-param">global_step</em>, <em class="sig-param">boundaries</em>, <em class="sig-param">rates</em>, <em class="sig-param">warmup=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.learning_schedules.manual_stepping" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually stepped learning rate schedule.</p>
<p>This function provides fine grained control over learning rates.  One must
specify a sequence of learning rates as well as a set of integer steps
at which the current learning rate must transition to the next.  For example,
if boundaries = [5, 10] and rates = [.1, .01, .001], then the learning
rate returned by this function is .1 for global_step=0,…,4, .01 for
global_step=5…9, and .001 for global_step=10 and onward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_step</strong> – int64 (scalar) tensor representing global step.</p></li>
<li><p><strong>boundaries</strong> – a list of global steps at which to switch learning
rates.  This list is assumed to consist of increasing positive integers.</p></li>
<li><p><strong>rates</strong> – a list of (float) learning rates corresponding to intervals between
the boundaries.  The length of this list must be exactly
len(boundaries) + 1.</p></li>
<li><p><strong>warmup</strong> – Whether to linearly interpolate learning rate for steps in
[0, boundaries[0]].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>returns a no-arg callable that outputs the (scalar)</dt><dd><p>float tensor learning rate given the current value of global_step.</p>
</dd>
<dt>If in a graph:</dt><dd><p>immediately returns a (scalar) float tensor representing learning rate.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>If executing eagerly</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if one of the following checks fails:
    1. boundaries is a strictly increasing list of positive integers
    2. len(rates) == len(boundaries) + 1
    3. boundaries[0] != 0</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="vlearn-roa-utils-learning-schedules-test-module">
<h2>vlearn.roa.utils.learning_schedules_test module<a class="headerlink" href="#vlearn-roa-utils-learning-schedules-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.metrics">
<span id="vlearn-roa-utils-metrics-module"></span><h2>vlearn.roa.utils.metrics module<a class="headerlink" href="#module-vlearn.roa.utils.metrics" title="Permalink to this headline">¶</a></h2>
<p>Functions for computing metrics like precision, recall, CorLoc and etc.</p>
<dl class="function">
<dt id="vlearn.roa.utils.metrics.compute_average_precision">
<code class="sig-prename descclassname">vlearn.roa.utils.metrics.</code><code class="sig-name descname">compute_average_precision</code><span class="sig-paren">(</span><em class="sig-param">precision</em>, <em class="sig-param">recall</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics.compute_average_precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Average Precision according to the definition in VOCdevkit.</p>
<p>Precision is modified to ensure that it does not decrease as recall
decrease.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>precision</strong> – A float [N, 1] numpy array of precisions</p></li>
<li><p><strong>recall</strong> – A float [N, 1] numpy array of recalls</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the input is not of the correct format</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The area under the precision recall curve. NaN if</dt><dd><p>precision and recall are None.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>average_precison</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.metrics.compute_cor_loc">
<code class="sig-prename descclassname">vlearn.roa.utils.metrics.</code><code class="sig-name descname">compute_cor_loc</code><span class="sig-paren">(</span><em class="sig-param">num_gt_imgs_per_class</em>, <em class="sig-param">num_images_correctly_detected_per_class</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics.compute_cor_loc" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute CorLoc according to the definition in the following paper.</p>
<p><a class="reference external" href="https://www.robots.ox.ac.uk/~vgg/rg/papers/deselaers-eccv10.pdf">https://www.robots.ox.ac.uk/~vgg/rg/papers/deselaers-eccv10.pdf</a></p>
<p>Returns nans if there are no ground truth images for a class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_gt_imgs_per_class</strong> – 1D array, representing number of images containing
at least one object instance of a particular class</p></li>
<li><p><strong>num_images_correctly_detected_per_class</strong> – 1D array, representing number of
images that are correctly detected at least one object instance of a
particular class</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A float numpy array represents the corloc score of each</dt><dd><p>class</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>corloc_per_class</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.metrics.compute_median_rank_at_k">
<code class="sig-prename descclassname">vlearn.roa.utils.metrics.</code><code class="sig-name descname">compute_median_rank_at_k</code><span class="sig-paren">(</span><em class="sig-param">tp_fp_list</em>, <em class="sig-param">k</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics.compute_median_rank_at_k" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes MedianRank&#64;k, where k is the top-scoring labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tp_fp_list</strong> – a list of numpy arrays; each numpy array corresponds to the all
detection on a single image, where the detections are sorted by score in
descending order. Further, each numpy array element can have boolean or
float values. True positive elements have either value &gt;0.0 or True;
any other value is considered false positive.</p></li>
<li><p><strong>k</strong> – number of top-scoring proposals to take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>median rank of all true positive proposals among top k by</dt><dd><p>score.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>median_rank</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.metrics.compute_precision_recall">
<code class="sig-prename descclassname">vlearn.roa.utils.metrics.</code><code class="sig-name descname">compute_precision_recall</code><span class="sig-paren">(</span><em class="sig-param">scores</em>, <em class="sig-param">labels</em>, <em class="sig-param">num_gt</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics.compute_precision_recall" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute precision and recall.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scores</strong> – A float numpy array representing detection score</p></li>
<li><p><strong>labels</strong> – A float numpy array representing weighted true/false positive labels</p></li>
<li><p><strong>num_gt</strong> – Number of ground truth instances</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the input is not of the correct format</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Fraction of positive instances over detected ones. This value is</dt><dd><p>None if no ground truth labels are present.</p>
</dd>
<dt>recall: Fraction of detected positive instance over all positive instances.</dt><dd><p>This value is None if no ground truth labels are present.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>precision</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.metrics.compute_recall_at_k">
<code class="sig-prename descclassname">vlearn.roa.utils.metrics.</code><code class="sig-name descname">compute_recall_at_k</code><span class="sig-paren">(</span><em class="sig-param">tp_fp_list</em>, <em class="sig-param">num_gt</em>, <em class="sig-param">k</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics.compute_recall_at_k" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes Recall&#64;k, MedianRank&#64;k, where k is the top-scoring labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tp_fp_list</strong> – a list of numpy arrays; each numpy array corresponds to the all
detection on a single image, where the detections are sorted by score in
descending order. Further, each numpy array element can have boolean or
float values. True positive elements have either value &gt;0.0 or True;
any other value is considered false positive.</p></li>
<li><p><strong>num_gt</strong> – number of groundtruth anotations.</p></li>
<li><p><strong>k</strong> – number of top-scoring proposals to take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>recall evaluated on the top k by score detections.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>recall</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.metrics_test">
<span id="vlearn-roa-utils-metrics-test-module"></span><h2>vlearn.roa.utils.metrics_test module<a class="headerlink" href="#module-vlearn.roa.utils.metrics_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.metrics.</p>
<dl class="class">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.metrics_test.</code><code class="sig-name descname">MetricsTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_average_precision">
<code class="sig-name descname">test_compute_average_precision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_average_precision" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_cor_loc">
<code class="sig-name descname">test_compute_cor_loc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_cor_loc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_cor_loc_nans">
<code class="sig-name descname">test_compute_cor_loc_nans</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_cor_loc_nans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_median_rank_at_k">
<code class="sig-name descname">test_compute_median_rank_at_k</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_median_rank_at_k" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_precision_recall">
<code class="sig-name descname">test_compute_precision_recall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_precision_recall" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_precision_recall_and_ap_no_groundtruth">
<code class="sig-name descname">test_compute_precision_recall_and_ap_no_groundtruth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_precision_recall_and_ap_no_groundtruth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_precision_recall_float">
<code class="sig-name descname">test_compute_precision_recall_float</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_precision_recall_float" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.metrics_test.MetricsTest.test_compute_recall_at_k">
<code class="sig-name descname">test_compute_recall_at_k</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.metrics_test.MetricsTest.test_compute_recall_at_k" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.model_util">
<span id="vlearn-roa-utils-model-util-module"></span><h2>vlearn.roa.utils.model_util module<a class="headerlink" href="#module-vlearn.roa.utils.model_util" title="Permalink to this headline">¶</a></h2>
<p>Utility functions for manipulating Keras models.</p>
<dl class="function">
<dt id="vlearn.roa.utils.model_util.extract_submodel">
<code class="sig-prename descclassname">vlearn.roa.utils.model_util.</code><code class="sig-name descname">extract_submodel</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">inputs</em>, <em class="sig-param">outputs</em>, <em class="sig-param">name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.model_util.extract_submodel" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts a section of a Keras model into a new model.</p>
<p>This method walks an existing model from the specified outputs back to the
specified inputs in order to construct a new model containing only a portion
of the old model, while sharing the layers and weights with the original
model.</p>
<p>WARNING: This method does not work for submodels containing layers that have
been used multiple times in the original model, or in other models beyond
the original model. (E.g. does not work for submodels that contain layers that
use shared weights). This also means that multiple overlapping submodels
cannot be extracted from the same model.</p>
<p>It also relies on recursion and will hit python’s recursion limit for large
submodels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – The existing Keras model this method extracts a submodel from.</p></li>
<li><p><strong>inputs</strong> – The layer inputs in the existing model that start the submodel</p></li>
<li><p><strong>outputs</strong> – The layer outputs in the existing model that should be output by
the submodel</p></li>
<li><p><strong>name</strong> – The name for the extracted model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The extracted submodel specified by the given inputs and outputs</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.model_util_test">
<span id="vlearn-roa-utils-model-util-test-module"></span><h2>vlearn.roa.utils.model_util_test module<a class="headerlink" href="#module-vlearn.roa.utils.model_util_test" title="Permalink to this headline">¶</a></h2>
<p>Test utility functions for manipulating Keras models.</p>
<dl class="class">
<dt id="vlearn.roa.utils.model_util_test.ExtractSubmodelUtilTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.model_util_test.</code><code class="sig-name descname">ExtractSubmodelUtilTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.model_util_test.ExtractSubmodelUtilTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.model_util_test.ExtractSubmodelUtilTest.test_simple_model">
<code class="sig-name descname">test_simple_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.model_util_test.ExtractSubmodelUtilTest.test_simple_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_list">
<span id="vlearn-roa-utils-np-box-list-module"></span><h2>vlearn.roa.utils.np_box_list module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_list" title="Permalink to this headline">¶</a></h2>
<p>Numpy BoxList classes and functions.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_list.BoxList">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list.</code><code class="sig-name descname">BoxList</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Box collection.</p>
<p>BoxList represents a list of bounding boxes as numpy array, where each
bounding box is represented as a row of 4 numbers,
[y_min, x_min, y_max, x_max].  It is assumed that all bounding boxes within a
given list correspond to a single image.</p>
<p>Optionally, users can add additional related fields (such as
objectness/classification scores).</p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.add_field">
<code class="sig-name descname">add_field</code><span class="sig-paren">(</span><em class="sig-param">field</em>, <em class="sig-param">field_data</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.add_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Add data to a specified field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> – a string parameter used to speficy a related field to be accessed.</p></li>
<li><p><strong>field_data</strong> – a numpy array of [N, …] representing the data associated
with the field.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the field is already exist or the dimension of the field
    data does not matches the number of boxes.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for accesssing box coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a numpy array of shape [N, 4] representing box corners</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.get_coordinates">
<code class="sig-name descname">get_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.get_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Get corner coordinates of boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of 4 1-d numpy arrays [y_min, x_min, y_max, x_max]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.get_extra_fields">
<code class="sig-name descname">get_extra_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.get_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all non-box fields.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.get_field">
<code class="sig-name descname">get_field</code><span class="sig-paren">(</span><em class="sig-param">field</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Accesses data associated with the specified field in the box collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field</strong> – a string parameter used to speficy a related field to be accessed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy 1-d array representing data of an associated field</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if invalid field</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.has_field">
<code class="sig-name descname">has_field</code><span class="sig-paren">(</span><em class="sig-param">field</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.has_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list.BoxList.num_boxes">
<code class="sig-name descname">num_boxes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list.BoxList.num_boxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of boxes held in collections.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_list_ops">
<span id="vlearn-roa-utils-np-box-list-ops-module"></span><h2>vlearn.roa.utils.np_box_list_ops module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_list_ops" title="Permalink to this headline">¶</a></h2>
<p>Bounding Box List operations for Numpy BoxLists.</p>
<dl class="simple">
<dt>Example box operations that are supported:</dt><dd><ul class="simple">
<li><p>Areas: compute bounding box areas</p></li>
<li><p>IOU: pairwise intersection-over-union scores</p></li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_ops.SortOrder">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">SortOrder</code><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.SortOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Enum class for sort order.</p>
<dl class="attribute">
<dt id="vlearn.roa.utils.np_box_list_ops.SortOrder.ascend">
<code class="sig-name descname">ascend</code><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.SortOrder.ascend" title="Permalink to this definition">¶</a></dt>
<dd><p>ascend order.</p>
</dd></dl>

<dl class="attribute">
<dt id="vlearn.roa.utils.np_box_list_ops.SortOrder.descend">
<code class="sig-name descname">descend</code><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.SortOrder.descend" title="Permalink to this definition">¶</a></dt>
<dd><p>descend order.</p>
</dd></dl>

<dl class="attribute">
<dt id="vlearn.roa.utils.np_box_list_ops.SortOrder.ASCEND">
<code class="sig-name descname">ASCEND</code><em class="property"> = 1</em><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.SortOrder.ASCEND" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="vlearn.roa.utils.np_box_list_ops.SortOrder.DESCEND">
<code class="sig-name descname">DESCEND</code><em class="property"> = 2</em><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.SortOrder.DESCEND" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.area">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">area</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes area of boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>boxlist</strong> – BoxList holding N boxes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*1] representing box areas</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.change_coordinate_frame">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">change_coordinate_frame</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">window</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.change_coordinate_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Change coordinate frame of the boxlist to be relative to window’s frame.</p>
<p>Given a window of the form [ymin, xmin, ymax, xmax],
changes bounding box coordinates from boxlist to be relative to this window
(e.g., the min corner maps to (0,0) and the max corner maps to (1,1)).</p>
<p>An example use case is data augmentation: where we are given groundtruth
boxes (boxlist) and would like to randomly crop the image to some
window (window). In this case we need to change the coordinate frame of
each groundtruth box to be relative to this new window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – A BoxList object holding N boxes.</p></li>
<li><p><strong>window</strong> – a size 4 1-D numpy array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns a BoxList object with N boxes.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.clip_to_window">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">clip_to_window</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">window</em>, <em class="sig-param">filter_nonoverlapping=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.clip_to_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Clip bounding boxes to a window.</p>
<p>This op clips input bounding boxes (represented by bounding box
corners) to a window, optionally filtering out boxes that do not
overlap at all with the window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding M_in boxes</p></li>
<li><p><strong>window</strong> – a numpy array of shape [4] representing the
[y_min, x_min, y_max, x_max] window to which the op
should clip boxes.</p></li>
<li><p><strong>filter_nonoverlapping</strong> – whether to filter out boxes that do not overlap at
all with the window.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a BoxList holding M_out boxes where M_out &lt;= M_in</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.concatenate">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param">boxlists</em>, <em class="sig-param">fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate list of BoxLists.</p>
<p>This op concatenates a list of input BoxLists into a larger BoxList.  It also
handles concatenation of BoxList fields as long as the field tensor shapes
are equal except for the first dimension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlists</strong> – list of BoxList objects</p></li>
<li><p><strong>fields</strong> – optional list of fields to also concatenate.  By default, all
fields from the first BoxList in the list are included in the
concatenation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a BoxList with number of boxes equal to</dt><dd><p>sum([boxlist.num_boxes() for boxlist in BoxList])</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if boxlists is invalid (i.e., is not a list, is empty, or
    contains non BoxList objects), or if requested fields are not contained in
    all boxlists</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.filter_scores_greater_than">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">filter_scores_greater_than</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">thresh</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.filter_scores_greater_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter to keep only boxes with score exceeding a given threshold.</p>
<p>This op keeps the collection of boxes whose corresponding scores are
greater than the input threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding N boxes.  Must contain a ‘scores’ field
representing detection scores.</p></li>
<li><p><strong>thresh</strong> – scalar threshold</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a BoxList holding M boxes where M &lt;= N</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if boxlist not a BoxList object or if it does not
    have a scores field</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.gather">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">gather</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">indices</em>, <em class="sig-param">fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.gather" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather boxes from BoxList according to indices and return new BoxList.</p>
<p>By default, gather returns boxes corresponding to the input index list, as
well as all additional fields stored in the boxlist (indexing into the
first dimension).  However one can optionally only gather from a
subset of fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding N boxes</p></li>
<li><p><strong>indices</strong> – a 1-d numpy array of type <a href="#id17"><span class="problematic" id="id18">int_</span></a></p></li>
<li><p><strong>fields</strong> – (optional) list of fields to also gather from.  If None (default),
all fields are gathered from.  Pass an empty fields list to only gather
the box coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a BoxList corresponding to the subset of the input BoxList</dt><dd><p>specified by indices</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>subboxlist</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if specified field is not contained in boxlist or if the
    indices are not of type <a href="#id19"><span class="problematic" id="id20">int_</span></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.intersection">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">intersection</code><span class="sig-paren">(</span><em class="sig-param">boxlist1</em>, <em class="sig-param">boxlist2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute pairwise intersection areas between boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist1</strong> – BoxList holding N boxes</p></li>
<li><p><strong>boxlist2</strong> – BoxList holding M boxes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*M] representing pairwise intersection area</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.ioa">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">ioa</code><span class="sig-paren">(</span><em class="sig-param">boxlist1</em>, <em class="sig-param">boxlist2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.ioa" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-area between box collections.</p>
<p>Intersection-over-area (ioa) between two boxes box1 and box2 is defined as
their intersection area over box2’s area. Note that ioa is not symmetric,
that is, IOA(box1, box2) != IOA(box2, box1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist1</strong> – BoxList holding N boxes</p></li>
<li><p><strong>boxlist2</strong> – BoxList holding M boxes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise ioa scores.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.iou">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">iou</code><span class="sig-paren">(</span><em class="sig-param">boxlist1</em>, <em class="sig-param">boxlist2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.iou" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-union between box collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist1</strong> – BoxList holding N boxes</p></li>
<li><p><strong>boxlist2</strong> – BoxList holding M boxes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise iou scores.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.multi_class_non_max_suppression">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">multi_class_non_max_suppression</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">score_thresh</em>, <em class="sig-param">iou_thresh</em>, <em class="sig-param">max_output_size</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.multi_class_non_max_suppression" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-class version of non maximum suppression.</p>
<p>This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes.  It operates independently for each class for
which scores are provided (via the scores field of the input box_list),
pruning boxes with score less than a provided threshold prior to
applying NMS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding N boxes.  Must contain a ‘scores’ field
representing detection scores.  This scores field is a tensor that can
be 1 dimensional (in the case of a single class) or 2-dimensional, which
which case we assume that it takes the shape [num_boxes, num_classes].
We further assume that this rank is known statically and that
scores.shape[1] is also known (i.e., the number of classes is fixed
and known at graph construction time).</p></li>
<li><p><strong>score_thresh</strong> – scalar threshold for score (low scoring boxes are removed).</p></li>
<li><p><strong>iou_thresh</strong> – scalar threshold for IOU (boxes that that high IOU overlap
with previously selected boxes are removed).</p></li>
<li><p><strong>max_output_size</strong> – maximum number of retained boxes per class.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a BoxList holding M boxes with a rank-1 scores field representing</dt><dd><p>corresponding scores for each box with scores sorted in decreasing order
and a rank-1 classes field representing a class label for each box.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if iou_thresh is not in [0, 1] or if input boxlist does not have
    a valid scores field.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.non_max_suppression">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">non_max_suppression</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">max_output_size=10000</em>, <em class="sig-param">iou_threshold=1.0</em>, <em class="sig-param">score_threshold=-10.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.non_max_suppression" title="Permalink to this definition">¶</a></dt>
<dd><p>Non maximum suppression.</p>
<p>This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes. In each iteration, the detected bounding box with
highest score in the available pool is selected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding N boxes.  Must contain a ‘scores’ field
representing detection scores. All scores belong to the same class.</p></li>
<li><p><strong>max_output_size</strong> – maximum number of retained boxes</p></li>
<li><p><strong>iou_threshold</strong> – intersection over union threshold.</p></li>
<li><p><strong>score_threshold</strong> – minimum score threshold. Remove the boxes with scores
less than this value. Default value is set to -10. A very
low threshold to pass pretty much all the boxes, unless
the user sets a different score threshold.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a BoxList holding M boxes where M &lt;= max_output_size</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if ‘scores’ field does not exist</p></li>
<li><p><strong>ValueError</strong> – if threshold is not in [0, 1]</p></li>
<li><p><strong>ValueError</strong> – if max_output_size &lt; 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.prune_non_overlapping_boxes">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">prune_non_overlapping_boxes</code><span class="sig-paren">(</span><em class="sig-param">boxlist1</em>, <em class="sig-param">boxlist2</em>, <em class="sig-param">minoverlap=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.prune_non_overlapping_boxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Prunes the boxes in boxlist1 that overlap less than thresh with boxlist2.</p>
<p>For each box in boxlist1, we want its IOA to be more than minoverlap with
at least one of the boxes in boxlist2. If it does not, we remove it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist1</strong> – BoxList holding N boxes.</p></li>
<li><p><strong>boxlist2</strong> – BoxList holding M boxes.</p></li>
<li><p><strong>minoverlap</strong> – Minimum required overlap between boxes, to count them as
overlapping.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pruned boxlist with size [N’, 4].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.prune_outside_window">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">prune_outside_window</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">window</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.prune_outside_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Prunes bounding boxes that fall outside a given window.</p>
<p>This function prunes bounding boxes that even partially fall outside the given
window. See also ClipToWindow which only prunes bounding boxes that fall
completely outside the window, and clips any bounding boxes that partially
overflow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – a BoxList holding M_in boxes.</p></li>
<li><p><strong>window</strong> – a numpy array of size 4, representing [ymin, xmin, ymax, xmax]
of the window.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>a tensor with shape [M_out, 4] where M_out &lt;= M_in.
valid_indices: a tensor with shape [M_out] indexing the valid bounding boxes</p>
<blockquote>
<div><p>in the input tensor.</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pruned_corners</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.scale">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">scale</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">y_scale</em>, <em class="sig-param">x_scale</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale box coordinates in x and y dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding N boxes</p></li>
<li><p><strong>y_scale</strong> – float</p></li>
<li><p><strong>x_scale</strong> – float</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>BoxList holding N boxes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boxlist</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_list_ops.sort_by_field">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops.</code><code class="sig-name descname">sort_by_field</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em>, <em class="sig-param">field</em>, <em class="sig-param">order=2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops.sort_by_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort boxes and associated fields according to a scalar field.</p>
<p>A common use case is reordering the boxes according to descending scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxlist</strong> – BoxList holding N boxes.</p></li>
<li><p><strong>field</strong> – A BoxList field for sorting and reordering the BoxList.</p></li>
<li><p><strong>order</strong> – (Optional) ‘descend’ or ‘ascend’. Default is descend.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A sorted BoxList with the field in the specified order.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sorted_boxlist</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – if specified field does not exist or is not of single dimension.</p></li>
<li><p><strong>ValueError</strong> – if the order is not either descend or ascend.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_list_ops_test">
<span id="vlearn-roa-utils-np-box-list-ops-test-module"></span><h2>vlearn.roa.utils.np_box_list_ops_test module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_list_ops_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.np_box_list_ops.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops_test.</code><code class="sig-name descname">AreaRelatedTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_area">
<code class="sig-name descname">test_area</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_change_coordinate_frame">
<code class="sig-name descname">test_change_coordinate_frame</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_change_coordinate_frame" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_clip_to_window">
<code class="sig-name descname">test_clip_to_window</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_clip_to_window" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_concatenate">
<code class="sig-name descname">test_concatenate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_concatenate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_filter_scores_greater_than">
<code class="sig-name descname">test_filter_scores_greater_than</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_filter_scores_greater_than" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_intersection">
<code class="sig-name descname">test_intersection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_intersection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_ioa">
<code class="sig-name descname">test_ioa</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_ioa" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_iou">
<code class="sig-name descname">test_iou</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_iou" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_prune_outside_window">
<code class="sig-name descname">test_prune_outside_window</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_prune_outside_window" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_scale">
<code class="sig-name descname">test_scale</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.AreaRelatedTest.test_scale" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops_test.</code><code class="sig-name descname">GatherOpsTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_fields_specified">
<code class="sig-name descname">test_gather_with_fields_specified</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_fields_specified" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_invalid_field_specified">
<code class="sig-name descname">test_gather_with_invalid_field_specified</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_invalid_field_specified" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_invalid_multidimensional_indices">
<code class="sig-name descname">test_gather_with_invalid_multidimensional_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_invalid_multidimensional_indices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_out_of_range_indices">
<code class="sig-name descname">test_gather_with_out_of_range_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_with_out_of_range_indices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_without_fields_specified">
<code class="sig-name descname">test_gather_without_fields_specified</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.GatherOpsTest.test_gather_without_fields_specified" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops_test.</code><code class="sig-name descname">NonMaximumSuppressionTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_different_iou_threshold">
<code class="sig-name descname">test_different_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_different_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_multiclass_nms">
<code class="sig-name descname">test_multiclass_nms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_multiclass_nms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_nms_disabled_max_output_size_equals_three">
<code class="sig-name descname">test_nms_disabled_max_output_size_equals_three</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_nms_disabled_max_output_size_equals_three" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_at_most_thirty_from_three_clusters">
<code class="sig-name descname">test_select_at_most_thirty_from_three_clusters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_at_most_thirty_from_three_clusters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_at_most_two_from_three_clusters">
<code class="sig-name descname">test_select_at_most_two_from_three_clusters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_at_most_two_from_three_clusters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_from_ten_indentical_boxes">
<code class="sig-name descname">test_select_from_ten_indentical_boxes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_from_ten_indentical_boxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_from_three_clusters">
<code class="sig-name descname">test_select_from_three_clusters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_select_from_three_clusters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_with_no_scores_field">
<code class="sig-name descname">test_with_no_scores_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.NonMaximumSuppressionTest.test_with_no_scores_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_ops_test.</code><code class="sig-name descname">SortByFieldTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_ascending_sorting">
<code class="sig-name descname">test_with_ascending_sorting</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_ascending_sorting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_descending_sorting">
<code class="sig-name descname">test_with_descending_sorting</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_descending_sorting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_invalid_field">
<code class="sig-name descname">test_with_invalid_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_invalid_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_invalid_sorting_order">
<code class="sig-name descname">test_with_invalid_sorting_order</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_ops_test.SortByFieldTest.test_with_invalid_sorting_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_list_test">
<span id="vlearn-roa-utils-np-box-list-test-module"></span><h2>vlearn.roa.utils.np_box_list_test module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_list_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.np_box_list_test.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_test.</code><code class="sig-name descname">AddExtraFieldTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_already_existed_field">
<code class="sig-name descname">test_add_already_existed_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_already_existed_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_invalid_field_data">
<code class="sig-name descname">test_add_invalid_field_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_invalid_field_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_multi_dimensional_field_data">
<code class="sig-name descname">test_add_multi_dimensional_field_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_multi_dimensional_field_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_single_dimensional_field_data">
<code class="sig-name descname">test_add_single_dimensional_field_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_add_single_dimensional_field_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_get_coordinates">
<code class="sig-name descname">test_get_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_get_coordinates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_get_extra_fields">
<code class="sig-name descname">test_get_extra_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_get_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_num_boxes">
<code class="sig-name descname">test_num_boxes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.AddExtraFieldTest.test_num_boxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.np_box_list_test.BoxListTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_list_test.</code><code class="sig-name descname">BoxListTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.BoxListTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.BoxListTest.test_get_field_with_existed_field">
<code class="sig-name descname">test_get_field_with_existed_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.BoxListTest.test_get_field_with_existed_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.BoxListTest.test_get_field_with_nonexited_field">
<code class="sig-name descname">test_get_field_with_nonexited_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.BoxListTest.test_get_field_with_nonexited_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.BoxListTest.test_has_field_with_existed_field">
<code class="sig-name descname">test_has_field_with_existed_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.BoxListTest.test_has_field_with_existed_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.BoxListTest.test_has_field_with_nonexisted_field">
<code class="sig-name descname">test_has_field_with_nonexisted_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.BoxListTest.test_has_field_with_nonexisted_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_list_test.BoxListTest.test_invalid_box_data">
<code class="sig-name descname">test_invalid_box_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_list_test.BoxListTest.test_invalid_box_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_mask_list">
<span id="vlearn-roa-utils-np-box-mask-list-module"></span><h2>vlearn.roa.utils.np_box_mask_list module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_mask_list" title="Permalink to this headline">¶</a></h2>
<p>Numpy BoxMaskList classes and functions.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_mask_list.BoxMaskList">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list.</code><code class="sig-name descname">BoxMaskList</code><span class="sig-paren">(</span><em class="sig-param">box_data</em>, <em class="sig-param">mask_data</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list.BoxMaskList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.utils.np_box_list.BoxList</span></code></p>
<p>Convenience wrapper for BoxList with masks.</p>
<p>BoxMaskList extends the np_box_list.BoxList to contain masks as well.
In particular, its constructor receives both boxes and masks. Note that the
masks correspond to the full image.</p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list.BoxMaskList.get_masks">
<code class="sig-name descname">get_masks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list.BoxMaskList.get_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for accessing masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a numpy array of shape [N, height, width] representing masks</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_mask_list_ops">
<span id="vlearn-roa-utils-np-box-mask-list-ops-module"></span><h2>vlearn.roa.utils.np_box_mask_list_ops module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_mask_list_ops" title="Permalink to this headline">¶</a></h2>
<p>Operations for np_box_mask_list.BoxMaskList.</p>
<dl class="simple">
<dt>Example box operations that are supported:</dt><dd><ul class="simple">
<li><p>Areas: compute bounding box areas</p></li>
<li><p>IOU: pairwise intersection-over-union scores</p></li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.area">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">area</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes area of masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>box_mask_list</strong> – np_box_mask_list.BoxMaskList holding N boxes and masks</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*1] representing mask areas</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.box_list_to_box_mask_list">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">box_list_to_box_mask_list</code><span class="sig-paren">(</span><em class="sig-param">boxlist</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.box_list_to_box_mask_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a BoxList containing ‘masks’ into a BoxMaskList.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>boxlist</strong> – An np_box_list.BoxList object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An np_box_mask_list.BoxMaskList object.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If boxlist does not contain <cite>masks</cite> as a field.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.concatenate">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param">box_mask_lists</em>, <em class="sig-param">fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate list of box_mask_lists.</p>
<p>This op concatenates a list of input box_mask_lists into a larger
box_mask_list.  It also
handles concatenation of box_mask_list fields as long as the field tensor
shapes are equal except for the first dimension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_lists</strong> – list of np_box_mask_list.BoxMaskList objects</p></li>
<li><p><strong>fields</strong> – optional list of fields to also concatenate.  By default, all
fields from the first BoxMaskList in the list are included in the
concatenation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a box_mask_list with number of boxes equal to</dt><dd><p>sum([box_mask_list.num_boxes() for box_mask_list in box_mask_list])</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if box_mask_lists is invalid (i.e., is not a list, is empty, or
    contains non box_mask_list objects), or if requested fields are not
    contained in all box_mask_lists</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.filter_scores_greater_than">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">filter_scores_greater_than</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list</em>, <em class="sig-param">thresh</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.filter_scores_greater_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter to keep only boxes and masks with score exceeding a given threshold.</p>
<p>This op keeps the collection of boxes and masks whose corresponding scores are
greater than the input threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list</strong> – BoxMaskList holding N boxes and masks.  Must contain a
‘scores’ field representing detection scores.</p></li>
<li><p><strong>thresh</strong> – scalar threshold</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a BoxMaskList holding M boxes and masks where M &lt;= N</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if box_mask_list not a np_box_mask_list.BoxMaskList object or
    if it does not have a scores field</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.gather">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">gather</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list</em>, <em class="sig-param">indices</em>, <em class="sig-param">fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.gather" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather boxes from np_box_mask_list.BoxMaskList according to indices.</p>
<p>By default, gather returns boxes corresponding to the input index list, as
well as all additional fields stored in the box_mask_list (indexing into the
first dimension).  However one can optionally only gather from a
subset of fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list</strong> – np_box_mask_list.BoxMaskList holding N boxes</p></li>
<li><p><strong>indices</strong> – a 1-d numpy array of type <a href="#id21"><span class="problematic" id="id22">int_</span></a></p></li>
<li><p><strong>fields</strong> – (optional) list of fields to also gather from.  If None (default),
all fields are gathered from.  Pass an empty fields list to only gather
the box coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a np_box_mask_list.BoxMaskList corresponding to the subset</dt><dd><p>of the input box_mask_list specified by indices</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>subbox_mask_list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if specified field is not contained in box_mask_list or if the
    indices are not of type <a href="#id23"><span class="problematic" id="id24">int_</span></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.intersection">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">intersection</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list1</em>, <em class="sig-param">box_mask_list2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute pairwise intersection areas between masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list1</strong> – BoxMaskList holding N boxes and masks</p></li>
<li><p><strong>box_mask_list2</strong> – BoxMaskList holding M boxes and masks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*M] representing pairwise intersection area</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.ioa">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">ioa</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list1</em>, <em class="sig-param">box_mask_list2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.ioa" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-area between box and mask collections.</p>
<p>Intersection-over-area (ioa) between two masks mask1 and mask2 is defined as
their intersection area over mask2’s area. Note that ioa is not symmetric,
that is, IOA(mask1, mask2) != IOA(mask2, mask1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list1</strong> – np_box_mask_list.BoxMaskList holding N boxes and masks</p></li>
<li><p><strong>box_mask_list2</strong> – np_box_mask_list.BoxMaskList holding M boxes and masks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise ioa scores.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.iou">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">iou</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list1</em>, <em class="sig-param">box_mask_list2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.iou" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-union between box and mask collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list1</strong> – BoxMaskList holding N boxes and masks</p></li>
<li><p><strong>box_mask_list2</strong> – BoxMaskList holding M boxes and masks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise iou scores.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.multi_class_non_max_suppression">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">multi_class_non_max_suppression</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list</em>, <em class="sig-param">score_thresh</em>, <em class="sig-param">iou_thresh</em>, <em class="sig-param">max_output_size</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.multi_class_non_max_suppression" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-class version of non maximum suppression.</p>
<p>This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes.  It operates independently for each class for
which scores are provided (via the scores field of the input box_list),
pruning boxes with score less than a provided threshold prior to
applying NMS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list</strong> – np_box_mask_list.BoxMaskList holding N boxes.  Must contain a
‘scores’ field representing detection scores.  This scores field is a
tensor that can be 1 dimensional (in the case of a single class) or
2-dimensional, in which case we assume that it takes the
shape [num_boxes, num_classes]. We further assume that this rank is known
statically and that scores.shape[1] is also known (i.e., the number of
classes is fixed and known at graph construction time).</p></li>
<li><p><strong>score_thresh</strong> – scalar threshold for score (low scoring boxes are removed).</p></li>
<li><p><strong>iou_thresh</strong> – scalar threshold for IOU (boxes that that high IOU overlap
with previously selected boxes are removed).</p></li>
<li><p><strong>max_output_size</strong> – maximum number of retained boxes per class.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a box_mask_list holding M boxes with a rank-1 scores field representing</dt><dd><p>corresponding scores for each box with scores sorted in decreasing order
and a rank-1 classes field representing a class label for each box.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if iou_thresh is not in [0, 1] or if input box_mask_list does
    not have a valid scores field.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.non_max_suppression">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">non_max_suppression</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list</em>, <em class="sig-param">max_output_size=10000</em>, <em class="sig-param">iou_threshold=1.0</em>, <em class="sig-param">score_threshold=-10.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.non_max_suppression" title="Permalink to this definition">¶</a></dt>
<dd><p>Non maximum suppression.</p>
<p>This op greedily selects a subset of detection bounding boxes, pruning
away boxes that have high IOU (intersection over union) overlap (&gt; thresh)
with already selected boxes. In each iteration, the detected bounding box with
highest score in the available pool is selected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list</strong> – np_box_mask_list.BoxMaskList holding N boxes.  Must contain
a ‘scores’ field representing detection scores. All scores belong to the
same class.</p></li>
<li><p><strong>max_output_size</strong> – maximum number of retained boxes</p></li>
<li><p><strong>iou_threshold</strong> – intersection over union threshold.</p></li>
<li><p><strong>score_threshold</strong> – minimum score threshold. Remove the boxes with scores
less than this value. Default value is set to -10. A very
low threshold to pass pretty much all the boxes, unless
the user sets a different score threshold.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an np_box_mask_list.BoxMaskList holding M boxes where M &lt;= max_output_size</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if ‘scores’ field does not exist</p></li>
<li><p><strong>ValueError</strong> – if threshold is not in [0, 1]</p></li>
<li><p><strong>ValueError</strong> – if max_output_size &lt; 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.prune_non_overlapping_masks">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">prune_non_overlapping_masks</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list1</em>, <em class="sig-param">box_mask_list2</em>, <em class="sig-param">minoverlap=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.prune_non_overlapping_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Prunes the boxes in list1 that overlap less than thresh with list2.</p>
<p>For each mask in box_mask_list1, we want its IOA to be more than minoverlap
with at least one of the masks in box_mask_list2. If it does not, we remove
it. If the masks are not full size image, we do the pruning based on boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list1</strong> – np_box_mask_list.BoxMaskList holding N boxes and masks.</p></li>
<li><p><strong>box_mask_list2</strong> – np_box_mask_list.BoxMaskList holding M boxes and masks.</p></li>
<li><p><strong>minoverlap</strong> – Minimum required overlap between boxes, to count them as
overlapping.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pruned box_mask_list with size [N’, 4].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_mask_list_ops.sort_by_field">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops.</code><code class="sig-name descname">sort_by_field</code><span class="sig-paren">(</span><em class="sig-param">box_mask_list</em>, <em class="sig-param">field</em>, <em class="sig-param">order=2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops.sort_by_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort boxes and associated fields according to a scalar field.</p>
<p>A common use case is reordering the boxes according to descending scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_mask_list</strong> – BoxMaskList holding N boxes.</p></li>
<li><p><strong>field</strong> – A BoxMaskList field for sorting and reordering the BoxMaskList.</p></li>
<li><p><strong>order</strong> – (Optional) ‘descend’ or ‘ascend’. Default is descend.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A sorted BoxMaskList with the field in the specified</dt><dd><p>order.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sorted_box_mask_list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_mask_list_ops_test">
<span id="vlearn-roa-utils-np-box-mask-list-ops-test-module"></span><h2>vlearn.roa.utils.np_box_mask_list_ops_test module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_mask_list_ops_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.np_box_mask_list_ops.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops_test.</code><code class="sig-name descname">AreaRelatedTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_area">
<code class="sig-name descname">test_area</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_intersection">
<code class="sig-name descname">test_intersection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_intersection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_ioa">
<code class="sig-name descname">test_ioa</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_ioa" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_iou">
<code class="sig-name descname">test_iou</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.AreaRelatedTest.test_iou" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_ops_test.</code><code class="sig-name descname">NonMaximumSuppressionTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.test_multiclass_nms">
<code class="sig-name descname">test_multiclass_nms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.test_multiclass_nms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.test_nms_disabled_max_output_size_equals_one">
<code class="sig-name descname">test_nms_disabled_max_output_size_equals_one</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.test_nms_disabled_max_output_size_equals_one" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.test_with_no_scores_field">
<code class="sig-name descname">test_with_no_scores_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_ops_test.NonMaximumSuppressionTest.test_with_no_scores_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_mask_list_test">
<span id="vlearn-roa-utils-np-box-mask-list-test-module"></span><h2>vlearn.roa.utils.np_box_mask_list_test module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_mask_list_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.np_box_mask_list_test.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_test.</code><code class="sig-name descname">AddExtraFieldTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_already_existed_field_bbox">
<code class="sig-name descname">test_add_already_existed_field_bbox</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_already_existed_field_bbox" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_already_existed_field_mask">
<code class="sig-name descname">test_add_already_existed_field_mask</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_already_existed_field_mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_invalid_field_data">
<code class="sig-name descname">test_add_invalid_field_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_invalid_field_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_multi_dimensional_field_data">
<code class="sig-name descname">test_add_multi_dimensional_field_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_multi_dimensional_field_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_single_dimensional_field_data">
<code class="sig-name descname">test_add_single_dimensional_field_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_add_single_dimensional_field_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_get_coordinates">
<code class="sig-name descname">test_get_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_get_coordinates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_get_extra_fields">
<code class="sig-name descname">test_get_extra_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_get_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_num_boxes">
<code class="sig-name descname">test_num_boxes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.AddExtraFieldTest.test_num_boxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_mask_list_test.</code><code class="sig-name descname">BoxMaskListTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_get_field_with_existed_field">
<code class="sig-name descname">test_get_field_with_existed_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_get_field_with_existed_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_get_field_with_nonexited_field">
<code class="sig-name descname">test_get_field_with_nonexited_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_get_field_with_nonexited_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_has_field_with_existed_field">
<code class="sig-name descname">test_has_field_with_existed_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_has_field_with_existed_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_has_field_with_nonexisted_field">
<code class="sig-name descname">test_has_field_with_nonexisted_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_has_field_with_nonexisted_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_invalid_box_mask_data">
<code class="sig-name descname">test_invalid_box_mask_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_mask_list_test.BoxMaskListTest.test_invalid_box_mask_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_ops">
<span id="vlearn-roa-utils-np-box-ops-module"></span><h2>vlearn.roa.utils.np_box_ops module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_ops" title="Permalink to this headline">¶</a></h2>
<p>Operations for [N, 4] numpy arrays representing bounding boxes.</p>
<dl class="simple">
<dt>Example box operations that are supported:</dt><dd><ul class="simple">
<li><p>Areas: compute bounding box areas</p></li>
<li><p>IOU: pairwise intersection-over-union scores</p></li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="vlearn.roa.utils.np_box_ops.area">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_ops.</code><code class="sig-name descname">area</code><span class="sig-paren">(</span><em class="sig-param">boxes</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes area of boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>boxes</strong> – Numpy array with shape [N, 4] holding N boxes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*1] representing box areas</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_ops.intersection">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_ops.</code><code class="sig-name descname">intersection</code><span class="sig-paren">(</span><em class="sig-param">boxes1</em>, <em class="sig-param">boxes2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute pairwise intersection areas between boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes1</strong> – a numpy array with shape [N, 4] holding N boxes</p></li>
<li><p><strong>boxes2</strong> – a numpy array with shape [M, 4] holding M boxes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*M] representing pairwise intersection area</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_ops.ioa">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_ops.</code><code class="sig-name descname">ioa</code><span class="sig-paren">(</span><em class="sig-param">boxes1</em>, <em class="sig-param">boxes2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops.ioa" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-area between box collections.</p>
<p>Intersection-over-area (ioa) between two boxes box1 and box2 is defined as
their intersection area over box2’s area. Note that ioa is not symmetric,
that is, IOA(box1, box2) != IOA(box2, box1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes1</strong> – a numpy array with shape [N, 4] holding N boxes.</p></li>
<li><p><strong>boxes2</strong> – a numpy array with shape [M, 4] holding N boxes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise ioa scores.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_box_ops.iou">
<code class="sig-prename descclassname">vlearn.roa.utils.np_box_ops.</code><code class="sig-name descname">iou</code><span class="sig-paren">(</span><em class="sig-param">boxes1</em>, <em class="sig-param">boxes2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops.iou" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-union between box collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes1</strong> – a numpy array with shape [N, 4] holding N boxes.</p></li>
<li><p><strong>boxes2</strong> – a numpy array with shape [M, 4] holding N boxes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise iou scores.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_box_ops_test">
<span id="vlearn-roa-utils-np-box-ops-test-module"></span><h2>vlearn.roa.utils.np_box_ops_test module<a class="headerlink" href="#module-vlearn.roa.utils.np_box_ops_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.np_box_ops.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_box_ops_test.BoxOpsTests">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_box_ops_test.</code><code class="sig-name descname">BoxOpsTests</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops_test.BoxOpsTests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_box_ops_test.BoxOpsTests.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops_test.BoxOpsTests.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testArea">
<code class="sig-name descname">testArea</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testArea" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testIOA">
<code class="sig-name descname">testIOA</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testIOA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testIOU">
<code class="sig-name descname">testIOU</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testIOU" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testIntersection">
<code class="sig-name descname">testIntersection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_box_ops_test.BoxOpsTests.testIntersection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_mask_ops">
<span id="vlearn-roa-utils-np-mask-ops-module"></span><h2>vlearn.roa.utils.np_mask_ops module<a class="headerlink" href="#module-vlearn.roa.utils.np_mask_ops" title="Permalink to this headline">¶</a></h2>
<p>Operations for [N, height, width] numpy arrays representing masks.</p>
<dl class="simple">
<dt>Example mask operations that are supported:</dt><dd><ul class="simple">
<li><p>Areas: compute mask areas</p></li>
<li><p>IOU: pairwise intersection-over-union scores</p></li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="vlearn.roa.utils.np_mask_ops.area">
<code class="sig-prename descclassname">vlearn.roa.utils.np_mask_ops.</code><code class="sig-name descname">area</code><span class="sig-paren">(</span><em class="sig-param">masks</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes area of masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>masks</strong> – Numpy array with shape [N, height, width] holding N masks. Masks
values are of type np.uint8 and values are in {0,1}.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*1] representing mask areas.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If masks.dtype is not np.uint8</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_mask_ops.intersection">
<code class="sig-prename descclassname">vlearn.roa.utils.np_mask_ops.</code><code class="sig-name descname">intersection</code><span class="sig-paren">(</span><em class="sig-param">masks1</em>, <em class="sig-param">masks2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute pairwise intersection areas between masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>masks1</strong> – a numpy array with shape [N, height, width] holding N masks. Masks
values are of type np.uint8 and values are in {0,1}.</p></li>
<li><p><strong>masks2</strong> – a numpy array with shape [M, height, width] holding M masks. Masks
values are of type np.uint8 and values are in {0,1}.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N*M] representing pairwise intersection area.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If masks1 and masks2 are not of type np.uint8.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_mask_ops.ioa">
<code class="sig-prename descclassname">vlearn.roa.utils.np_mask_ops.</code><code class="sig-name descname">ioa</code><span class="sig-paren">(</span><em class="sig-param">masks1</em>, <em class="sig-param">masks2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops.ioa" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-area between box collections.</p>
<p>Intersection-over-area (ioa) between two masks, mask1 and mask2 is defined as
their intersection area over mask2’s area. Note that ioa is not symmetric,
that is, IOA(mask1, mask2) != IOA(mask2, mask1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>masks1</strong> – a numpy array with shape [N, height, width] holding N masks. Masks
values are of type np.uint8 and values are in {0,1}.</p></li>
<li><p><strong>masks2</strong> – a numpy array with shape [M, height, width] holding N masks. Masks
values are of type np.uint8 and values are in {0,1}.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise ioa scores.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If masks1 and masks2 are not of type np.uint8.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.np_mask_ops.iou">
<code class="sig-prename descclassname">vlearn.roa.utils.np_mask_ops.</code><code class="sig-name descname">iou</code><span class="sig-paren">(</span><em class="sig-param">masks1</em>, <em class="sig-param">masks2</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops.iou" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pairwise intersection-over-union between mask collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>masks1</strong> – a numpy array with shape [N, height, width] holding N masks. Masks
values are of type np.uint8 and values are in {0,1}.</p></li>
<li><p><strong>masks2</strong> – a numpy array with shape [M, height, width] holding N masks. Masks
values are of type np.uint8 and values are in {0,1}.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a numpy array with shape [N, M] representing pairwise iou scores.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If masks1 and masks2 are not of type np.uint8.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.np_mask_ops_test">
<span id="vlearn-roa-utils-np-mask-ops-test-module"></span><h2>vlearn.roa.utils.np_mask_ops_test module<a class="headerlink" href="#module-vlearn.roa.utils.np_mask_ops_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.np_mask_ops.</p>
<dl class="class">
<dt id="vlearn.roa.utils.np_mask_ops_test.MaskOpsTests">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.np_mask_ops_test.</code><code class="sig-name descname">MaskOpsTests</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops_test.MaskOpsTests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testArea">
<code class="sig-name descname">testArea</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testArea" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testIOA">
<code class="sig-name descname">testIOA</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testIOA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testIOU">
<code class="sig-name descname">testIOU</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testIOU" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testIntersection">
<code class="sig-name descname">testIntersection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.np_mask_ops_test.MaskOpsTests.testIntersection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.object_detection_evaluation">
<span id="vlearn-roa-utils-object-detection-evaluation-module"></span><h2>vlearn.roa.utils.object_detection_evaluation module<a class="headerlink" href="#module-vlearn.roa.utils.object_detection_evaluation" title="Permalink to this headline">¶</a></h2>
<p>object_detection_evaluation module.</p>
<p>ObjectDetectionEvaluation is a class which manages ground truth information of a
object detection dataset, and computes frequently used detection metrics such as
Precision, Recall, CorLoc of the provided detection results.
It supports the following operations:
1) Add ground truth information of images sequentially.
2) Add detection result of images sequentially.
3) Evaluate detection metrics on already inserted detection results.
4) Write evaluation result into a pickle file for future processing or</p>
<blockquote>
<div><p>visualization.</p>
</div></blockquote>
<p>Note: This module operates on numpy boxes and box lists.</p>
<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">DetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Interface for object detection evalution classes.</p>
<p>evaluator = DetectionEvaluator(categories)</p>
<p># Detections and groundtruth for image 1.
evaluator.add_single_groundtruth_image_info(…)
evaluator.add_single_detected_image_info(…)</p>
<p># Detections and groundtruth for image 2.
evaluator.add_single_groundtruth_image_info(…)
evaluator.add_single_detected_image_info(…)</p>
<p>metrics_dict = evaluator.evaluate()</p>
<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.add_single_detected_image_info">
<em class="property">abstract </em><code class="sig-name descname">add_single_detected_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">detections_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.add_single_detected_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds detections for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>detections_dict</strong> – A dictionary of detection numpy arrays required for
evaluation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.add_single_ground_truth_image_info">
<em class="property">abstract </em><code class="sig-name descname">add_single_ground_truth_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">groundtruth_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.add_single_ground_truth_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds groundtruth for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>groundtruth_dict</strong> – A dictionary of groundtruth numpy arrays required for
evaluations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.clear">
<em class="property">abstract </em><code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the state to prepare for a fresh evaluation.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.evaluate">
<em class="property">abstract </em><code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates detections and returns a dictionary of metrics.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.get_estimator_eval_metric_ops">
<code class="sig-name descname">get_estimator_eval_metric_ops</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.get_estimator_eval_metric_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dict of metrics to use with <cite>tf.estimator.EstimatorSpec</cite>.</p>
<p>Note that this must only be implemented if performing evaluation with a
<cite>tf.estimator.Estimator</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_dict</strong> – A dictionary that holds tensors for evaluating an object
detection model, returned from
eval_util.result_dict_for_single_example().</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of metric names to tuple of value_op and update_op that can
be used as eval metric ops in <cite>tf.estimator.EstimatorSpec</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.observe_result_dict_for_single_example">
<code class="sig-name descname">observe_result_dict_for_single_example</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator.observe_result_dict_for_single_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Observes an evaluation result dict for a single example.</p>
<p>When executing eagerly, once all observations have been observed by this
method you can use <cite>.evaluate()</cite> to get the final metrics.</p>
<p>When using <cite>tf.estimator.Estimator</cite> for evaluation this function is used by
<cite>get_estimator_eval_metric_ops()</cite> to construct the metric update op.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_dict</strong> – A dictionary that holds tensors for evaluating an object
detection model, returned from
eval_util.result_dict_for_single_example().</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None when executing eagerly, or an update_op that can be used to update
the eval metrics in <cite>tf.estimator.EstimatorSpec</cite>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">ObjectDetectionEvalMetrics</code><span class="sig-paren">(</span><em class="sig-param">average_precisions</em>, <em class="sig-param">mean_ap</em>, <em class="sig-param">precisions</em>, <em class="sig-param">recalls</em>, <em class="sig-param">corlocs</em>, <em class="sig-param">mean_corloc</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.average_precisions">
<em class="property">property </em><code class="sig-name descname">average_precisions</code><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.average_precisions" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.corlocs">
<em class="property">property </em><code class="sig-name descname">corlocs</code><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.corlocs" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.mean_ap">
<em class="property">property </em><code class="sig-name descname">mean_ap</code><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.mean_ap" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.mean_corloc">
<em class="property">property </em><code class="sig-name descname">mean_corloc</code><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.mean_corloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.precisions">
<em class="property">property </em><code class="sig-name descname">precisions</code><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.precisions" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.recalls">
<em class="property">property </em><code class="sig-name descname">recalls</code><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvalMetrics.recalls" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">ObjectDetectionEvaluation</code><span class="sig-paren">(</span><em class="sig-param">num_groundtruth_classes</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">nms_iou_threshold=1.0</em>, <em class="sig-param">nms_max_output_boxes=10000</em>, <em class="sig-param">recall_lower_bound=0.0</em>, <em class="sig-param">recall_upper_bound=1.0</em>, <em class="sig-param">use_weighted_mean_ap=False</em>, <em class="sig-param">label_id_offset=0</em>, <em class="sig-param">group_of_weight=0.0</em>, <em class="sig-param">per_image_eval_class=&lt;class 'object_detection.utils.per_image_evaluation.PerImageEvaluation'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Internal implementation of Pascal object detection metrics.</p>
<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.add_single_detected_image_info">
<code class="sig-name descname">add_single_detected_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_key</em>, <em class="sig-param">detected_boxes</em>, <em class="sig-param">detected_scores</em>, <em class="sig-param">detected_class_labels</em>, <em class="sig-param">detected_masks=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.add_single_detected_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds detections for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_key</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>detected_boxes</strong> – float32 numpy array of shape [num_boxes, 4] containing
<cite>num_boxes</cite> detection boxes of the format [ymin, xmin, ymax, xmax] in
absolute image coordinates.</p></li>
<li><p><strong>detected_scores</strong> – float32 numpy array of shape [num_boxes] containing
detection scores for the boxes.</p></li>
<li><p><strong>detected_class_labels</strong> – integer numpy array of shape [num_boxes] containing
0-indexed detection classes for the boxes.</p></li>
<li><p><strong>detected_masks</strong> – np.uint8 numpy array of shape [num_boxes, height, width]
containing <cite>num_boxes</cite> detection masks with values ranging between 0 and
1.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the number of boxes, scores and class labels differ in
    length.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.add_single_ground_truth_image_info">
<code class="sig-name descname">add_single_ground_truth_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_key</em>, <em class="sig-param">groundtruth_boxes</em>, <em class="sig-param">groundtruth_class_labels</em>, <em class="sig-param">groundtruth_is_difficult_list=None</em>, <em class="sig-param">groundtruth_is_group_of_list=None</em>, <em class="sig-param">groundtruth_masks=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.add_single_ground_truth_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds groundtruth for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_key</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>groundtruth_boxes</strong> – float32 numpy array of shape [num_boxes, 4] containing
<cite>num_boxes</cite> groundtruth boxes of the format [ymin, xmin, ymax, xmax] in
absolute image coordinates.</p></li>
<li><p><strong>groundtruth_class_labels</strong> – integer numpy array of shape [num_boxes]
containing 0-indexed groundtruth classes for the boxes.</p></li>
<li><p><strong>groundtruth_is_difficult_list</strong> – A length M numpy boolean array denoting
whether a ground truth box is a difficult instance or not. To support
the case that no boxes are difficult, it is by default set as None.</p></li>
<li><p><strong>groundtruth_is_group_of_list</strong> – A length M numpy boolean array denoting
whether a ground truth box is a group-of box or not. To support the case
that no boxes are groups-of, it is by default set as None.</p></li>
<li><p><strong>groundtruth_masks</strong> – uint8 numpy array of shape [num_boxes, height, width]
containing <cite>num_boxes</cite> groundtruth masks. The mask values range from 0
to 1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.clear_detections">
<code class="sig-name descname">clear_detections</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.clear_detections" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluation.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute evaluation result.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl>
<dt>A named tuple with the following fields -</dt><dd><dl class="simple">
<dt>average_precision: float numpy array of average precision for</dt><dd><p>each class.</p>
</dd>
</dl>
<p>mean_ap: mean average precision of all classes, float scalar
precisions: List of precisions, each precision is a float numpy</p>
<blockquote>
<div><p>array</p>
</div></blockquote>
<p>recalls: List of recalls, each recall is a float numpy array
corloc: numpy float array
mean_corloc: Mean CorLoc score for each class, float scalar</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">ObjectDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">recall_lower_bound=0.0</em>, <em class="sig-param">recall_upper_bound=1.0</em>, <em class="sig-param">evaluate_corlocs=False</em>, <em class="sig-param">evaluate_precision_recall=False</em>, <em class="sig-param">metric_prefix=None</em>, <em class="sig-param">use_weighted_mean_ap=False</em>, <em class="sig-param">evaluate_masks=False</em>, <em class="sig-param">group_of_weight=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.DetectionEvaluator</span></code></a></p>
<p>A class to evaluate detections.</p>
<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.add_single_detected_image_info">
<code class="sig-name descname">add_single_detected_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">detections_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.add_single_detected_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds detections for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>detections_dict</strong> – <p>A dictionary containing -
standard_fields.DetectionResultFields.detection_boxes: float32 numpy</p>
<blockquote>
<div><p>array of shape [num_boxes, 4] containing <cite>num_boxes</cite> detection boxes
of the format [ymin, xmin, ymax, xmax] in absolute image coordinates.</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.DetectionResultFields.detection_scores: float32 numpy</dt><dd><p>array of shape [num_boxes] containing detection scores for the boxes.</p>
</dd>
<dt>standard_fields.DetectionResultFields.detection_classes: integer numpy</dt><dd><p>array of shape [num_boxes] containing 1-indexed detection classes for
the boxes.</p>
</dd>
<dt>standard_fields.DetectionResultFields.detection_masks: uint8 numpy array</dt><dd><p>of shape [num_boxes, height, width] containing <cite>num_boxes</cite> masks of
values ranging between 0 and 1.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If detection masks are not in detections dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.add_single_ground_truth_image_info">
<code class="sig-name descname">add_single_ground_truth_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">groundtruth_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.add_single_ground_truth_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds groundtruth for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>groundtruth_dict</strong> – <p>A dictionary containing -
standard_fields.InputDataFields.groundtruth_boxes: float32 numpy array</p>
<blockquote>
<div><p>of shape [num_boxes, 4] containing <cite>num_boxes</cite> groundtruth boxes of
the format [ymin, xmin, ymax, xmax] in absolute image coordinates.</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.InputDataFields.groundtruth_classes: integer numpy array</dt><dd><p>of shape [num_boxes] containing 1-indexed groundtruth classes for the
boxes.</p>
</dd>
<dt>standard_fields.InputDataFields.groundtruth_difficult: Optional length M</dt><dd><p>numpy boolean array denoting whether a ground truth box is a difficult
instance or not. This field is optional to support the case that no
boxes are difficult.</p>
</dd>
<dt>standard_fields.InputDataFields.groundtruth_instance_masks: Optional</dt><dd><p>numpy array of shape [num_boxes, height, width] with values in {0, 1}.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – On adding groundtruth for an image more than once. Will also
    raise error if instance masks are not in groundtruth dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the state to prepare for a fresh evaluation.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute evaluation result.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A dictionary of metrics with the following fields -</p>
<ol class="arabic simple">
<li><p>summary_metrics:</p></li>
</ol>
<blockquote>
<div><p>’&lt;prefix if not empty&gt;_Precision/mAP&#64;&lt;matching_iou_threshold&gt;IOU’: mean
average precision at the specified IOU threshold.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>per_category_ap: category specific results with keys of the form</p></li>
</ol>
<blockquote>
<div><p>’&lt;prefix if not empty&gt;_PerformanceByCategory/
mAP&#64;&lt;matching_iou_threshold&gt;IOU/category’.</p>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.get_estimator_eval_metric_ops">
<code class="sig-name descname">get_estimator_eval_metric_ops</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator.get_estimator_eval_metric_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dict of metrics to use with <cite>tf.estimator.EstimatorSpec</cite>.</p>
<p>Note that this must only be implemented if performing evaluation with a
<cite>tf.estimator.Estimator</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_dict</strong> – A dictionary that holds tensors for evaluating an object
detection model, returned from
eval_util.result_dict_for_single_example(). It must contain
standard_fields.InputDataFields.key.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of metric names to tuple of value_op and update_op that can
be used as eval metric ops in <cite>tf.estimator.EstimatorSpec</cite>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">OpenImagesChallengeEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">evaluate_masks=False</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">evaluate_corlocs=False</em>, <em class="sig-param">group_of_weight=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator</span></code></a></p>
<p>A class implements Open Images Challenge metrics.</p>
<p>Both Detection and Instance Segmentation evaluation metrics are implemented.</p>
<p>Open Images Challenge Detection metric has two major changes in comparison
with Open Images V2 detection metric:
- a custom weight might be specified for detecting an object contained in
a group-of box.
- verified image-level labels should be explicitelly provided for
evaluation: in case in image has neither positive nor negative image level
label of class c, all detections of this class on this image will be
ignored.</p>
<p>Open Images Challenge Instance Segmentation metric allows to measure per
formance of models in case of incomplete annotations: some instances are
annotations only on box level and some - on image-level. In addition,
image-level labels are taken into account as in detection metric.</p>
<p>Open Images Challenge Detection metric default parameters:
evaluate_masks = False
group_of_weight = 1.0</p>
<p>Open Images Challenge Instance Segmentation metric default parameters:
evaluate_masks = True
(group_of_weight will not matter)</p>
<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator.add_single_detected_image_info">
<code class="sig-name descname">add_single_detected_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">detections_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator.add_single_detected_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds detections for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>detections_dict</strong> – <p>A dictionary containing -
standard_fields.DetectionResultFields.detection_boxes: float32 numpy</p>
<blockquote>
<div><p>array of shape [num_boxes, 4] containing <cite>num_boxes</cite> detection boxes
of the format [ymin, xmin, ymax, xmax] in absolute image coordinates.</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.DetectionResultFields.detection_scores: float32 numpy</dt><dd><p>array of shape [num_boxes] containing detection scores for the boxes.</p>
</dd>
<dt>standard_fields.DetectionResultFields.detection_classes: integer numpy</dt><dd><p>array of shape [num_boxes] containing 1-indexed detection classes for
the boxes.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If detection masks are not in detections dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator.add_single_ground_truth_image_info">
<code class="sig-name descname">add_single_ground_truth_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">groundtruth_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator.add_single_ground_truth_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds groundtruth for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>groundtruth_dict</strong> – <p>A dictionary containing -
standard_fields.InputDataFields.groundtruth_boxes: float32 numpy array</p>
<blockquote>
<div><p>of shape [num_boxes, 4] containing <cite>num_boxes</cite> groundtruth boxes of
the format [ymin, xmin, ymax, xmax] in absolute image coordinates.</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.InputDataFields.groundtruth_classes: integer numpy array</dt><dd><p>of shape [num_boxes] containing 1-indexed groundtruth classes for the
boxes.</p>
</dd>
<dt>standard_fields.InputDataFields.groundtruth_image_classes: integer 1D</dt><dd><p>numpy array containing all classes for which labels are verified.</p>
</dd>
<dt>standard_fields.InputDataFields.groundtruth_group_of: Optional length M</dt><dd><p>numpy boolean array denoting whether a groundtruth box contains a
group of instances.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – On adding groundtruth for an image more than once.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears stored data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionChallengeEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">OpenImagesDetectionChallengeEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">evaluate_corlocs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionChallengeEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator" title="vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator</span></code></a></p>
<p>A class implements Open Images Detection Challenge metric.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">OpenImagesDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">evaluate_masks=False</em>, <em class="sig-param">evaluate_corlocs=False</em>, <em class="sig-param">metric_prefix='OpenImagesV2'</em>, <em class="sig-param">group_of_weight=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator</span></code></a></p>
<p>A class to evaluate detections using Open Images V2 metrics.</p>
<p>Open Images V2 introduce group_of type of bounding boxes and this metric
handles those boxes appropriately.</p>
<dl class="method">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator.add_single_ground_truth_image_info">
<code class="sig-name descname">add_single_ground_truth_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">groundtruth_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesDetectionEvaluator.add_single_ground_truth_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds groundtruth for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>groundtruth_dict</strong> – <p>A dictionary containing -
standard_fields.InputDataFields.groundtruth_boxes: float32 numpy array</p>
<blockquote>
<div><p>of shape [num_boxes, 4] containing <cite>num_boxes</cite> groundtruth boxes of
the format [ymin, xmin, ymax, xmax] in absolute image coordinates.</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.InputDataFields.groundtruth_classes: integer numpy array</dt><dd><p>of shape [num_boxes] containing 1-indexed groundtruth classes for the
boxes.</p>
</dd>
<dt>standard_fields.InputDataFields.groundtruth_group_of: Optional length M</dt><dd><p>numpy boolean array denoting whether a groundtruth box contains a
group of instances.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – On adding groundtruth for an image more than once.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.OpenImagesInstanceSegmentationChallengeEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">OpenImagesInstanceSegmentationChallengeEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">evaluate_corlocs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesInstanceSegmentationChallengeEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator" title="vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.OpenImagesChallengeEvaluator</span></code></a></p>
<p>A class implements Open Images Instance Segmentation Challenge metric.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.PascalDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">PascalDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.PascalDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator</span></code></a></p>
<p>A class to evaluate detections using PASCAL metrics.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.PascalInstanceSegmentationEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">PascalInstanceSegmentationEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.PascalInstanceSegmentationEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator</span></code></a></p>
<p>A class to evaluate instance masks using PASCAL metrics.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.PrecisionAtRecallDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">PrecisionAtRecallDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">recall_lower_bound=0.0</em>, <em class="sig-param">recall_upper_bound=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.PrecisionAtRecallDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator</span></code></a></p>
<p>A class to evaluate detections using <a class="reference external" href="mailto:precision&#37;&#52;&#48;recall">precision<span>&#64;</span>recall</a> metrics.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.WeightedPascalDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">WeightedPascalDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.WeightedPascalDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator</span></code></a></p>
<p>A class to evaluate detections using weighted PASCAL metrics.</p>
<p>Weighted PASCAL metrics computes the mean average precision as the average
precision given the scores and tp_fp_labels of all classes. In comparison,
PASCAL metrics computes the mean average precision as the mean of the
per-class average precisions.</p>
<p>This definition is very similar to the mean of the per-class average
precisions weighted by class frequency. However, they are typically not the
same as the average precision is not a linear function of the scores and
tp_fp_labels.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.object_detection_evaluation.WeightedPascalInstanceSegmentationEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.object_detection_evaluation.</code><code class="sig-name descname">WeightedPascalInstanceSegmentationEvaluator</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.object_detection_evaluation.WeightedPascalInstanceSegmentationEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator" title="vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.object_detection_evaluation.ObjectDetectionEvaluator</span></code></a></p>
<p>A class to evaluate instance masks using weighted PASCAL metrics.</p>
<p>Weighted PASCAL metrics computes the mean average precision as the average
precision given the scores and tp_fp_labels of all classes. In comparison,
PASCAL metrics computes the mean average precision as the mean of the
per-class average precisions.</p>
<p>This definition is very similar to the mean of the per-class average
precisions weighted by class frequency. However, they are typically not the
same as the average precision is not a linear function of the scores and
tp_fp_labels.</p>
</dd></dl>

</div>
<div class="section" id="vlearn-roa-utils-object-detection-evaluation-test-module">
<h2>vlearn.roa.utils.object_detection_evaluation_test module<a class="headerlink" href="#vlearn-roa-utils-object-detection-evaluation-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.ops">
<span id="vlearn-roa-utils-ops-module"></span><h2>vlearn.roa.utils.ops module<a class="headerlink" href="#module-vlearn.roa.utils.ops" title="Permalink to this headline">¶</a></h2>
<p>A module for helper tensorflow ops.</p>
<dl class="class">
<dt id="vlearn.roa.utils.ops.EqualizationLossConfig">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">EqualizationLossConfig</code><span class="sig-paren">(</span><em class="sig-param">weight</em>, <em class="sig-param">exclude_prefixes</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.EqualizationLossConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.ops.EqualizationLossConfig.exclude_prefixes">
<em class="property">property </em><code class="sig-name descname">exclude_prefixes</code><a class="headerlink" href="#vlearn.roa.utils.ops.EqualizationLossConfig.exclude_prefixes" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.ops.EqualizationLossConfig.weight">
<em class="property">property </em><code class="sig-name descname">weight</code><a class="headerlink" href="#vlearn.roa.utils.ops.EqualizationLossConfig.weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.batch_position_sensitive_crop_regions">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">batch_position_sensitive_crop_regions</code><span class="sig-paren">(</span><em class="sig-param">images</em>, <em class="sig-param">boxes</em>, <em class="sig-param">crop_size</em>, <em class="sig-param">num_spatial_bins</em>, <em class="sig-param">global_pool</em>, <em class="sig-param">parallel_iterations=64</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.batch_position_sensitive_crop_regions" title="Permalink to this definition">¶</a></dt>
<dd><p>Position sensitive crop with batches of images and boxes.</p>
<p>This op is exactly like <cite>position_sensitive_crop_regions</cite> below but operates
on batches of images and boxes. See <cite>position_sensitive_crop_regions</cite> function
below for the operation applied per batch element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> – A <cite>Tensor</cite>. Must be one of the following types: <cite>uint8</cite>, <cite>int8</cite>,
<cite>int16</cite>, <cite>int32</cite>, <cite>int64</cite>, <cite>half</cite>, <cite>float32</cite>, <cite>float64</cite>.
A 4-D tensor of shape <cite>[batch, image_height, image_width, depth]</cite>.
Both <cite>image_height</cite> and <cite>image_width</cite> need to be positive.</p></li>
<li><p><strong>boxes</strong> – A <cite>Tensor</cite> of type <cite>float32</cite>.
A 3-D tensor of shape <cite>[batch, num_boxes, 4]</cite>. Each box is specified in
normalized coordinates <cite>[y1, x1, y2, x2]</cite>. A normalized coordinate value
of <cite>y</cite> is mapped to the image coordinate at <cite>y * (image_height - 1)</cite>, so
as the <cite>[0, 1]</cite> interval of normalized image height is mapped to
<a href="#id7"><span class="problematic" id="id8">`</span></a>[0, image_height - 1] in image height coordinates. We do allow y1 &gt; y2,
in which case the sampled crop is an up-down flipped version of the
original image. The width dimension is treated similarly.</p></li>
<li><p><strong>crop_size</strong> – See <cite>position_sensitive_crop_regions</cite> below.</p></li>
<li><p><strong>num_spatial_bins</strong> – See <cite>position_sensitive_crop_regions</cite> below.</p></li>
<li><p><strong>global_pool</strong> – See <cite>position_sensitive_crop_regions</cite> below.</p></li>
<li><p><strong>parallel_iterations</strong> – Number of batch items to process in parallel.</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.bfloat16_to_float32_nested">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">bfloat16_to_float32_nested</code><span class="sig-paren">(</span><em class="sig-param">tensor_nested</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.bfloat16_to_float32_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert float32 tensors in a nested structure to bfloat16.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_nested</strong> – A Python dict, values being Tensor or Python list/tuple of
Tensor.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Python dict with the same structure as <cite>tensor_dict</cite>,
with all bfloat16 tensors converted to float32.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.dense_to_sparse_boxes">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">dense_to_sparse_boxes</code><span class="sig-paren">(</span><em class="sig-param">dense_locations</em>, <em class="sig-param">dense_num_boxes</em>, <em class="sig-param">num_classes</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.dense_to_sparse_boxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts bounding boxes from dense to sparse form.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dense_locations</strong> – a [max_num_boxes, 4] tensor in which only the first k rows
are valid bounding box location coordinates, where k is the sum of
elements in dense_num_boxes.</p></li>
<li><p><strong>dense_num_boxes</strong> – a [max_num_classes] tensor indicating the counts of
various bounding box classes e.g. [1, 0, 0, 2] means that the first
bounding box is of class 0 and the second and third bounding boxes are
of class 3. The sum of elements in this tensor is the number of valid
bounding boxes.</p></li>
<li><p><strong>num_classes</strong> – number of classes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a [num_boxes, 4] tensor containing only valid bounding</dt><dd><p>boxes (i.e. the first num_boxes rows of dense_locations)</p>
</dd>
<dt>box_classes: a [num_boxes] tensor containing the classes of each bounding</dt><dd><p>box (e.g. dense_num_boxes = [1, 0, 0, 2] =&gt; box_classes = [0, 3, 3]</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>box_locations</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.expanded_shape">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">expanded_shape</code><span class="sig-paren">(</span><em class="sig-param">orig_shape</em>, <em class="sig-param">start_dim</em>, <em class="sig-param">num_dims</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.expanded_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts multiple ones into a shape vector.</p>
<p>Inserts an all-1 vector of length num_dims at position start_dim into a shape.
Can be combined with tf.reshape to generalize tf.expand_dims.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orig_shape</strong> – the shape into which the all-1 vector is added (int32 vector)</p></li>
<li><p><strong>start_dim</strong> – insertion position (int scalar)</p></li>
<li><p><strong>num_dims</strong> – length of the inserted all-1 vector (int scalar)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An int32 vector of length tf.size(orig_shape) + num_dims.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.filter_groundtruth_with_crowd_boxes">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">filter_groundtruth_with_crowd_boxes</code><span class="sig-paren">(</span><em class="sig-param">tensor_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.filter_groundtruth_with_crowd_boxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out groundtruth with boxes corresponding to crowd.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_dict</strong> – a dictionary of following groundtruth tensors -
fields.InputDataFields.groundtruth_boxes
fields.InputDataFields.groundtruth_classes
fields.InputDataFields.groundtruth_confidences
fields.InputDataFields.groundtruth_keypoints
fields.InputDataFields.groundtruth_instance_masks
fields.InputDataFields.groundtruth_is_crowd
fields.InputDataFields.groundtruth_area
fields.InputDataFields.groundtruth_label_types</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary of tensors containing only the groundtruth that have bounding
boxes.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.filter_groundtruth_with_nan_box_coordinates">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">filter_groundtruth_with_nan_box_coordinates</code><span class="sig-paren">(</span><em class="sig-param">tensor_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.filter_groundtruth_with_nan_box_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out groundtruth with no bounding boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_dict</strong> – a dictionary of following groundtruth tensors -
fields.InputDataFields.groundtruth_boxes
fields.InputDataFields.groundtruth_classes
fields.InputDataFields.groundtruth_confidences
fields.InputDataFields.groundtruth_keypoints
fields.InputDataFields.groundtruth_instance_masks
fields.InputDataFields.groundtruth_is_crowd
fields.InputDataFields.groundtruth_area
fields.InputDataFields.groundtruth_label_types</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary of tensors containing only the groundtruth that have bounding
boxes.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.filter_unrecognized_classes">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">filter_unrecognized_classes</code><span class="sig-paren">(</span><em class="sig-param">tensor_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.filter_unrecognized_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out class labels that are not unrecognized by the labelmap.</p>
<p>Decoder would parse unrecognized classes (not included in the labelmap) to
a label of value -1. Such targets are unecessary for training, and causes
issue for evaluation, due to labeling mapping logic. This function filters
those labels out for both training and evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_dict</strong> – dictionary containing input tensors keyed by
fields.InputDataFields.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary keyed by fields.InputDataFields containing the tensors
obtained after applying the filtering.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If groundtruth_classes tensor is not in tensor_dict.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.fixed_padding">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">fixed_padding</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">kernel_size</em>, <em class="sig-param">rate=1</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.fixed_padding" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads the input along the spatial dimensions independently of input size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – A tensor of size [batch, height_in, width_in, channels].</p></li>
<li><p><strong>kernel_size</strong> – The kernel to be used in the conv2d or max_pool2d operation.
Should be a positive integer.</p></li>
<li><p><strong>rate</strong> – An integer, rate for atrous convolution.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tensor of size [batch, height_out, width_out, channels] with the</dt><dd><p>input, either intact (if kernel_size == 1) or padded (if kernel_size &gt; 1).</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>output</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.fpn_feature_levels">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">fpn_feature_levels</code><span class="sig-paren">(</span><em class="sig-param">num_levels</em>, <em class="sig-param">unit_scale_index</em>, <em class="sig-param">image_ratio</em>, <em class="sig-param">boxes</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.fpn_feature_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns fpn feature level for each box based on its area.</p>
<p>See section 4.2 of <a class="reference external" href="https://arxiv.org/pdf/1612.03144.pdf">https://arxiv.org/pdf/1612.03144.pdf</a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_levels</strong> – An integer indicating the number of feature levels to crop boxes
from.</p></li>
<li><p><strong>unit_scale_index</strong> – An 0-based integer indicating the index of feature map
which most closely matches the resolution of the pretrained model.</p></li>
<li><p><strong>image_ratio</strong> – A float indicating the ratio of input image area to pretraining
image area.</p></li>
<li><p><strong>boxes</strong> – A float tensor of shape [batch, num_boxes, 4] containing boxes of the
form [ymin, xmin, ymax, xmax] in normalized coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An int32 tensor of shape [batch_size, num_boxes] containing feature indices.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.gather_with_padding_values">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">gather_with_padding_values</code><span class="sig-paren">(</span><em class="sig-param">input_tensor</em>, <em class="sig-param">indices</em>, <em class="sig-param">padding_value</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.gather_with_padding_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Gathers elements from tensor and pads <cite>padding_value</cite> for ignore indices.</p>
<p>Gathers elements from <cite>input_tensor</cite> based on <cite>indices</cite>. If there are ignore
indices (which are “-1”s) in <cite>indices</cite>, <cite>padding_value</cite> will be gathered for
those positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_tensor</strong> – A N-D tensor of shape [M, d_1, d_2 .. d_(N-1)] to gather
values from.</p></li>
<li><p><strong>indices</strong> – A 1-D tensor in which each element is either an index in the
first dimension of input_tensor or -1.</p></li>
<li><p><strong>padding_value</strong> – A (N-1)-D tensor of shape [d_1, d_2 .. d_(N-1)] which will be
used as gathered value for each ignore index in <cite>indices</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tensor of shape [L, d_1, d_2 .. d_(N-1)] containing</dt><dd><p>values gathered from input_tensor. The first dimension L is equal to the
length of <cite>indices</cite>.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>gathered_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.indices_to_dense_vector">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">indices_to_dense_vector</code><span class="sig-paren">(</span><em class="sig-param">indices</em>, <em class="sig-param">size</em>, <em class="sig-param">indices_value=1.0</em>, <em class="sig-param">default_value=0</em>, <em class="sig-param">dtype=tf.float32</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.indices_to_dense_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates dense vector with indices set to specific value and rest to zeros.</p>
<dl class="simple">
<dt>This function exists because it is unclear if it is safe to use</dt><dd><p>tf.sparse_to_dense(indices, [size], 1, validate_indices=False)</p>
</dd>
</dl>
<p>with indices which are not ordered.
This function accepts a dynamic size (e.g. tf.shape(tensor)[0])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> – 1d Tensor with integer indices which are to be set to
indices_values.</p></li>
<li><p><strong>size</strong> – scalar with size (integer) of output Tensor.</p></li>
<li><p><strong>indices_value</strong> – values of elements specified by indices in the output vector</p></li>
<li><p><strong>default_value</strong> – values of other elements in the output vector.</p></li>
<li><p><strong>dtype</strong> – data type.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>dense 1D Tensor of shape [size] with indices set to indices_values and the</dt><dd><p>rest set to default_value.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.matmul_gather_on_zeroth_axis">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">matmul_gather_on_zeroth_axis</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">indices</em>, <em class="sig-param">scope=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.matmul_gather_on_zeroth_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Matrix multiplication based implementation of tf.gather on zeroth axis.</p>
<p>TODO(rathodv, jonathanhuang): enable sparse matmul option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – A float32 Tensor. The tensor from which to gather values.
Must be at least rank 1.</p></li>
<li><p><strong>indices</strong> – A Tensor. Must be one of the following types: int32, int64.
Must be in range [0, params.shape[0])</p></li>
<li><p><strong>scope</strong> – A name for the operation (optional).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Tensor. Has the same type as params. Values from params gathered
from indices given by indices, with shape indices.shape + params.shape[1:].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.merge_boxes_with_multiple_labels">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">merge_boxes_with_multiple_labels</code><span class="sig-paren">(</span><em class="sig-param">boxes</em>, <em class="sig-param">classes</em>, <em class="sig-param">confidences</em>, <em class="sig-param">num_classes</em>, <em class="sig-param">quantization_bins=10000</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.merge_boxes_with_multiple_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges boxes with same coordinates and returns K-hot encoded classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> – A tf.float32 tensor with shape [N, 4] holding N boxes. Only
normalized coordinates are allowed.</p></li>
<li><p><strong>classes</strong> – A tf.int32 tensor with shape [N] holding class indices.
The class index starts at 0.</p></li>
<li><p><strong>confidences</strong> – A tf.float32 tensor with shape [N] holding class confidences.</p></li>
<li><p><strong>num_classes</strong> – total number of classes to use for K-hot encoding.</p></li>
<li><p><strong>quantization_bins</strong> – the number of bins used to quantize the box coordinate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tf.float32 tensor with shape [N’, 4] holding boxes,</dt><dd><p>where N’ &lt;= N.</p>
</dd>
<dt>class_encodings: A tf.int32 tensor with shape [N’, num_classes] holding</dt><dd><p>K-hot encodings for the merged boxes.</p>
</dd>
<dt>confidence_encodings: A tf.float32 tensor with shape [N’, num_classes]</dt><dd><p>holding encodings of confidences for the merged boxes.</p>
</dd>
<dt>merged_box_indices: A tf.int32 tensor with shape [N’] holding original</dt><dd><p>indices of the boxes.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>merged_boxes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.meshgrid">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">meshgrid</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.meshgrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Tiles the contents of x and y into a pair of grids.</p>
<p>Multidimensional analog of numpy.meshgrid, giving the same behavior if x and y
are vectors. Generally, this will give:</p>
<p>xgrid(i1, …, i_m, j_1, …, j_n) = x(j_1, …, j_n)
ygrid(i1, …, i_m, j_1, …, j_n) = y(i_1, …, i_m)</p>
<p>Keep in mind that the order of the arguments and outputs is reverse relative
to the order of the indices they go into, done for compatibility with numpy.
The output tensors have the same shapes.  Specifically:</p>
<p>xgrid.get_shape() = y.get_shape().concatenate(x.get_shape())
ygrid.get_shape() = y.get_shape().concatenate(x.get_shape())</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – A tensor of arbitrary shape and rank. xgrid will contain these values
varying in its last dimensions.</p></li>
<li><p><strong>y</strong> – A tensor of arbitrary shape and rank. ygrid will contain these values
varying in its first dimensions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of tensors (xgrid, ygrid).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.nearest_neighbor_upsampling">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">nearest_neighbor_upsampling</code><span class="sig-paren">(</span><em class="sig-param">input_tensor</em>, <em class="sig-param">scale=None</em>, <em class="sig-param">height_scale=None</em>, <em class="sig-param">width_scale=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.nearest_neighbor_upsampling" title="Permalink to this definition">¶</a></dt>
<dd><p>Nearest neighbor upsampling implementation.</p>
<p>Nearest neighbor upsampling function that maps input tensor with shape
[batch_size, height, width, channels] to [batch_size, height * scale
, width * scale, channels]. This implementation only uses reshape and
broadcasting to make it TPU compatible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_tensor</strong> – A float32 tensor of size [batch, height_in, width_in,
channels].</p></li>
<li><p><strong>scale</strong> – An integer multiple to scale resolution of input data in both height
and width dimensions.</p></li>
<li><p><strong>height_scale</strong> – An integer multiple to scale the height of input image. This
option when provided overrides <cite>scale</cite> option.</p></li>
<li><p><strong>width_scale</strong> – An integer multiple to scale the width of input image. This
option when provided overrides <cite>scale</cite> option.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A float32 tensor of size</dt><dd><p>[batch, height_in*scale, width_in*scale, channels].</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>data_up</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If both scale and height_scale or if both scale and width_scale
    are None.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.normalize_to_target">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">normalize_to_target</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">target_norm_value</em>, <em class="sig-param">dim</em>, <em class="sig-param">epsilon=1e-07</em>, <em class="sig-param">trainable=True</em>, <em class="sig-param">scope='NormalizeToTarget'</em>, <em class="sig-param">summarize=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.normalize_to_target" title="Permalink to this definition">¶</a></dt>
<dd><p>L2 normalizes the inputs across the specified dimension to a target norm.</p>
<p>This op implements the L2 Normalization layer introduced in
Liu, Wei, et al. “SSD: Single Shot MultiBox Detector.”
and Liu, Wei, Andrew Rabinovich, and Alexander C. Berg.
“Parsenet: Looking wider to see better.” and is useful for bringing
activations from multiple layers in a convnet to a standard scale.</p>
<p>Note that the rank of <cite>inputs</cite> must be known and the dimension to which
normalization is to be applied should be statically defined.</p>
<p>TODO(jonathanhuang): Add option to scale by L2 norm of the entire input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – A <cite>Tensor</cite> of arbitrary size.</p></li>
<li><p><strong>target_norm_value</strong> – A float value that specifies an initial target norm or
a list of floats (whose length must be equal to the depth along the
dimension to be normalized) specifying a per-dimension multiplier
after normalization.</p></li>
<li><p><strong>dim</strong> – The dimension along which the input is normalized.</p></li>
<li><p><strong>epsilon</strong> – A small value to add to the inputs to avoid dividing by zero.</p></li>
<li><p><strong>trainable</strong> – Whether the norm is trainable or not</p></li>
<li><p><strong>scope</strong> – Optional scope for variable_scope.</p></li>
<li><p><strong>summarize</strong> – Whether or not to add a tensorflow summary for the op.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input tensor normalized to the specified target norm.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If dim is smaller than the number of dimensions in ‘inputs’.</p></li>
<li><p><strong>ValueError</strong> – If target_norm_value is not a float or a list of floats with
    length equal to the depth along the dimension to be normalized.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.normalized_to_image_coordinates">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">normalized_to_image_coordinates</code><span class="sig-paren">(</span><em class="sig-param">normalized_boxes</em>, <em class="sig-param">image_shape</em>, <em class="sig-param">parallel_iterations=32</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.normalized_to_image_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a batch of boxes from normal to image coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalized_boxes</strong> – a tensor of shape [None, num_boxes, 4] in
normalized coordinates. The dtype of this tensor must support tf.mul.</p></li>
<li><p><strong>image_shape</strong> – a tensor of shape [4] containing the image shape, with same
dtype as <cite>normalized_boxes</cite>.</p></li>
<li><p><strong>parallel_iterations</strong> – parallelism for the map_fn op.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a tensor of shape [None, num_boxes, 4] containing</dt><dd><p>the boxes in image coordinates, with same
dtype as <cite>normalized_boxes</cite>.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>absolute_boxes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.pad_to_multiple">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">pad_to_multiple</code><span class="sig-paren">(</span><em class="sig-param">tensor</em>, <em class="sig-param">multiple</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.pad_to_multiple" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the tensor zero padded to the specified multiple.</p>
<p>Appends 0s to the end of the first and second dimension (height and width) of
the tensor until both dimensions are a multiple of the input argument
‘multiple’. E.g. given an input tensor of shape [1, 3, 5, 1] and an input
multiple of 4, PadToMultiple will append 0s so that the resulting tensor will
be of shape [1, 4, 8, 1].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> – rank 4 float32 tensor, where
tensor -&gt; [batch_size, height, width, channels].</p></li>
<li><p><strong>multiple</strong> – the multiple to pad to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the tensor zero padded to the specified multiple.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>padded_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.padded_one_hot_encoding">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">padded_one_hot_encoding</code><span class="sig-paren">(</span><em class="sig-param">indices</em>, <em class="sig-param">depth</em>, <em class="sig-param">left_pad</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.padded_one_hot_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a zero padded one-hot tensor.</p>
<p>This function converts a sparse representation of indices (e.g., [4]) to a
zero padded one-hot representation (e.g., [0, 0, 0, 0, 1] with depth = 4 and
left_pad = 1). If <cite>indices</cite> is empty, the result will simply be a tensor of
shape (0, depth + left_pad). If depth = 0, then this function just returns
<cite>None</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> – an integer tensor of shape [num_indices].</p></li>
<li><p><strong>depth</strong> – depth for the one-hot tensor (integer).</p></li>
<li><p><strong>left_pad</strong> – number of zeros to left pad the one-hot tensor with (integer).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a tensor with shape (num_indices, depth + left_pad). Returns</dt><dd><p><cite>None</cite> if the depth is zero.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>padded_onehot</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if <cite>indices</cite> does not have rank 1 or if <cite>left_pad</cite> or <a href="#id9"><span class="problematic" id="id10">`</span></a>depth are
    either negative or non-integers.</p>
</dd>
</dl>
<p>TODO(rathodv): add runtime checks for depth and indices.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.position_sensitive_crop_regions">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">position_sensitive_crop_regions</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">boxes</em>, <em class="sig-param">crop_size</em>, <em class="sig-param">num_spatial_bins</em>, <em class="sig-param">global_pool</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.position_sensitive_crop_regions" title="Permalink to this definition">¶</a></dt>
<dd><p>Position-sensitive crop and pool rectangular regions from a feature grid.</p>
<p>The output crops are split into <cite>spatial_bins_y</cite> vertical bins
and <cite>spatial_bins_x</cite> horizontal bins. For each intersection of a vertical
and a horizontal bin the output values are gathered by performing
<cite>tf.image.crop_and_resize</cite> (bilinear resampling) on a a separate subset of
channels of the image. This reduces <cite>depth</cite> by a factor of
<cite>(spatial_bins_y * spatial_bins_x)</cite>.</p>
<p>When global_pool is True, this function implements a differentiable version
of position-sensitive RoI pooling used in
[R-FCN detection system](<a class="reference external" href="https://arxiv.org/abs/1605.06409">https://arxiv.org/abs/1605.06409</a>).</p>
<p>When global_pool is False, this function implements a differentiable version
of position-sensitive assembling operation used in
[instance FCN](<a class="reference external" href="https://arxiv.org/abs/1603.08678">https://arxiv.org/abs/1603.08678</a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – A <cite>Tensor</cite>. Must be one of the following types: <cite>uint8</cite>, <cite>int8</cite>,
<cite>int16</cite>, <cite>int32</cite>, <cite>int64</cite>, <cite>half</cite>, <cite>float32</cite>, <cite>float64</cite>.
A 3-D tensor of shape <cite>[image_height, image_width, depth]</cite>.
Both <cite>image_height</cite> and <cite>image_width</cite> need to be positive.</p></li>
<li><p><strong>boxes</strong> – A <cite>Tensor</cite> of type <cite>float32</cite>.
A 2-D tensor of shape <cite>[num_boxes, 4]</cite>. Each box is specified in
normalized coordinates <cite>[y1, x1, y2, x2]</cite>. A normalized coordinate value
of <cite>y</cite> is mapped to the image coordinate at <cite>y * (image_height - 1)</cite>, so
as the <cite>[0, 1]</cite> interval of normalized image height is mapped to
<a href="#id11"><span class="problematic" id="id12">`</span></a>[0, image_height - 1] in image height coordinates. We do allow y1 &gt; y2,
in which case the sampled crop is an up-down flipped version of the
original image. The width dimension is treated similarly.</p></li>
<li><p><strong>crop_size</strong> – A list of two integers <cite>[crop_height, crop_width]</cite>. All
cropped image patches are resized to this size. The aspect ratio of the
image content is not preserved. Both <cite>crop_height</cite> and <cite>crop_width</cite> need
to be positive.</p></li>
<li><p><strong>num_spatial_bins</strong> – A list of two integers <cite>[spatial_bins_y, spatial_bins_x]</cite>.
Represents the number of position-sensitive bins in y and x directions.
Both values should be &gt;= 1. <cite>crop_height</cite> should be divisible by
<cite>spatial_bins_y</cite>, and similarly for width.
The number of image channels should be divisible by
(spatial_bins_y * spatial_bins_x).
Suggested value from R-FCN paper: [3, 3].</p></li>
<li><p><strong>global_pool</strong> – <p>A boolean variable.
If True, we perform average global pooling on the features assembled from</p>
<blockquote>
<div><p>the position-sensitive score maps.</p>
</div></blockquote>
<dl class="simple">
<dt>If False, we keep the position-pooled features without global pooling</dt><dd><p>over the spatial coordinates.</p>
</dd>
<dt>Note that using global_pool=True is equivalent to but more efficient than</dt><dd><p>running the function with global_pool=False and then performing global
average pooling.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A 4-D tensor of shape</dt><dd><p><cite>[num_boxes, K, K, crop_channels]</cite>,
where <cite>crop_channels = depth / (spatial_bins_y * spatial_bins_x)</cite>,
where K = 1 when global_pool is True (Average-pooled cropped regions),
and K = crop_size when global_pool is False.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>position_sensitive_features</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – Raised in four situations:
    <cite>num_spatial_bins</cite> is not &gt;= 1;
    <cite>num_spatial_bins</cite> does not divide <cite>crop_size</cite>;
    <cite>(spatial_bins_y*spatial_bins_x)</cite> does not divide <cite>depth</cite>;
    <cite>bin_crop_size</cite> is not square when global_pool=False due to the
      constraint in function space_to_depth.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.reduce_sum_trailing_dimensions">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">reduce_sum_trailing_dimensions</code><span class="sig-paren">(</span><em class="sig-param">tensor</em>, <em class="sig-param">ndims</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.reduce_sum_trailing_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes sum across all dimensions following first <cite>ndims</cite> dimensions.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.reframe_box_masks_to_image_masks">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">reframe_box_masks_to_image_masks</code><span class="sig-paren">(</span><em class="sig-param">box_masks</em>, <em class="sig-param">boxes</em>, <em class="sig-param">image_height</em>, <em class="sig-param">image_width</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.reframe_box_masks_to_image_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the box masks back to full image masks.</p>
<p>Embeds masks in bounding boxes of larger masks whose shapes correspond to
image shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_masks</strong> – A tf.float32 tensor of size [num_masks, mask_height, mask_width].</p></li>
<li><p><strong>boxes</strong> – A tf.float32 tensor of size [num_masks, 4] containing the box
corners. Row i contains [ymin, xmin, ymax, xmax] of the box
corresponding to mask i. Note that the box corners are in
normalized coordinates.</p></li>
<li><p><strong>image_height</strong> – Image height. The output mask will have the same height as
the image height.</p></li>
<li><p><strong>image_width</strong> – Image width. The output mask will have the same width as the
image width.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tf.float32 tensor of size [num_masks, image_height, image_width].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.replace_nan_groundtruth_label_scores_with_ones">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">replace_nan_groundtruth_label_scores_with_ones</code><span class="sig-paren">(</span><em class="sig-param">label_scores</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.replace_nan_groundtruth_label_scores_with_ones" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces nan label scores with 1.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>label_scores</strong> – a tensor containing object annoation label scores.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tensor where NaN label scores have been replaced by ones.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.retain_groundtruth">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">retain_groundtruth</code><span class="sig-paren">(</span><em class="sig-param">tensor_dict</em>, <em class="sig-param">valid_indices</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.retain_groundtruth" title="Permalink to this definition">¶</a></dt>
<dd><p>Retains groundtruth by valid indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor_dict</strong> – a dictionary of following groundtruth tensors -
fields.InputDataFields.groundtruth_boxes
fields.InputDataFields.groundtruth_classes
fields.InputDataFields.groundtruth_confidences
fields.InputDataFields.groundtruth_keypoints
fields.InputDataFields.groundtruth_instance_masks
fields.InputDataFields.groundtruth_is_crowd
fields.InputDataFields.groundtruth_area
fields.InputDataFields.groundtruth_label_types
fields.InputDataFields.groundtruth_difficult</p></li>
<li><p><strong>valid_indices</strong> – a tensor with valid indices for the box-level groundtruth.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary of tensors containing only the groundtruth for valid_indices.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If the shape of valid_indices is invalid.</p></li>
<li><p><strong>ValueError</strong> – field fields.InputDataFields.groundtruth_boxes is
    not present in tensor_dict.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.ops.retain_groundtruth_with_positive_classes">
<code class="sig-prename descclassname">vlearn.roa.utils.ops.</code><code class="sig-name descname">retain_groundtruth_with_positive_classes</code><span class="sig-paren">(</span><em class="sig-param">tensor_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.ops.retain_groundtruth_with_positive_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Retains only groundtruth with positive class ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_dict</strong> – a dictionary of following groundtruth tensors -
fields.InputDataFields.groundtruth_boxes
fields.InputDataFields.groundtruth_classes
fields.InputDataFields.groundtruth_confidences
fields.InputDataFields.groundtruth_keypoints
fields.InputDataFields.groundtruth_instance_masks
fields.InputDataFields.groundtruth_is_crowd
fields.InputDataFields.groundtruth_area
fields.InputDataFields.groundtruth_label_types
fields.InputDataFields.groundtruth_difficult</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary of tensors containing only the groundtruth with positive
classes.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If groundtruth_classes tensor is not in tensor_dict.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="vlearn-roa-utils-ops-test-module">
<h2>vlearn.roa.utils.ops_test module<a class="headerlink" href="#vlearn-roa-utils-ops-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.per_image_evaluation">
<span id="vlearn-roa-utils-per-image-evaluation-module"></span><h2>vlearn.roa.utils.per_image_evaluation module<a class="headerlink" href="#module-vlearn.roa.utils.per_image_evaluation" title="Permalink to this headline">¶</a></h2>
<p>Evaluate Object Detection result on a single image.</p>
<p>Annotate each detected result as true positives or false positive according to
a predefined IOU ratio. Non Maximum Supression is used by default. Multi class
detection is supported by default.
Based on the settings, per image evaluation is either performed on boxes or
on object masks.</p>
<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation.PerImageEvaluation">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation.</code><code class="sig-name descname">PerImageEvaluation</code><span class="sig-paren">(</span><em class="sig-param">num_groundtruth_classes</em>, <em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">nms_iou_threshold=0.3</em>, <em class="sig-param">nms_max_output_boxes=50</em>, <em class="sig-param">group_of_weight=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation.PerImageEvaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Evaluate detection result of a single image.</p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation.PerImageEvaluation.compute_object_detection_metrics">
<code class="sig-name descname">compute_object_detection_metrics</code><span class="sig-paren">(</span><em class="sig-param">detected_boxes</em>, <em class="sig-param">detected_scores</em>, <em class="sig-param">detected_class_labels</em>, <em class="sig-param">groundtruth_boxes</em>, <em class="sig-param">groundtruth_class_labels</em>, <em class="sig-param">groundtruth_is_difficult_list</em>, <em class="sig-param">groundtruth_is_group_of_list</em>, <em class="sig-param">detected_masks=None</em>, <em class="sig-param">groundtruth_masks=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation.PerImageEvaluation.compute_object_detection_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates detections as being tp, fp or weighted from a single image.</p>
<dl class="simple">
<dt>The evaluation is done in two stages:</dt><dd><ol class="arabic simple">
<li><p>All detections are matched to non group-of boxes; true positives are
determined and detections matched to difficult boxes are ignored.</p></li>
<li><p>Detections that are determined as false positives are matched against
group-of boxes and weighted if matched.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>detected_boxes</strong> – A float numpy array of shape [N, 4], representing N
regions of detected object regions. Each row is of the format [y_min,
x_min, y_max, x_max]</p></li>
<li><p><strong>detected_scores</strong> – A float numpy array of shape [N, 1], representing the
confidence scores of the detected N object instances.</p></li>
<li><p><strong>detected_class_labels</strong> – A integer numpy array of shape [N, 1], repreneting
the class labels of the detected N object instances.</p></li>
<li><p><strong>groundtruth_boxes</strong> – A float numpy array of shape [M, 4], representing M
regions of object instances in ground truth</p></li>
<li><p><strong>groundtruth_class_labels</strong> – An integer numpy array of shape [M, 1],
representing M class labels of object instances in ground truth</p></li>
<li><p><strong>groundtruth_is_difficult_list</strong> – A boolean numpy array of length M denoting
whether a ground truth box is a difficult instance or not</p></li>
<li><p><strong>groundtruth_is_group_of_list</strong> – A boolean numpy array of length M denoting
whether a ground truth box has group-of tag</p></li>
<li><p><strong>detected_masks</strong> – (optional) A uint8 numpy array of shape [N, height,
width]. If not None, the metrics will be computed based on masks.</p></li>
<li><p><strong>groundtruth_masks</strong> – (optional) A uint8 numpy array of shape [M, height,
width]. Can have empty masks, i.e. where all values are 0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of C float numpy arrays. Each numpy array is of</dt><dd><p>shape [K, 1], representing K scores detected with object class
label c</p>
</dd>
<dt>tp_fp_labels: A list of C boolean numpy arrays. Each numpy array</dt><dd><p>is of shape [K, 1], representing K True/False positive label of
object instances detected with class label c</p>
</dd>
<dt>is_class_correctly_detected_in_image: a numpy integer array of</dt><dd><p>shape [C, 1], indicating whether the correponding class has a least
one instance being correctly detected in the image</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>scores</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.per_image_evaluation_test">
<span id="vlearn-roa-utils-per-image-evaluation-test-module"></span><h2>vlearn.roa.utils.per_image_evaluation_test module<a class="headerlink" href="#module-vlearn.roa.utils.per_image_evaluation_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.per_image_evaluation.</p>
<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.CorLocTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">CorLocTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.CorLocTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.CorLocTest.test_compute_corloc_with_normal_iou_threshold">
<code class="sig-name descname">test_compute_corloc_with_normal_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.CorLocTest.test_compute_corloc_with_normal_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.CorLocTest.test_compute_corloc_with_very_large_iou_threshold">
<code class="sig-name descname">test_compute_corloc_with_very_large_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.CorLocTest.test_compute_corloc_with_very_large_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.MultiClassesTpFpTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">MultiClassesTpFpTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.MultiClassesTpFpTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.MultiClassesTpFpTest.test_tp_fp">
<code class="sig-name descname">test_tp_fp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.MultiClassesTpFpTest.test_tp_fp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">SingleClassTpFpEmptyMaskAndBoxesTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_mask_one_tp_one_fp">
<code class="sig-name descname">test_mask_one_tp_one_fp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_mask_one_tp_one_fp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_mask_tp_and_ignore">
<code class="sig-name descname">test_mask_tp_and_ignore</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_mask_tp_and_ignore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_two_mask_one_gt_one_fp">
<code class="sig-name descname">test_two_mask_one_gt_one_fp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_two_mask_one_gt_one_fp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_two_mask_one_gt_one_ignore">
<code class="sig-name descname">test_two_mask_one_gt_one_ignore</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpEmptyMaskAndBoxesTest.test_two_mask_one_gt_one_ignore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">SingleClassTpFpNoDifficultBoxesTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_mask_no_true_positives">
<code class="sig-name descname">test_mask_no_true_positives</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_mask_no_true_positives" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_mask_one_true_positives_with_large_iou_threshold">
<code class="sig-name descname">test_mask_one_true_positives_with_large_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_mask_one_true_positives_with_large_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_no_true_positives">
<code class="sig-name descname">test_no_true_positives</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_no_true_positives" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_one_true_positives_with_large_iou_threshold">
<code class="sig-name descname">test_one_true_positives_with_large_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_one_true_positives_with_large_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_one_true_positives_with_very_small_iou_threshold">
<code class="sig-name descname">test_one_true_positives_with_very_small_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_one_true_positives_with_very_small_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_two_true_positives_with_large_iou_threshold">
<code class="sig-name descname">test_two_true_positives_with_large_iou_threshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpNoDifficultBoxesTest.test_two_true_positives_with_large_iou_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">SingleClassTpFpWithDifficultBoxesTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_mask_match_to_gt_mask_0">
<code class="sig-name descname">test_mask_match_to_gt_mask_0</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_mask_match_to_gt_mask_0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_mask_match_to_gt_mask_1">
<code class="sig-name descname">test_mask_match_to_gt_mask_1</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_mask_match_to_gt_mask_1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_match_to_gt_box_0">
<code class="sig-name descname">test_match_to_gt_box_0</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_match_to_gt_box_0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_match_to_gt_box_1">
<code class="sig-name descname">test_match_to_gt_box_1</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithDifficultBoxesTest.test_match_to_gt_box_1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">SingleClassTpFpWithGroupOfBoxesTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_mask_match_to_non_group_of_and_group_of_box">
<code class="sig-name descname">test_mask_match_to_non_group_of_and_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_mask_match_to_non_group_of_and_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_mask_match_two_to_group_of_box">
<code class="sig-name descname">test_mask_match_two_to_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_mask_match_two_to_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_match_to_non_group_of_and_group_of_box">
<code class="sig-name descname">test_match_to_non_group_of_and_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_match_to_non_group_of_and_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_match_two_to_group_of_box">
<code class="sig-name descname">test_match_two_to_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTest.test_match_two_to_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_evaluation_test.</code><code class="sig-name descname">SingleClassTpFpWithGroupOfBoxesTestWeighted</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_mask_match_to_non_group_of_and_group_of_box">
<code class="sig-name descname">test_mask_match_to_non_group_of_and_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_mask_match_to_non_group_of_and_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_mask_match_two_to_group_of_box">
<code class="sig-name descname">test_mask_match_two_to_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_mask_match_two_to_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_match_to_non_group_of_and_group_of_box">
<code class="sig-name descname">test_match_to_non_group_of_and_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_match_to_non_group_of_and_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_match_two_to_group_of_box">
<code class="sig-name descname">test_match_two_to_group_of_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_evaluation_test.SingleClassTpFpWithGroupOfBoxesTestWeighted.test_match_two_to_group_of_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.per_image_vrd_evaluation">
<span id="vlearn-roa-utils-per-image-vrd-evaluation-module"></span><h2>vlearn.roa.utils.per_image_vrd_evaluation module<a class="headerlink" href="#module-vlearn.roa.utils.per_image_vrd_evaluation" title="Permalink to this headline">¶</a></h2>
<p>Evaluates Visual Relations Detection(VRD) result evaluation on an image.</p>
<p>Annotate each VRD result as true positives or false positive according to
a predefined IOU ratio. Multi-class detection is supported by default.
Based on the settings, per image evaluation is performed either on phrase
detection subtask or on relation detection subtask.</p>
<dl class="class">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation.PerImageVRDEvaluation">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_vrd_evaluation.</code><code class="sig-name descname">PerImageVRDEvaluation</code><span class="sig-paren">(</span><em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation.PerImageVRDEvaluation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Evaluate vrd result of a single image.</p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation.PerImageVRDEvaluation.compute_detection_tp_fp">
<code class="sig-name descname">compute_detection_tp_fp</code><span class="sig-paren">(</span><em class="sig-param">detected_box_tuples</em>, <em class="sig-param">detected_scores</em>, <em class="sig-param">detected_class_tuples</em>, <em class="sig-param">groundtruth_box_tuples</em>, <em class="sig-param">groundtruth_class_tuples</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation.PerImageVRDEvaluation.compute_detection_tp_fp" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates VRD as being tp, fp from a single image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>detected_box_tuples</strong> – A numpy array of structures with shape [N,],
representing N tuples, each tuple containing the same number of named
bounding boxes.
Each box is of the format [y_min, x_min, y_max, x_max].</p></li>
<li><p><strong>detected_scores</strong> – A float numpy array of shape [N,], representing
the confidence scores of the detected N object instances.</p></li>
<li><p><strong>detected_class_tuples</strong> – A numpy array of structures shape [N,],
representing the class labels of the corresponding bounding boxes and
possibly additional classes.</p></li>
<li><p><strong>groundtruth_box_tuples</strong> – A float numpy array of structures with the shape
[M,], representing M tuples, each tuple containing the same number
of named bounding boxes.
Each box is of the format [y_min, x_min, y_max, x_max].</p></li>
<li><p><strong>groundtruth_class_tuples</strong> – A numpy array of structures shape [M,],
representing  the class labels of the corresponding bounding boxes and
possibly additional classes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A single numpy array with shape [N,], representing N scores</dt><dd><p>detected with object class, sorted in descentent order.</p>
</dd>
<dt>tp_fp_labels: A single boolean numpy array of shape [N,], representing N</dt><dd><p>True/False positive label, one label per tuple. The labels are sorted
so that the order of the labels matches the order of the scores.</p>
</dd>
<dt>result_mapping: A numpy array with shape [N,] with original index of each</dt><dd><p>entry.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>scores</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.per_image_vrd_evaluation_test">
<span id="vlearn-roa-utils-per-image-vrd-evaluation-test-module"></span><h2>vlearn.roa.utils.per_image_vrd_evaluation_test module<a class="headerlink" href="#module-vlearn.roa.utils.per_image_vrd_evaluation_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.per_image_vrd_evaluation.</p>
<dl class="class">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.MultiClassPerImageVrdEvaluationTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_vrd_evaluation_test.</code><code class="sig-name descname">MultiClassPerImageVrdEvaluationTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.MultiClassPerImageVrdEvaluationTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.MultiClassPerImageVrdEvaluationTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.MultiClassPerImageVrdEvaluationTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.MultiClassPerImageVrdEvaluationTest.test_tp_fp_eval">
<code class="sig-name descname">test_tp_fp_eval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.MultiClassPerImageVrdEvaluationTest.test_tp_fp_eval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.per_image_vrd_evaluation_test.</code><code class="sig-name descname">SingleClassPerImageVrdEvaluationTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest.test_tp_fp_eval">
<code class="sig-name descname">test_tp_fp_eval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest.test_tp_fp_eval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest.test_tp_fp_eval_empty_gt">
<code class="sig-name descname">test_tp_fp_eval_empty_gt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.per_image_vrd_evaluation_test.SingleClassPerImageVrdEvaluationTest.test_tp_fp_eval_empty_gt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.shape_utils">
<span id="vlearn-roa-utils-shape-utils-module"></span><h2>vlearn.roa.utils.shape_utils module<a class="headerlink" href="#module-vlearn.roa.utils.shape_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils used to manipulate tensor shapes.</p>
<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.assert_box_normalized">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">assert_box_normalized</code><span class="sig-paren">(</span><em class="sig-param">boxes</em>, <em class="sig-param">maximum_normalized_coordinate=1.1</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.assert_box_normalized" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts the input box tensor is normalized.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> – a tensor of shape [N, 4] where N is the number of boxes.</p></li>
<li><p><strong>maximum_normalized_coordinate</strong> – Maximum coordinate value to be considered
as normalized, default to 1.1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tf.Assert op which fails when the input box tensor is not normalized.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – When the input box tensor is not normalized.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.assert_shape_equal">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">assert_shape_equal</code><span class="sig-paren">(</span><em class="sig-param">shape_a</em>, <em class="sig-param">shape_b</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.assert_shape_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that shape_a and shape_b are equal.</p>
<p>If the shapes are static, raises a ValueError when the shapes
mismatch.</p>
<p>If the shapes are dynamic, raises a tf InvalidArgumentError when the shapes
mismatch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape_a</strong> – a list containing shape of the first tensor.</p></li>
<li><p><strong>shape_b</strong> – a list containing shape of the second tensor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either a tf.no_op() when shapes are all static and a tf.assert_equal() op
when the shapes are dynamic.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – When shapes are both static and unequal.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.assert_shape_equal_along_first_dimension">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">assert_shape_equal_along_first_dimension</code><span class="sig-paren">(</span><em class="sig-param">shape_a</em>, <em class="sig-param">shape_b</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.assert_shape_equal_along_first_dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that shape_a and shape_b are the same along the 0th-dimension.</p>
<p>If the shapes are static, raises a ValueError when the shapes
mismatch.</p>
<p>If the shapes are dynamic, raises a tf InvalidArgumentError when the shapes
mismatch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape_a</strong> – a list containing shape of the first tensor.</p></li>
<li><p><strong>shape_b</strong> – a list containing shape of the second tensor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either a tf.no_op() when shapes are all static and a tf.assert_equal() op
when the shapes are dynamic.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – When shapes are both static and unequal.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.check_min_image_dim">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">check_min_image_dim</code><span class="sig-paren">(</span><em class="sig-param">min_dim</em>, <em class="sig-param">image_tensor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.check_min_image_dim" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the image width/height are greater than some number.</p>
<p>This function is used to check that the width and height of an image are above
a certain value. If the image shape is static, this function will perform the
check at graph construction time. Otherwise, if the image shape varies, an
Assertion control dependency will be added to the graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_dim</strong> – The minimum number of pixels along the width and height of the
image.</p></li>
<li><p><strong>image_tensor</strong> – The image tensor to check size for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If <cite>image_tensor</cite> has dynamic size, return <cite>image_tensor</cite> with a Assert
control dependency. Otherwise returns image_tensor.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <cite>image_tensor</cite>’s’ width or height is smaller than <cite>min_dim</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.clip_tensor">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">clip_tensor</code><span class="sig-paren">(</span><em class="sig-param">t</em>, <em class="sig-param">length</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.clip_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Clips the input tensor along the first dimension up to the length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> – the input tensor, assuming the rank is at least 1.</p></li>
<li><p><strong>length</strong> – a tensor of shape [1]  or an integer, indicating the first dimension
of the input tensor t after clipping, assuming length &lt;= t.shape[0].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the clipped tensor, whose first dimension is length. If the</dt><dd><p>length is an integer, the first dimension of clipped_t is set to length
statically.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>clipped_t</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.combined_static_and_dynamic_shape">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">combined_static_and_dynamic_shape</code><span class="sig-paren">(</span><em class="sig-param">tensor</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.combined_static_and_dynamic_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list containing static and dynamic values for the dimensions.</p>
<p>Returns a list of static and dynamic values for shape dimensions. This is
useful to preserve static shapes when available in reshape operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor</strong> – A tensor of any type.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of size tensor.shape.ndims containing integers or a scalar tensor.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.expand_first_dimension">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">expand_first_dimension</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">dims</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.expand_first_dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands <cite>K-d</cite> tensor along first dimension to be a <cite>(K+n-1)-d</cite> tensor.</p>
<p>Converts <cite>inputs</cite> with shape [D0, D1, …, D(K-1)] into a tensor of shape
[dims[0], dims[1], …, dims[-1], D1, …, D(k-1)].</p>
<p>Example:
<cite>inputs</cite> is a tensor with shape [50, 20, 20, 3].
new_tensor = expand_first_dimension(inputs, [10, 5]).
new_tensor.shape -&gt; [10, 5, 20, 20, 3].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – a tensor with shape [D0, D1, …, D(K-1)].</p></li>
<li><p><strong>dims</strong> – List with new dimensions to expand first axis into. The length of
<cite>dims</cite> is typically 2 or larger.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tensor with shape [dims[0], dims[1], …, dims[-1], D1, …, D(k-1)].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.flatten_dimensions">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">flatten_dimensions</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">first</em>, <em class="sig-param">last</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.flatten_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens <cite>K-d</cite> tensor along [first, last) dimensions.</p>
<p>Converts <cite>inputs</cite> with shape [D0, D1, …, D(K-1)] into a tensor of shape
[D0, D1, …, D(first) * D(first+1) * … * D(last-1), D(last), …, D(K-1)].</p>
<p>Example:
<cite>inputs</cite> is a tensor with initial shape [10, 5, 20, 20, 3].
new_tensor = flatten_dimensions(inputs, last=4, first=2)
new_tensor.shape -&gt; [10, 100, 20, 3].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – a tensor with shape [D0, D1, …, D(K-1)].</p></li>
<li><p><strong>first</strong> – first value for the range of dimensions to flatten.</p></li>
<li><p><strong>last</strong> – last value for the range of dimensions to flatten. Note that the last
dimension itself is excluded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>a tensor with shape
[D0, D1, …, D(first) * D(first + 1) * … * D(last - 1), D(last), …,</p>
<blockquote>
<div><p>D(K-1)].</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if first and last arguments are incorrect.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.flatten_first_n_dimensions">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">flatten_first_n_dimensions</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">n</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.flatten_first_n_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens <cite>K-d</cite> tensor along first n dimension to be a <cite>(K-n+1)-d</cite> tensor.</p>
<p>Converts <cite>inputs</cite> with shape [D0, D1, …, D(K-1)] into a tensor of shape
[D0 * D1 * … * D(n-1), D(n), … D(K-1)].</p>
<p>Example:
<cite>inputs</cite> is a tensor with initial shape [10, 5, 20, 20, 3].
new_tensor = flatten_first_n_dimensions(inputs, 2)
new_tensor.shape -&gt; [50, 20, 20, 3].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – a tensor with shape [D0, D1, …, D(K-1)].</p></li>
<li><p><strong>n</strong> – The number of dimensions to flatten.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tensor with shape [D0 * D1 * … * D(n-1), D(n), … D(K-1)].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.pad_or_clip_nd">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">pad_or_clip_nd</code><span class="sig-paren">(</span><em class="sig-param">tensor</em>, <em class="sig-param">output_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.pad_or_clip_nd" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad or Clip given tensor to the output shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> – Input tensor to pad or clip.</p></li>
<li><p><strong>output_shape</strong> – A list of integers / scalar tensors (or None for dynamic dim)
representing the size to pad or clip each dimension of the input tensor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input tensor padded and clipped to the output shape.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.pad_or_clip_tensor">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">pad_or_clip_tensor</code><span class="sig-paren">(</span><em class="sig-param">t</em>, <em class="sig-param">length</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.pad_or_clip_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad or clip the input tensor along the first dimension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> – the input tensor, assuming the rank is at least 1.</p></li>
<li><p><strong>length</strong> – a tensor of shape [1]  or an integer, indicating the first dimension
of the input tensor t after processing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the processed tensor, whose first dimension is length. If the</dt><dd><p>length is an integer, the first dimension of the processed tensor is set
to length statically.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>processed_t</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.pad_tensor">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">pad_tensor</code><span class="sig-paren">(</span><em class="sig-param">t</em>, <em class="sig-param">length</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.pad_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads the input tensor with 0s along the first dimension up to the length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> – the input tensor, assuming the rank is at least 1.</p></li>
<li><p><strong>length</strong> – a tensor of shape [1]  or an integer, indicating the first dimension
of the input tensor t after padding, assuming length &lt;= t.shape[0].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the padded tensor, whose first dimension is length. If the length</dt><dd><p>is an integer, the first dimension of padded_t is set to length
statically.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>padded_t</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.shape_utils.static_or_dynamic_map_fn">
<code class="sig-prename descclassname">vlearn.roa.utils.shape_utils.</code><code class="sig-name descname">static_or_dynamic_map_fn</code><span class="sig-paren">(</span><em class="sig-param">fn</em>, <em class="sig-param">elems</em>, <em class="sig-param">dtype=None</em>, <em class="sig-param">parallel_iterations=32</em>, <em class="sig-param">back_prop=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils.static_or_dynamic_map_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs map_fn as a (static) for loop when possible.</p>
<p>This function rewrites the map_fn as an explicit unstack input -&gt; for loop
over function calls -&gt; stack result combination.  This allows our graphs to
be acyclic when the batch size is static.
For comparison, see <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/map_fn">https://www.tensorflow.org/api_docs/python/tf/map_fn</a>.</p>
<p>Note that <cite>static_or_dynamic_map_fn</cite> currently is not <em>fully</em> interchangeable
with the default tf.map_fn function as it does not accept nested inputs (only
Tensors or lists of Tensors).  Likewise, the output of <cite>fn</cite> can only be a
Tensor or list of Tensors.</p>
<p>TODO(jonathanhuang): make this function fully interchangeable with tf.map_fn.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> – The callable to be performed. It accepts one argument, which will have
the same structure as elems. Its output must have the
same structure as elems.</p></li>
<li><p><strong>elems</strong> – A tensor or list of tensors, each of which will
be unpacked along their first dimension. The sequence of the
resulting slices will be applied to fn.</p></li>
<li><p><strong>dtype</strong> – (optional) The output type(s) of fn. If fn returns a structure of
Tensors differing from the structure of elems, then dtype is not optional
and must have the same structure as the output of fn.</p></li>
<li><p><strong>parallel_iterations</strong> – (optional) number of batch items to process in
parallel.  This flag is only used if the native tf.map_fn is used
and defaults to 32 instead of 10 (unlike the standard tf.map_fn default).</p></li>
<li><p><strong>back_prop</strong> – (optional) True enables support for back propagation.
This flag is only used if the native tf.map_fn is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tensor or sequence of tensors. Each tensor packs the
results of applying fn to tensors unpacked from elems along the first
dimension, from first to last.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if <cite>elems</cite> a Tensor or a list of Tensors.</p></li>
<li><p><strong>ValueError</strong> – if <cite>fn</cite> does not return a Tensor or list of Tensors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.shape_utils_test">
<span id="vlearn-roa-utils-shape-utils-test-module"></span><h2>vlearn.roa.utils.shape_utils_test module<a class="headerlink" href="#module-vlearn.roa.utils.shape_utils_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.shape_utils.</p>
<dl class="class">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.shape_utils_test.</code><code class="sig-name descname">AssertShapeEqualTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_dynamic_shape_along_first_dim_succeeds">
<code class="sig-name descname">test_equal_dynamic_shape_along_first_dim_succeeds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_dynamic_shape_along_first_dim_succeeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_dynamic_shape_succeeds">
<code class="sig-name descname">test_equal_dynamic_shape_succeeds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_dynamic_shape_succeeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_static_shape_along_first_dim_succeeds">
<code class="sig-name descname">test_equal_static_shape_along_first_dim_succeeds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_static_shape_along_first_dim_succeeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_static_shape_succeeds">
<code class="sig-name descname">test_equal_static_shape_succeeds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_equal_static_shape_succeeds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_dynamic_shape_along_first_dim_raises_tf_assert">
<code class="sig-name descname">test_unequal_dynamic_shape_along_first_dim_raises_tf_assert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_dynamic_shape_along_first_dim_raises_tf_assert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_dynamic_shape_raises_tf_assert">
<code class="sig-name descname">test_unequal_dynamic_shape_raises_tf_assert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_dynamic_shape_raises_tf_assert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_static_shape_along_first_dim_raises_exception">
<code class="sig-name descname">test_unequal_static_shape_along_first_dim_raises_exception</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_static_shape_along_first_dim_raises_exception" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_static_shape_raises_exception">
<code class="sig-name descname">test_unequal_static_shape_raises_exception</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.AssertShapeEqualTest.test_unequal_static_shape_raises_exception" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.shape_utils_test.CheckMinImageShapeTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.shape_utils_test.</code><code class="sig-name descname">CheckMinImageShapeTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.CheckMinImageShapeTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.CheckMinImageShapeTest.test_check_min_image_dim_dynamic_shape">
<code class="sig-name descname">test_check_min_image_dim_dynamic_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.CheckMinImageShapeTest.test_check_min_image_dim_dynamic_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.CheckMinImageShapeTest.test_check_min_image_dim_static_shape">
<code class="sig-name descname">test_check_min_image_dim_static_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.CheckMinImageShapeTest.test_check_min_image_dim_static_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.shape_utils_test.</code><code class="sig-name descname">FlattenExpandDimensionTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_expand_first_dimension">
<code class="sig-name descname">test_expand_first_dimension</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_expand_first_dimension" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_expand_first_dimension_with_incompatible_dims">
<code class="sig-name descname">test_expand_first_dimension_with_incompatible_dims</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_expand_first_dimension_with_incompatible_dims" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_flatten_first_two_dimensions">
<code class="sig-name descname">test_flatten_first_two_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_flatten_first_two_dimensions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_flatten_given_dims">
<code class="sig-name descname">test_flatten_given_dims</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_flatten_given_dims" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_raises_value_error_incorrect_dimensions">
<code class="sig-name descname">test_raises_value_error_incorrect_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.FlattenExpandDimensionTest.test_raises_value_error_incorrect_dimensions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.shape_utils_test.</code><code class="sig-name descname">StaticOrDynamicMapFnTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_fails_with_nested_input">
<code class="sig-name descname">test_fails_with_nested_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_fails_with_nested_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_dynamic_shape">
<code class="sig-name descname">test_with_dynamic_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_dynamic_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_multiple_dynamic_shapes">
<code class="sig-name descname">test_with_multiple_dynamic_shapes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_multiple_dynamic_shapes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_multiple_static_shapes">
<code class="sig-name descname">test_with_multiple_static_shapes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_multiple_static_shapes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_static_shape">
<code class="sig-name descname">test_with_static_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.StaticOrDynamicMapFnTest.test_with_static_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.shape_utils_test.</code><code class="sig-name descname">UtilTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_clip_tensor_using_integer_input">
<code class="sig-name descname">test_clip_tensor_using_integer_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_clip_tensor_using_integer_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_clip_tensor_using_tensor_input">
<code class="sig-name descname">test_clip_tensor_using_tensor_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_clip_tensor_using_tensor_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_combines_static_dynamic_shape">
<code class="sig-name descname">test_combines_static_dynamic_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_combines_static_dynamic_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_or_clip_nd_tensor">
<code class="sig-name descname">test_pad_or_clip_nd_tensor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_or_clip_nd_tensor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_or_clip_tensor_using_integer_input">
<code class="sig-name descname">test_pad_or_clip_tensor_using_integer_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_or_clip_tensor_using_integer_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_or_clip_tensor_using_tensor_input">
<code class="sig-name descname">test_pad_or_clip_tensor_using_tensor_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_or_clip_tensor_using_tensor_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_tensor_using_integer_input">
<code class="sig-name descname">test_pad_tensor_using_integer_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_tensor_using_integer_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_tensor_using_tensor_input">
<code class="sig-name descname">test_pad_tensor_using_tensor_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.shape_utils_test.UtilTest.test_pad_tensor_using_tensor_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.spatial_transform_ops">
<span id="vlearn-roa-utils-spatial-transform-ops-module"></span><h2>vlearn.roa.utils.spatial_transform_ops module<a class="headerlink" href="#module-vlearn.roa.utils.spatial_transform_ops" title="Permalink to this headline">¶</a></h2>
<p>Spatial transformation ops like RoIAlign, CropAndResize.</p>
<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.box_grid_coordinate_vectors">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">box_grid_coordinate_vectors</code><span class="sig-paren">(</span><em class="sig-param">boxes</em>, <em class="sig-param">size_y</em>, <em class="sig-param">size_x</em>, <em class="sig-param">align_corners=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.box_grid_coordinate_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates coordinate vectors for a <cite>size x size</cite> grid in boxes.</p>
<p>Each box is subdivided uniformly into a grid consisting of size x size
rectangular cells. This function returns coordinate vectors describing
the center of each cell.</p>
<p>If <cite>align_corners</cite> is true, grid points are uniformly spread such that the
corner points on the grid exactly overlap corners of the boxes.</p>
<p>Note that output coordinates are expressed in the same coordinate frame as
input boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> – A float tensor of shape [batch, num_boxes, 4] containing boxes of the
form [ymin, xmin, ymax, xmax].</p></li>
<li><p><strong>size_y</strong> – Size of the grid in y axis.</p></li>
<li><p><strong>size_x</strong> – Size of the grid in x axis.</p></li>
<li><p><strong>align_corners</strong> – Whether to align the corner grid points exactly with box
corners.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A float tensor of shape [batch, num_boxes, size_y] containing y</dt><dd><p>coordinates for grid points.</p>
</dd>
<dt>box_grid_x: A float tensor of shape [batch, num_boxes, size_x] containing x</dt><dd><p>coordinates for grid points.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>box_grid_y</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.feature_grid_coordinate_vectors">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">feature_grid_coordinate_vectors</code><span class="sig-paren">(</span><em class="sig-param">box_grid_y</em>, <em class="sig-param">box_grid_x</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.feature_grid_coordinate_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns feature grid point coordinate vectors for bilinear interpolation.</p>
<p>Box grid is specified in absolute coordinate system with origin at left top
(0, 0). The returned coordinate vectors contain 0-based feature point indices.</p>
<p>This function snaps each point in the box grid to nearest 4 points on the
feature map.</p>
<p>In this function we also follow the convention of treating feature pixels as
point objects with no spatial extent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_grid_y</strong> – A float tensor of shape [batch, num_boxes, size] containing y
coordinate vector of the box grid.</p></li>
<li><p><strong>box_grid_x</strong> – A float tensor of shape [batch, num_boxes, size] containing x
coordinate vector of the box grid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>An int32 tensor of shape [batch, num_boxes, size]</dt><dd><p>containing y coordinate vector for the top neighbors.</p>
</dd>
<dt>feature_grid_x0: A int32 tensor of shape [batch, num_boxes, size]</dt><dd><p>containing x coordinate vector for the left neighbors.</p>
</dd>
<dt>feature_grid_y1: A int32 tensor of shape [batch, num_boxes, size]</dt><dd><p>containing y coordinate vector for the bottom neighbors.</p>
</dd>
<dt>feature_grid_x1: A int32 tensor of shape [batch, num_boxes, size]</dt><dd><p>containing x coordinate vector for the right neighbors.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>feature_grid_y0</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.matmul_crop_and_resize">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">matmul_crop_and_resize</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">boxes</em>, <em class="sig-param">crop_size</em>, <em class="sig-param">extrapolation_value=0.0</em>, <em class="sig-param">scope=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.matmul_crop_and_resize" title="Permalink to this definition">¶</a></dt>
<dd><p>Matrix multiplication based implementation of the crop and resize op.</p>
<p>Extracts crops from the input image tensor and bilinearly resizes them
(possibly with aspect ratio change) to a common output size specified by
crop_size. This is more general than the crop_to_bounding_box op which
extracts a fixed size slice from the input image and does not allow
resizing or aspect ratio change.</p>
<p>Returns a tensor with crops from the input image at positions defined at
the bounding box locations in boxes. The cropped boxes are all resized
(with bilinear interpolation) to a fixed size = <cite>[crop_height, crop_width]</cite>.
The result is a 5-D tensor <cite>[batch, num_boxes, crop_height, crop_width,
depth]</cite>.</p>
<p>Note that this operation is meant to replicate the behavior of the standard
tf.image.crop_and_resize operation but there are a few differences.
Specifically:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>There is no <cite>box_indices</cite> argument — to run this op on multiple images,</p></li>
</ol>
<blockquote>
<div><p>one must currently call this op independently on each image.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>The <cite>crop_size</cite> parameter is assumed to be statically defined.</p></li>
</ol>
<blockquote>
<div><p>Moreover, the number of boxes must be strictly nonzero.</p>
</div></blockquote>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – A <cite>Tensor</cite>. Must be one of the following types: <cite>uint8</cite>, <cite>int8</cite>,
<cite>int16</cite>, <cite>int32</cite>, <cite>int64</cite>, <cite>half</cite>, ‘bfloat16’, <cite>float32</cite>, <cite>float64</cite>.
A 4-D tensor of shape <cite>[batch, image_height, image_width, depth]</cite>.
Both <cite>image_height</cite> and <cite>image_width</cite> need to be positive.</p></li>
<li><p><strong>boxes</strong> – A <cite>Tensor</cite> of type <cite>float32</cite> or ‘bfloat16’.
A 3-D tensor of shape <cite>[batch, num_boxes, 4]</cite>. The boxes are specified in
normalized coordinates and are of the form <cite>[y1, x1, y2, x2]</cite>. A
normalized coordinate value of <cite>y</cite> is mapped to the image coordinate at
<cite>y * (image_height - 1)</cite>, so as the <cite>[0, 1]</cite> interval of normalized image
height is mapped to <cite>[0, image_height - 1] in image height coordinates.
We do allow y1 &gt; y2, in which case the sampled crop is an up-down flipped
version of the original image. The width dimension is treated similarly.
Normalized coordinates outside the `[0, 1]</cite> range are allowed, in which
case we use <cite>extrapolation_value</cite> to extrapolate the input image values.</p></li>
<li><p><strong>crop_size</strong> – A list of two integers <cite>[crop_height, crop_width]</cite>. All
cropped image patches are resized to this size. The aspect ratio of the
image content is not preserved. Both <cite>crop_height</cite> and <cite>crop_width</cite> need
to be positive.</p></li>
<li><p><strong>extrapolation_value</strong> – a float value to use for extrapolation.</p></li>
<li><p><strong>scope</strong> – A name for the operation (optional).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 5-D tensor of shape <cite>[batch, num_boxes, crop_height, crop_width, depth]</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.multilevel_roi_align">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">multilevel_roi_align</code><span class="sig-paren">(</span><em class="sig-param">features</em>, <em class="sig-param">boxes</em>, <em class="sig-param">box_levels</em>, <em class="sig-param">output_size</em>, <em class="sig-param">num_samples_per_cell_y=1</em>, <em class="sig-param">num_samples_per_cell_x=1</em>, <em class="sig-param">align_corners=False</em>, <em class="sig-param">extrapolation_value=0.0</em>, <em class="sig-param">scope=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.multilevel_roi_align" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies RoI Align op and returns feature for boxes.</p>
<p>Given multiple features maps indexed by different levels, and a set of boxes
where each box is mapped to a certain level, this function selectively crops
and resizes boxes from the corresponding feature maps.</p>
<p>We follow the RoI Align technique in <a class="reference external" href="https://arxiv.org/pdf/1703.06870.pdf">https://arxiv.org/pdf/1703.06870.pdf</a>
figure 3. Specifically, each box is subdivided uniformly into a grid
consisting of output_size[0] x output_size[1] rectangular cells. Within each
cell we select <cite>num_points</cite> points uniformly and compute feature values using
bilinear interpolation. Finally, we average pool the interpolated values in
each cell to obtain a [output_size[0], output_size[1], channels] feature.</p>
<p>If <cite>align_corners</cite> is true, sampling points are uniformly spread such that
corner points exactly overlap corners of the boxes.</p>
<p>In this function we also follow the convention of treating feature pixels as
point objects with no spatial extent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> – A list of 4D float tensors of shape [batch_size, max_height,
max_width, channels] containing features.</p></li>
<li><p><strong>boxes</strong> – A 3D float tensor of shape [batch_size, num_boxes, 4] containing
boxes of the form [ymin, xmin, ymax, xmax] in normalized coordinates.</p></li>
<li><p><strong>box_levels</strong> – A 3D int32 tensor of shape [batch_size, num_boxes, 1]
representing the feature level index for each box.</p></li>
<li><p><strong>output_size</strong> – An list of two integers [size_y, size_x] indicating the output
feature size for each box.</p></li>
<li><p><strong>num_samples_per_cell_y</strong> – Number of grid points to sample along y axis in each
cell.</p></li>
<li><p><strong>num_samples_per_cell_x</strong> – Number of grid points to sample along x axis in each
cell.</p></li>
<li><p><strong>align_corners</strong> – Whether to align the corner grid points exactly with box
corners.</p></li>
<li><p><strong>extrapolation_value</strong> – a float value to use for extrapolation.</p></li>
<li><p><strong>scope</strong> – Scope name to use for this op.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 5D float tensor of shape [batch_size, num_boxes, output_size[0],
output_size[1], channels] representing the cropped features.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.native_crop_and_resize">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">native_crop_and_resize</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">boxes</em>, <em class="sig-param">crop_size</em>, <em class="sig-param">scope=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.native_crop_and_resize" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <cite>matmul_crop_and_resize</cite> but uses tf.image.crop_and_resize.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.pad_to_max_size">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">pad_to_max_size</code><span class="sig-paren">(</span><em class="sig-param">features</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.pad_to_max_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads features to max height and max width and stacks them up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>features</strong> – A list of num_levels 4D float tensors of shape [batch, height_i,
width_i, channels] containing feature maps.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A 5D float tensor of shape [batch, num_levels, max_height,</dt><dd><p>max_width, channels] containing stacked features.</p>
</dd>
<dt>true_feature_shapes: A 2D int32 tensor of shape [num_levels, 2] containing</dt><dd><p>height and width of the feature maps before padding.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>stacked_features</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.spatial_transform_ops.ravel_indices">
<code class="sig-prename descclassname">vlearn.roa.utils.spatial_transform_ops.</code><code class="sig-name descname">ravel_indices</code><span class="sig-paren">(</span><em class="sig-param">feature_grid_y</em>, <em class="sig-param">feature_grid_x</em>, <em class="sig-param">num_levels</em>, <em class="sig-param">height</em>, <em class="sig-param">width</em>, <em class="sig-param">box_levels</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.spatial_transform_ops.ravel_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns grid indices in a flattened feature map of shape [-1, channels].</p>
<p>The returned 1-D array can be used to gather feature grid points from a
feature map that has been flattened from [batch, num_levels, max_height,
max_width, channels] to [batch * num_levels * max_height * max_width,
channels].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature_grid_y</strong> – An int32 tensor of shape [batch, num_boxes, size_y]
containing y coordinate vector.</p></li>
<li><p><strong>feature_grid_x</strong> – An int32 tensor of shape [batch, num_boxes, size_x]
containing x coordinate vector.</p></li>
<li><p><strong>num_levels</strong> – Number of feature levels.</p></li>
<li><p><strong>height</strong> – An integer indicating the padded height of feature maps.</p></li>
<li><p><strong>width</strong> – An integer indicating the padded width of feature maps.</p></li>
<li><p><strong>box_levels</strong> – An int32 tensor of shape [batch, num_boxes] indicating
feature level assigned to each box.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A 1D int32 tensor containing feature point indices in a flattened</dt><dd><p>feature grid.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>indices</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="vlearn-roa-utils-spatial-transform-ops-test-module">
<h2>vlearn.roa.utils.spatial_transform_ops_test module<a class="headerlink" href="#vlearn-roa-utils-spatial-transform-ops-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.static_shape">
<span id="vlearn-roa-utils-static-shape-module"></span><h2>vlearn.roa.utils.static_shape module<a class="headerlink" href="#module-vlearn.roa.utils.static_shape" title="Permalink to this headline">¶</a></h2>
<p>Helper functions to access TensorShape values.</p>
<p>The rank 4 tensor_shape must be of the form [batch_size, height, width, depth].</p>
<dl class="function">
<dt id="vlearn.roa.utils.static_shape.get_batch_size">
<code class="sig-prename descclassname">vlearn.roa.utils.static_shape.</code><code class="sig-name descname">get_batch_size</code><span class="sig-paren">(</span><em class="sig-param">tensor_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape.get_batch_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns batch size from the tensor shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_shape</strong> – A rank 4 TensorShape.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An integer representing the batch size of the tensor.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.static_shape.get_depth">
<code class="sig-prename descclassname">vlearn.roa.utils.static_shape.</code><code class="sig-name descname">get_depth</code><span class="sig-paren">(</span><em class="sig-param">tensor_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape.get_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns depth from the tensor shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_shape</strong> – A rank 4 TensorShape.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An integer representing the depth of the tensor.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.static_shape.get_dim_as_int">
<code class="sig-prename descclassname">vlearn.roa.utils.static_shape.</code><code class="sig-name descname">get_dim_as_int</code><span class="sig-paren">(</span><em class="sig-param">dim</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape.get_dim_as_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility to get v1 or v2 TensorShape dim as an int.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dim</strong> – The TensorShape dimension to get as an int</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None or an int.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.static_shape.get_height">
<code class="sig-prename descclassname">vlearn.roa.utils.static_shape.</code><code class="sig-name descname">get_height</code><span class="sig-paren">(</span><em class="sig-param">tensor_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape.get_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns height from the tensor shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_shape</strong> – A rank 4 TensorShape.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An integer representing the height of the tensor.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.static_shape.get_width">
<code class="sig-prename descclassname">vlearn.roa.utils.static_shape.</code><code class="sig-name descname">get_width</code><span class="sig-paren">(</span><em class="sig-param">tensor_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape.get_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns width from the tensor shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor_shape</strong> – A rank 4 TensorShape.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An integer representing the width of the tensor.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.static_shape_test">
<span id="vlearn-roa-utils-static-shape-test-module"></span><h2>vlearn.roa.utils.static_shape_test module<a class="headerlink" href="#module-vlearn.roa.utils.static_shape_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.static_shape.</p>
<dl class="class">
<dt id="vlearn.roa.utils.static_shape_test.StaticShapeTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.static_shape_test.</code><code class="sig-name descname">StaticShapeTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape_test.StaticShapeTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.static_shape_test.StaticShapeTest.test_die_on_tensor_shape_with_rank_three">
<code class="sig-name descname">test_die_on_tensor_shape_with_rank_three</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape_test.StaticShapeTest.test_die_on_tensor_shape_with_rank_three" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_batchSize">
<code class="sig-name descname">test_return_correct_batchSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_batchSize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_depth">
<code class="sig-name descname">test_return_correct_depth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_depth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_height">
<code class="sig-name descname">test_return_correct_height</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_height" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_width">
<code class="sig-name descname">test_return_correct_width</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.static_shape_test.StaticShapeTest.test_return_correct_width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="vlearn-roa-utils-test-case-module">
<h2>vlearn.roa.utils.test_case module<a class="headerlink" href="#vlearn-roa-utils-test-case-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.test_utils">
<span id="vlearn-roa-utils-test-utils-module"></span><h2>vlearn.roa.utils.test_utils module<a class="headerlink" href="#module-vlearn.roa.utils.test_utils" title="Permalink to this headline">¶</a></h2>
<p>Contains functions which are convenient for unit testing.</p>
<dl class="class">
<dt id="vlearn.roa.utils.test_utils.MockAnchorGenerator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">MockAnchorGenerator</code><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockAnchorGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.core.anchor_generator.AnchorGenerator</span></code></p>
<p>Mock anchor generator.</p>
<dl class="method">
<dt id="vlearn.roa.utils.test_utils.MockAnchorGenerator.name_scope">
<code class="sig-name descname">name_scope</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockAnchorGenerator.name_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Name scope.</p>
<p>Must be defined by implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a string representing the name scope of the anchor generation operation.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.test_utils.MockAnchorGenerator.num_anchors_per_location">
<code class="sig-name descname">num_anchors_per_location</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockAnchorGenerator.num_anchors_per_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of anchors per spatial location.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of integers, one for each expected feature map to be passed to
the <cite>generate</cite> function.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.test_utils.MockBoxCoder">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">MockBoxCoder</code><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockBoxCoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.core.box_coder.BoxCoder</span></code></p>
<p>Simple <cite>difference</cite> BoxCoder.</p>
<dl class="method">
<dt id="vlearn.roa.utils.test_utils.MockBoxCoder.code_size">
<em class="property">property </em><code class="sig-name descname">code_size</code><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockBoxCoder.code_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the size of each code.</p>
<p>This number is a constant and should agree with the output of the <cite>encode</cite>
op (e.g. if rel_codes is the output of self.encode(…), then it should have
shape [N, code_size()]).  This abstractproperty should be overridden by
implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>an integer constant</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.test_utils.MockBoxPredictor">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">MockBoxPredictor</code><span class="sig-paren">(</span><em class="sig-param">is_training</em>, <em class="sig-param">num_classes</em>, <em class="sig-param">add_background_class=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockBoxPredictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.core.box_predictor.BoxPredictor</span></code></p>
<p>Simple box predictor that ignores inputs and outputs all zeros.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.test_utils.MockKerasBoxPredictor">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">MockKerasBoxPredictor</code><span class="sig-paren">(</span><em class="sig-param">is_training</em>, <em class="sig-param">num_classes</em>, <em class="sig-param">add_background_class=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockKerasBoxPredictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.core.box_predictor.KerasBoxPredictor</span></code></p>
<p>Simple box predictor that ignores inputs and outputs all zeros.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.test_utils.MockMaskHead">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">MockMaskHead</code><span class="sig-paren">(</span><em class="sig-param">num_classes</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockMaskHead" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simple maskhead that returns all zeros as mask predictions.</p>
<dl class="method">
<dt id="vlearn.roa.utils.test_utils.MockMaskHead.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">features</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockMaskHead.predict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.test_utils.MockMatcher">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">MockMatcher</code><span class="sig-paren">(</span><em class="sig-param">use_matmul_gather=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.MockMatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.core.matcher.Matcher</span></code></p>
<p>Simple matcher that matches first anchor to first groundtruth box.</p>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.test_utils.create_diagonal_gradient_image">
<code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">create_diagonal_gradient_image</code><span class="sig-paren">(</span><em class="sig-param">height</em>, <em class="sig-param">width</em>, <em class="sig-param">depth</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.create_diagonal_gradient_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates pyramid image. Useful for testing.</p>
<p>For example, pyramid_image(5, 6, 1) looks like:
# [[[ 5.  4.  3.  2.  1.  0.]
#   [ 6.  5.  4.  3.  2.  1.]
#   [ 7.  6.  5.  4.  3.  2.]
#   [ 8.  7.  6.  5.  4.  3.]
#   [ 9.  8.  7.  6.  5.  4.]]]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>height</strong> – height of image</p></li>
<li><p><strong>width</strong> – width of image</p></li>
<li><p><strong>depth</strong> – depth of image</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pyramid image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.test_utils.create_random_boxes">
<code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">create_random_boxes</code><span class="sig-paren">(</span><em class="sig-param">num_boxes</em>, <em class="sig-param">max_height</em>, <em class="sig-param">max_width</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.create_random_boxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates random bounding boxes of specific maximum height and width.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_boxes</strong> – number of boxes.</p></li>
<li><p><strong>max_height</strong> – maximum height of boxes.</p></li>
<li><p><strong>max_width</strong> – maximum width of boxes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>numpy array of shape [num_boxes, 4]. Each row is in form</dt><dd><p>[y_min, x_min, y_max, x_max].</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boxes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.test_utils.first_rows_close_as_set">
<code class="sig-prename descclassname">vlearn.roa.utils.test_utils.</code><code class="sig-name descname">first_rows_close_as_set</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">k=None</em>, <em class="sig-param">rtol=1e-06</em>, <em class="sig-param">atol=1e-06</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils.first_rows_close_as_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if first K entries of two lists are close, up to permutation.</p>
<p>Inputs to this assert are lists of items which can be compared via
numpy.allclose(…) and can be sorted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> – list of items which can be compared via numpy.allclose(…) and are
sortable.</p></li>
<li><p><strong>b</strong> – list of items which can be compared via numpy.allclose(…) and are
sortable.</p></li>
<li><p><strong>k</strong> – a non-negative integer.  If not provided, k is set to be len(a).</p></li>
<li><p><strong>rtol</strong> – relative tolerance.</p></li>
<li><p><strong>atol</strong> – absolute tolerance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean, True if input lists a and b have the same length and
the first k entries of the inputs satisfy numpy.allclose() after
sorting entries.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.test_utils_test">
<span id="vlearn-roa-utils-test-utils-test-module"></span><h2>vlearn.roa.utils.test_utils_test module<a class="headerlink" href="#module-vlearn.roa.utils.test_utils_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.test_utils.</p>
<dl class="class">
<dt id="vlearn.roa.utils.test_utils_test.TestUtilsTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.test_utils_test.</code><code class="sig-name descname">TestUtilsTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils_test.TestUtilsTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.test_utils_test.TestUtilsTest.test_diagonal_gradient_image">
<code class="sig-name descname">test_diagonal_gradient_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils_test.TestUtilsTest.test_diagonal_gradient_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a good pyramid image is created.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.test_utils_test.TestUtilsTest.test_first_rows_close_as_set">
<code class="sig-name descname">test_first_rows_close_as_set</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils_test.TestUtilsTest.test_first_rows_close_as_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.test_utils_test.TestUtilsTest.test_random_boxes">
<code class="sig-name descname">test_random_boxes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.test_utils_test.TestUtilsTest.test_random_boxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if valid random boxes are created.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="vlearn-roa-utils-variables-helper-module">
<h2>vlearn.roa.utils.variables_helper module<a class="headerlink" href="#vlearn-roa-utils-variables-helper-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="vlearn-roa-utils-variables-helper-test-module">
<h2>vlearn.roa.utils.variables_helper_test module<a class="headerlink" href="#vlearn-roa-utils-variables-helper-test-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-vlearn.roa.utils.visualization_utils">
<span id="vlearn-roa-utils-visualization-utils-module"></span><h2>vlearn.roa.utils.visualization_utils module<a class="headerlink" href="#module-vlearn.roa.utils.visualization_utils" title="Permalink to this headline">¶</a></h2>
<p>A set of functions that are used for visualization.</p>
<p>These functions often receive an image, perform some visualization on the image.
The functions do not return a value, instead they modify the image itself.</p>
<dl class="class">
<dt id="vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">EvalMetricOpsVisualization</code><span class="sig-paren">(</span><em class="sig-param">category_index</em>, <em class="sig-param">max_examples_to_draw=5</em>, <em class="sig-param">max_boxes_to_draw=20</em>, <em class="sig-param">min_score_thresh=0.2</em>, <em class="sig-param">use_normalized_coordinates=True</em>, <em class="sig-param">summary_name_prefix='evaluation_image'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract base class responsible for visualizations during evaluation.</p>
<p>Currently, summary images are not run during evaluation. One way to produce
evaluation images in Tensorboard is to provide tf.summary.image strings as
<cite>value_ops</cite> in tf.estimator.EstimatorSpec’s <cite>eval_metric_ops</cite>. This class is
responsible for accruing images (with overlaid detections and groundtruth)
and returning a dictionary that can be passed to <cite>eval_metric_ops</cite>.</p>
<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.add_images">
<code class="sig-name descname">add_images</code><span class="sig-paren">(</span><em class="sig-param">images</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.add_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a list of images, each with shape [1, H, W, C].</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.get_estimator_eval_metric_ops">
<code class="sig-name descname">get_estimator_eval_metric_ops</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.get_estimator_eval_metric_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns metric ops for use in tf.estimator.EstimatorSpec.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_dict</strong> – <p>A dictionary that holds an image, groundtruth, and detections
for a batched example. Note that, we use only the first example for
visualization. See eval_util.result_dict_for_batched_example() for a
convenient method for constructing such a dictionary. The dictionary
contains
fields.InputDataFields.original_image: [batch_size, H, W, 3] image.
fields.InputDataFields.original_image_spatial_shape: [batch_size, 2]</p>
<blockquote>
<div><p>tensor containing the size of the original image.</p>
</div></blockquote>
<dl class="simple">
<dt>fields.InputDataFields.true_image_shape: [batch_size, 3]</dt><dd><p>tensor containing the spatial size of the upadded original image.</p>
</dd>
<dt>fields.InputDataFields.groundtruth_boxes - [batch_size, num_boxes, 4]</dt><dd><p>float32 tensor with groundtruth boxes in range [0.0, 1.0].</p>
</dd>
<dt>fields.InputDataFields.groundtruth_classes - [batch_size, num_boxes]</dt><dd><p>int64 tensor with 1-indexed groundtruth classes.</p>
</dd>
<dt>fields.InputDataFields.groundtruth_instance_masks - (optional)</dt><dd><p>[batch_size, num_boxes, H, W] int64 tensor with instance masks.</p>
</dd>
<dt>fields.DetectionResultFields.detection_boxes - [batch_size,</dt><dd><p>max_num_boxes, 4] float32 tensor with detection boxes in range [0.0,
1.0].</p>
</dd>
<dt>fields.DetectionResultFields.detection_classes - [batch_size,</dt><dd><p>max_num_boxes] int64 tensor with 1-indexed detection classes.</p>
</dd>
<dt>fields.DetectionResultFields.detection_scores - [batch_size,</dt><dd><p>max_num_boxes] float32 tensor with detection scores.</p>
</dd>
<dt>fields.DetectionResultFields.detection_masks - (optional) [batch_size,</dt><dd><p>max_num_boxes, H, W] float32 tensor of binarized masks.</p>
</dd>
<dt>fields.DetectionResultFields.detection_keypoints - (optional)</dt><dd><p>[batch_size, max_num_boxes, num_keypoints, 2] float32 tensor with
keypoints.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of image summary names to tuple of (value_op, update_op). The
<cite>update_op</cite> is the same for all items in the dictionary, and is
responsible for saving a single side-by-side image with detections and
groundtruth. Each <cite>value_op</cite> holds the tf.summary.image string for a given
image.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.images_from_evaluation_dict">
<em class="property">abstract </em><code class="sig-name descname">images_from_evaluation_dict</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization.images_from_evaluation_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts evaluation dictionary into a list of image tensors.</p>
<p>To be overridden by implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_dict</strong> – A dictionary with all the necessary information for producing
visualizations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of [1, H, W, C] uint8 tensors.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.visualization_utils.VisualizeSingleFrameDetections">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">VisualizeSingleFrameDetections</code><span class="sig-paren">(</span><em class="sig-param">category_index</em>, <em class="sig-param">max_examples_to_draw=5</em>, <em class="sig-param">max_boxes_to_draw=20</em>, <em class="sig-param">min_score_thresh=0.2</em>, <em class="sig-param">use_normalized_coordinates=True</em>, <em class="sig-param">summary_name_prefix='Detections_Left_Groundtruth_Right'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.VisualizeSingleFrameDetections" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization" title="vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.visualization_utils.EvalMetricOpsVisualization</span></code></a></p>
<p>Class responsible for single-frame object detection visualizations.</p>
<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils.VisualizeSingleFrameDetections.images_from_evaluation_dict">
<code class="sig-name descname">images_from_evaluation_dict</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.VisualizeSingleFrameDetections.images_from_evaluation_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts evaluation dictionary into a list of image tensors.</p>
<p>To be overridden by implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_dict</strong> – A dictionary with all the necessary information for producing
visualizations.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of [1, H, W, C] uint8 tensors.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.add_cdf_image_summary">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">add_cdf_image_summary</code><span class="sig-paren">(</span><em class="sig-param">values</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.add_cdf_image_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a tf.summary.image for a CDF plot of the values.</p>
<p>Normalizes <cite>values</cite> such that they sum to 1, plots the cumulative distribution
function and creates a tf image summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> – a 1-D float32 tensor containing the values.</p></li>
<li><p><strong>name</strong> – name for the image summary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.add_hist_image_summary">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">add_hist_image_summary</code><span class="sig-paren">(</span><em class="sig-param">values</em>, <em class="sig-param">bins</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.add_hist_image_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a tf.summary.image for a histogram plot of the values.</p>
<p>Plots the histogram of values and creates a tf image summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> – a 1-D float32 tensor containing the values.</p></li>
<li><p><strong>bins</strong> – bin edges which will be directly passed to np.histogram.</p></li>
<li><p><strong>name</strong> – name for the image summary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.create_visualization_fn">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">create_visualization_fn</code><span class="sig-paren">(</span><em class="sig-param">category_index</em>, <em class="sig-param">include_masks=False</em>, <em class="sig-param">include_keypoints=False</em>, <em class="sig-param">include_track_ids=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.create_visualization_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a visualization function that can be wrapped in a py_func.</p>
<p>py_funcs only accept positional arguments. This function returns a suitable
function with the correct positional argument mapping. The positional
arguments in order are:
0: image
1: boxes
2: classes
3: scores
[4-6]: masks (optional)
[4-6]: keypoints (optional)
[4-6]: track_ids (optional)</p>
<p>– Example 1 –
vis_only_masks_fn = create_visualization_fn(category_index,</p>
<blockquote>
<div><p>include_masks=True, include_keypoints=False, include_track_ids=False,
<a href="#id13"><span class="problematic" id="id14">**</span></a>kwargs)</p>
</div></blockquote>
<dl class="simple">
<dt>image = tf.py_func(vis_only_masks_fn,</dt><dd><p>inp=[image, boxes, classes, scores, masks],
Tout=tf.uint8)</p>
</dd>
</dl>
<p>– Example 2 –
vis_masks_and_track_ids_fn = create_visualization_fn(category_index,</p>
<blockquote>
<div><p>include_masks=True, include_keypoints=False, include_track_ids=True,
<a href="#id15"><span class="problematic" id="id16">**</span></a>kwargs)</p>
</div></blockquote>
<dl class="simple">
<dt>image = tf.py_func(vis_masks_and_track_ids_fn,</dt><dd><p>inp=[image, boxes, classes, scores, masks, track_ids],
Tout=tf.uint8)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>category_index</strong> – a dict that maps integer ids to category dicts. e.g.
{1: {1: ‘dog’}, 2: {2: ‘cat’}, …}</p></li>
<li><p><strong>include_masks</strong> – Whether masks should be expected as a positional argument in
the returned function.</p></li>
<li><p><strong>include_keypoints</strong> – Whether keypoints should be expected as a positional
argument in the returned function.</p></li>
<li><p><strong>include_track_ids</strong> – Whether track ids should be expected as a positional
argument in the returned function.</p></li>
<li><p><strong>**kwargs</strong> – Additional kwargs that will be passed to
visualize_boxes_and_labels_on_image_array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns a function that only takes tensors as positional arguments.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_bounding_box_on_image">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_bounding_box_on_image</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">ymin</em>, <em class="sig-param">xmin</em>, <em class="sig-param">ymax</em>, <em class="sig-param">xmax</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">thickness=4</em>, <em class="sig-param">display_str_list=()</em>, <em class="sig-param">use_normalized_coordinates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_bounding_box_on_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a bounding box to an image.</p>
<p>Bounding box coordinates can be specified in either absolute (pixel) or
normalized coordinates by setting the use_normalized_coordinates argument.</p>
<p>Each string in display_str_list is displayed on a separate line above the
bounding box in black text on a rectangle filled with the input ‘color’.
If the top of the bounding box extends to the edge of the image, the strings
are displayed below the bounding box.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a PIL.Image object.</p></li>
<li><p><strong>ymin</strong> – ymin of bounding box.</p></li>
<li><p><strong>xmin</strong> – xmin of bounding box.</p></li>
<li><p><strong>ymax</strong> – ymax of bounding box.</p></li>
<li><p><strong>xmax</strong> – xmax of bounding box.</p></li>
<li><p><strong>color</strong> – color to draw bounding box. Default is red.</p></li>
<li><p><strong>thickness</strong> – line thickness. Default value is 4.</p></li>
<li><p><strong>display_str_list</strong> – list of strings to display in box
(each to be shown on its own line).</p></li>
<li><p><strong>use_normalized_coordinates</strong> – If True (default), treat coordinates
ymin, xmin, ymax, xmax as relative to the image.  Otherwise treat
coordinates as absolute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_bounding_box_on_image_array">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_bounding_box_on_image_array</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">ymin</em>, <em class="sig-param">xmin</em>, <em class="sig-param">ymax</em>, <em class="sig-param">xmax</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">thickness=4</em>, <em class="sig-param">display_str_list=()</em>, <em class="sig-param">use_normalized_coordinates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_bounding_box_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a bounding box to an image (numpy array).</p>
<p>Bounding box coordinates can be specified in either absolute (pixel) or
normalized coordinates by setting the use_normalized_coordinates argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a numpy array with shape [height, width, 3].</p></li>
<li><p><strong>ymin</strong> – ymin of bounding box.</p></li>
<li><p><strong>xmin</strong> – xmin of bounding box.</p></li>
<li><p><strong>ymax</strong> – ymax of bounding box.</p></li>
<li><p><strong>xmax</strong> – xmax of bounding box.</p></li>
<li><p><strong>color</strong> – color to draw bounding box. Default is red.</p></li>
<li><p><strong>thickness</strong> – line thickness. Default value is 4.</p></li>
<li><p><strong>display_str_list</strong> – list of strings to display in box
(each to be shown on its own line).</p></li>
<li><p><strong>use_normalized_coordinates</strong> – If True (default), treat coordinates
ymin, xmin, ymax, xmax as relative to the image.  Otherwise treat
coordinates as absolute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_bounding_boxes_on_image">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_bounding_boxes_on_image</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">boxes</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">thickness=4</em>, <em class="sig-param">display_str_list_list=()</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_bounding_boxes_on_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws bounding boxes on image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a PIL.Image object.</p></li>
<li><p><strong>boxes</strong> – a 2 dimensional numpy array of [N, 4]: (ymin, xmin, ymax, xmax).
The coordinates are in normalized format between [0, 1].</p></li>
<li><p><strong>color</strong> – color to draw bounding box. Default is red.</p></li>
<li><p><strong>thickness</strong> – line thickness. Default value is 4.</p></li>
<li><p><strong>display_str_list_list</strong> – list of list of strings.
a list of strings for each bounding box.
The reason to pass a list of strings for a
bounding box is that it might contain
multiple labels.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if boxes is not a [N, 4] array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_bounding_boxes_on_image_array">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_bounding_boxes_on_image_array</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">boxes</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">thickness=4</em>, <em class="sig-param">display_str_list_list=()</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_bounding_boxes_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws bounding boxes on image (numpy array).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a numpy array object.</p></li>
<li><p><strong>boxes</strong> – a 2 dimensional numpy array of [N, 4]: (ymin, xmin, ymax, xmax).
The coordinates are in normalized format between [0, 1].</p></li>
<li><p><strong>color</strong> – color to draw bounding box. Default is red.</p></li>
<li><p><strong>thickness</strong> – line thickness. Default value is 4.</p></li>
<li><p><strong>display_str_list_list</strong> – list of list of strings.
a list of strings for each bounding box.
The reason to pass a list of strings for a
bounding box is that it might contain
multiple labels.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if boxes is not a [N, 4] array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_bounding_boxes_on_image_tensors">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_bounding_boxes_on_image_tensors</code><span class="sig-paren">(</span><em class="sig-param">images</em>, <em class="sig-param">boxes</em>, <em class="sig-param">classes</em>, <em class="sig-param">scores</em>, <em class="sig-param">category_index</em>, <em class="sig-param">original_image_spatial_shape=None</em>, <em class="sig-param">true_image_shape=None</em>, <em class="sig-param">instance_masks=None</em>, <em class="sig-param">keypoints=None</em>, <em class="sig-param">track_ids=None</em>, <em class="sig-param">max_boxes_to_draw=20</em>, <em class="sig-param">min_score_thresh=0.2</em>, <em class="sig-param">use_normalized_coordinates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_bounding_boxes_on_image_tensors" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws bounding boxes, masks, and keypoints on batch of image tensors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> – A 4D uint8 image tensor of shape [N, H, W, C]. If C &gt; 3, additional
channels will be ignored. If C = 1, then we convert the images to RGB
images.</p></li>
<li><p><strong>boxes</strong> – [N, max_detections, 4] float32 tensor of detection boxes.</p></li>
<li><p><strong>classes</strong> – [N, max_detections] int tensor of detection classes. Note that
classes are 1-indexed.</p></li>
<li><p><strong>scores</strong> – [N, max_detections] float32 tensor of detection scores.</p></li>
<li><p><strong>category_index</strong> – a dict that maps integer ids to category dicts. e.g.
{1: {1: ‘dog’}, 2: {2: ‘cat’}, …}</p></li>
<li><p><strong>original_image_spatial_shape</strong> – [N, 2] tensor containing the spatial size of
the original image.</p></li>
<li><p><strong>true_image_shape</strong> – [N, 3] tensor containing the spatial size of unpadded
original_image.</p></li>
<li><p><strong>instance_masks</strong> – A 4D uint8 tensor of shape [N, max_detection, H, W] with
instance masks.</p></li>
<li><p><strong>keypoints</strong> – A 4D float32 tensor of shape [N, max_detection, num_keypoints, 2]
with keypoints.</p></li>
<li><p><strong>track_ids</strong> – [N, max_detections] int32 tensor of unique tracks ids (i.e.
instance ids for each object). If provided, the color-coding of boxes is
dictated by these ids, and not classes.</p></li>
<li><p><strong>max_boxes_to_draw</strong> – Maximum number of boxes to draw on an image. Default 20.</p></li>
<li><p><strong>min_score_thresh</strong> – Minimum score threshold for visualization. Default 0.2.</p></li>
<li><p><strong>use_normalized_coordinates</strong> – Whether to assume boxes and kepoints are in
normalized coordinates (as opposed to absolute coordiantes).
Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>4D image tensor of type uint8, with boxes drawn on top.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_keypoints_on_image">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_keypoints_on_image</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">keypoints</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">radius=2</em>, <em class="sig-param">use_normalized_coordinates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_keypoints_on_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws keypoints on an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a PIL.Image object.</p></li>
<li><p><strong>keypoints</strong> – a numpy array with shape [num_keypoints, 2].</p></li>
<li><p><strong>color</strong> – color to draw the keypoints with. Default is red.</p></li>
<li><p><strong>radius</strong> – keypoint radius. Default value is 2.</p></li>
<li><p><strong>use_normalized_coordinates</strong> – if True (default), treat keypoint values as
relative to the image.  Otherwise treat them as absolute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_keypoints_on_image_array">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_keypoints_on_image_array</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">keypoints</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">radius=2</em>, <em class="sig-param">use_normalized_coordinates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_keypoints_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws keypoints on an image (numpy array).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a numpy array with shape [height, width, 3].</p></li>
<li><p><strong>keypoints</strong> – a numpy array with shape [num_keypoints, 2].</p></li>
<li><p><strong>color</strong> – color to draw the keypoints with. Default is red.</p></li>
<li><p><strong>radius</strong> – keypoint radius. Default value is 2.</p></li>
<li><p><strong>use_normalized_coordinates</strong> – if True (default), treat keypoint values as
relative to the image.  Otherwise treat them as absolute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_mask_on_image_array">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_mask_on_image_array</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask</em>, <em class="sig-param">color='red'</em>, <em class="sig-param">alpha=0.4</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_mask_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws mask on an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – uint8 numpy array with shape (img_height, img_height, 3)</p></li>
<li><p><strong>mask</strong> – a uint8 numpy array of shape (img_height, img_height) with
values between either 0 or 1.</p></li>
<li><p><strong>color</strong> – color to draw the keypoints with. Default is red.</p></li>
<li><p><strong>alpha</strong> – transparency value between 0 and 1. (default: 0.4)</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – On incorrect data type for image or masks.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.draw_side_by_side_evaluation_image">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">draw_side_by_side_evaluation_image</code><span class="sig-paren">(</span><em class="sig-param">eval_dict</em>, <em class="sig-param">category_index</em>, <em class="sig-param">max_boxes_to_draw=20</em>, <em class="sig-param">min_score_thresh=0.2</em>, <em class="sig-param">use_normalized_coordinates=True</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.draw_side_by_side_evaluation_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a side-by-side image with detections and groundtruth.</p>
<p>Bounding boxes (and instance masks, if available) are visualized on both
subimages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eval_dict</strong> – The evaluation dictionary returned by
eval_util.result_dict_for_batched_example() or
eval_util.result_dict_for_single_example().</p></li>
<li><p><strong>category_index</strong> – A category index (dictionary) produced from a labelmap.</p></li>
<li><p><strong>max_boxes_to_draw</strong> – The maximum number of boxes to draw for detections.</p></li>
<li><p><strong>min_score_thresh</strong> – The minimum score threshold for showing detections.</p></li>
<li><p><strong>use_normalized_coordinates</strong> – Whether to assume boxes and kepoints are in
normalized coordinates (as opposed to absolute coordiantes).
Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of [1, H, 2 * W, C] uint8 tensor. The subimage on the left</dt><dd><p>corresponds to detections, while the subimage on the right corresponds to
groundtruth.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.encode_image_array_as_png_str">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">encode_image_array_as_png_str</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.encode_image_array_as_png_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Encodes a numpy array into a PNG string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> – a numpy array with shape [height, width, 3].</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>PNG encoded image string.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.save_image_array_as_png">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">save_image_array_as_png</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">output_path</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.save_image_array_as_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves an image (represented as a numpy array) to PNG.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – a numpy array with shape [height, width, 3].</p></li>
<li><p><strong>output_path</strong> – path to which image should be written.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="vlearn.roa.utils.visualization_utils.visualize_boxes_and_labels_on_image_array">
<code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils.</code><code class="sig-name descname">visualize_boxes_and_labels_on_image_array</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">boxes</em>, <em class="sig-param">classes</em>, <em class="sig-param">scores</em>, <em class="sig-param">category_index</em>, <em class="sig-param">instance_masks=None</em>, <em class="sig-param">instance_boundaries=None</em>, <em class="sig-param">keypoints=None</em>, <em class="sig-param">track_ids=None</em>, <em class="sig-param">use_normalized_coordinates=False</em>, <em class="sig-param">max_boxes_to_draw=20</em>, <em class="sig-param">min_score_thresh=0.5</em>, <em class="sig-param">agnostic_mode=False</em>, <em class="sig-param">line_thickness=4</em>, <em class="sig-param">groundtruth_box_visualization_color='black'</em>, <em class="sig-param">skip_scores=False</em>, <em class="sig-param">skip_labels=False</em>, <em class="sig-param">skip_track_ids=False</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils.visualize_boxes_and_labels_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Overlay labeled boxes on an image with formatted scores and label names.</p>
<p>This function groups boxes that correspond to the same location
and creates a display string for each detection and overlays these
on the image. Note that this function modifies the image in place, and returns
that same image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – uint8 numpy array with shape (img_height, img_width, 3)</p></li>
<li><p><strong>boxes</strong> – a numpy array of shape [N, 4]</p></li>
<li><p><strong>classes</strong> – a numpy array of shape [N]. Note that class indices are 1-based,
and match the keys in the label map.</p></li>
<li><p><strong>scores</strong> – a numpy array of shape [N] or None.  If scores=None, then
this function assumes that the boxes to be plotted are groundtruth
boxes and plot all boxes as black with no classes or scores.</p></li>
<li><p><strong>category_index</strong> – a dict containing category dictionaries (each holding
category index <cite>id</cite> and category name <cite>name</cite>) keyed by category indices.</p></li>
<li><p><strong>instance_masks</strong> – a numpy array of shape [N, image_height, image_width] with
values ranging between 0 and 1, can be None.</p></li>
<li><p><strong>instance_boundaries</strong> – a numpy array of shape [N, image_height, image_width]
with values ranging between 0 and 1, can be None.</p></li>
<li><p><strong>keypoints</strong> – a numpy array of shape [N, num_keypoints, 2], can
be None</p></li>
<li><p><strong>track_ids</strong> – a numpy array of shape [N] with unique track ids. If provided,
color-coding of boxes will be determined by these ids, and not the class
indices.</p></li>
<li><p><strong>use_normalized_coordinates</strong> – whether boxes is to be interpreted as
normalized coordinates or not.</p></li>
<li><p><strong>max_boxes_to_draw</strong> – maximum number of boxes to visualize.  If None, draw
all boxes.</p></li>
<li><p><strong>min_score_thresh</strong> – minimum score threshold for a box to be visualized</p></li>
<li><p><strong>agnostic_mode</strong> – boolean (default: False) controlling whether to evaluate in
class-agnostic mode or not.  This mode will display scores but ignore
classes.</p></li>
<li><p><strong>line_thickness</strong> – integer (default: 4) controlling line width of the boxes.</p></li>
<li><p><strong>groundtruth_box_visualization_color</strong> – box color for visualizing groundtruth
boxes</p></li>
<li><p><strong>skip_scores</strong> – whether to skip score when drawing a single detection</p></li>
<li><p><strong>skip_labels</strong> – whether to skip label when drawing a single detection</p></li>
<li><p><strong>skip_track_ids</strong> – whether to skip track id when drawing a single detection</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>uint8 numpy array with shape (img_height, img_width, 3) with overlaid boxes.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.visualization_utils_test">
<span id="vlearn-roa-utils-visualization-utils-test-module"></span><h2>vlearn.roa.utils.visualization_utils_test module<a class="headerlink" href="#module-vlearn.roa.utils.visualization_utils_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for object_detection.utils.visualization_utils.</p>
<dl class="class">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.visualization_utils_test.</code><code class="sig-name descname">VisualizationUtilsTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.create_colorful_test_image">
<code class="sig-name descname">create_colorful_test_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.create_colorful_test_image" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates an image that can be used to test vis functions.</p>
<p>It makes an image composed of four colored rectangles.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>colorful test numpy array image.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.create_test_grayscale_image">
<code class="sig-name descname">create_test_grayscale_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.create_test_grayscale_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.create_test_image_with_five_channels">
<code class="sig-name descname">create_test_image_with_five_channels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.create_test_image_with_five_channels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_add_cdf_image_summary">
<code class="sig-name descname">test_add_cdf_image_summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_add_cdf_image_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_add_hist_image_summary">
<code class="sig-name descname">test_add_hist_image_summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_add_hist_image_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_box_on_image">
<code class="sig-name descname">test_draw_bounding_box_on_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_box_on_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_box_on_image_array">
<code class="sig-name descname">test_draw_bounding_box_on_image_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_box_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image">
<code class="sig-name descname">test_draw_bounding_boxes_on_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_array">
<code class="sig-name descname">test_draw_bounding_boxes_on_image_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors">
<code class="sig-name descname">test_draw_bounding_boxes_on_image_tensors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that bounding box utility produces reasonable results.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors_grayscale">
<code class="sig-name descname">test_draw_bounding_boxes_on_image_tensors_grayscale</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors_grayscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests the case where input image tensor has one channel.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors_with_additional_channels">
<code class="sig-name descname">test_draw_bounding_boxes_on_image_tensors_with_additional_channels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors_with_additional_channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests the case where input image tensor has more than 3 channels.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors_with_track_ids">
<code class="sig-name descname">test_draw_bounding_boxes_on_image_tensors_with_track_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_bounding_boxes_on_image_tensors_with_track_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests that bounding box utility produces reasonable results.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_keypoints_on_image">
<code class="sig-name descname">test_draw_keypoints_on_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_keypoints_on_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_keypoints_on_image_array">
<code class="sig-name descname">test_draw_keypoints_on_image_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_keypoints_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_mask_on_image_array">
<code class="sig-name descname">test_draw_mask_on_image_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_draw_mask_on_image_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_eval_metric_ops">
<code class="sig-name descname">test_eval_metric_ops</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_eval_metric_ops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_get_prime_multiplier_for_color_randomness">
<code class="sig-name descname">test_get_prime_multiplier_for_color_randomness</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.visualization_utils_test.VisualizationUtilsTest.test_get_prime_multiplier_for_color_randomness" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.vrd_evaluation">
<span id="vlearn-roa-utils-vrd-evaluation-module"></span><h2>vlearn.roa.utils.vrd_evaluation module<a class="headerlink" href="#module-vlearn.roa.utils.vrd_evaluation" title="Permalink to this headline">¶</a></h2>
<p>Evaluator class for Visual Relations Detection.</p>
<p>VRDDetectionEvaluator is a class which manages ground truth information of a
visual relations detection (vrd) dataset, and computes frequently used detection
metrics such as Precision, Recall, Recall&#64;k, of the provided vrd detection
results.
It supports the following operations:
1) Adding ground truth information of images sequentially.
2) Adding detection results of images sequentially.
3) Evaluating detection metrics on already inserted detection results.</p>
<p>Note1: groundtruth should be inserted before evaluation.
Note2: This module operates on numpy boxes and box lists.</p>
<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation.</code><code class="sig-name descname">VRDDetectionEvalMetrics</code><span class="sig-paren">(</span><em class="sig-param">weighted_average_precision</em>, <em class="sig-param">mean_average_precision</em>, <em class="sig-param">average_precisions</em>, <em class="sig-param">precisions</em>, <em class="sig-param">recalls</em>, <em class="sig-param">recall_50</em>, <em class="sig-param">recall_100</em>, <em class="sig-param">median_rank_50</em>, <em class="sig-param">median_rank_100</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.average_precisions">
<em class="property">property </em><code class="sig-name descname">average_precisions</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.average_precisions" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.mean_average_precision">
<em class="property">property </em><code class="sig-name descname">mean_average_precision</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.mean_average_precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.median_rank_100">
<em class="property">property </em><code class="sig-name descname">median_rank_100</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.median_rank_100" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 8</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.median_rank_50">
<em class="property">property </em><code class="sig-name descname">median_rank_50</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.median_rank_50" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 7</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.precisions">
<em class="property">property </em><code class="sig-name descname">precisions</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.precisions" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.recall_100">
<em class="property">property </em><code class="sig-name descname">recall_100</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.recall_100" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 6</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.recall_50">
<em class="property">property </em><code class="sig-name descname">recall_50</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.recall_50" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.recalls">
<em class="property">property </em><code class="sig-name descname">recalls</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.recalls" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.weighted_average_precision">
<em class="property">property </em><code class="sig-name descname">weighted_average_precision</code><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvalMetrics.weighted_average_precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation.</code><code class="sig-name descname">VRDDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">matching_iou_threshold=0.5</em>, <em class="sig-param">metric_prefix=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object_detection.utils.object_detection_evaluation.DetectionEvaluator</span></code></p>
<p>A class to evaluate VRD detections.</p>
<p>This class serves as a base class for VRD evaluation in two settings:
- phrase detection
- relation detection.</p>
<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.add_single_detected_image_info">
<code class="sig-name descname">add_single_detected_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">detections_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.add_single_detected_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds detections for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>detections_dict</strong> – <p>A dictionary containing -
standard_fields.DetectionResultFields.detection_boxes: A numpy array of</p>
<blockquote>
<div><p>structures with shape [N, 1], representing N tuples, each tuple
containing the same number of named bounding boxes.
Each box is of the format [y_min, x_min, y_max, x_max] (as an example
see datatype vrd_box_data_type, single_box_data_type above).</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.DetectionResultFields.detection_scores: float32 numpy</dt><dd><p>array of shape [N] containing detection scores for the boxes.</p>
</dd>
<dt>standard_fields.DetectionResultFields.detection_classes: A numpy array</dt><dd><p>of structures shape [N, 1], representing the class labels of the
corresponding bounding boxes and possibly additional classes (see
datatype label_data_type above).</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.add_single_ground_truth_image_info">
<code class="sig-name descname">add_single_ground_truth_image_info</code><span class="sig-paren">(</span><em class="sig-param">image_id</em>, <em class="sig-param">groundtruth_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.add_single_ground_truth_image_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds groundtruth for a single image to be used for evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_id</strong> – A unique string/integer identifier for the image.</p></li>
<li><p><strong>groundtruth_dict</strong> – <p>A dictionary containing -
standard_fields.InputDataFields.groundtruth_boxes: A numpy array</p>
<blockquote>
<div><p>of structures with the shape [M, 1], representing M tuples, each tuple
containing the same number of named bounding boxes.
Each box is of the format [y_min, x_min, y_max, x_max] (see
datatype vrd_box_data_type, single_box_data_type above).</p>
</div></blockquote>
<dl class="simple">
<dt>standard_fields.InputDataFields.groundtruth_classes: A numpy array of</dt><dd><p>structures shape [M, 1], representing  the class labels of the
corresponding bounding boxes and possibly additional classes (see
datatype label_data_type above).</p>
</dd>
<dt>standard_fields.InputDataFields.groundtruth_image_classes: numpy array</dt><dd><p>of shape [K] containing verified labels.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – On adding groundtruth for an image more than once.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the state to prepare for a fresh evaluation.</p>
</dd></dl>

<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><em class="sig-param">relationships=None</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute evaluation result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>relationships</strong> – A dictionary of numerical label-text label mapping; if
specified, returns per-relationship AP.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A dictionary of metrics with the following fields -</p>
<dl class="simple">
<dt>summary_metrics:</dt><dd><p>’weightedAP&#64;&lt;matching_iou_threshold&gt;IOU’ : weighted average precision
at the specified IOU threshold.
‘AP&#64;&lt;matching_iou_threshold&gt;IOU/&lt;relationship&gt;’ : AP per relationship.
‘mAP&#64;&lt;matching_iou_threshold&gt;IOU’: mean average precision at the
specified IOU threshold.
‘Recall&#64;50&#64;&lt;matching_iou_threshold&gt;IOU’: <a class="reference external" href="mailto:recall&#37;&#52;&#48;50">recall<span>&#64;</span>50</a> at the specified IOU
threshold.
‘Recall&#64;100&#64;&lt;matching_iou_threshold&gt;IOU’: <a class="reference external" href="mailto:recall&#37;&#52;&#48;100">recall<span>&#64;</span>100</a> at the specified
IOU threshold.</p>
</dd>
</dl>
<p>if relationships is specified, returns &lt;relationship&gt; in AP metrics as
readable names, otherwise the names correspond to class numbers.</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDPhraseDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation.</code><code class="sig-name descname">VRDPhraseDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDPhraseDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator" title="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator</span></code></a></p>
<p>A class to evaluate VRD detections in phrase setting.</p>
<p>Expected groundtruth box datatype is vrd_box_data_type, expected groudtruth
labels datatype is label_data_type.
Expected detection box datatype is single_box_data_type, expected detection
labels datatype is label_data_type.</p>
</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation.VRDRelationDetectionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation.</code><code class="sig-name descname">VRDRelationDetectionEvaluator</code><span class="sig-paren">(</span><em class="sig-param">matching_iou_threshold=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation.VRDRelationDetectionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator" title="vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">vlearn.roa.utils.vrd_evaluation.VRDDetectionEvaluator</span></code></a></p>
<p>A class to evaluate VRD detections in relations setting.</p>
<p>Expected groundtruth box datatype is vrd_box_data_type, expected groudtruth
labels datatype is label_data_type.
Expected detection box datatype is vrd_box_data_type, expected detection
labels
datatype is label_data_type.</p>
</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils.vrd_evaluation_test">
<span id="vlearn-roa-utils-vrd-evaluation-test-module"></span><h2>vlearn.roa.utils.vrd_evaluation_test module<a class="headerlink" href="#module-vlearn.roa.utils.vrd_evaluation_test" title="Permalink to this headline">¶</a></h2>
<p>Tests for tensorflow_models.object_detection.utils.vrd_evaluation.</p>
<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation_test.VRDDetectionEvaluationTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation_test.</code><code class="sig-name descname">VRDDetectionEvaluationTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation_test.VRDDetectionEvaluationTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation_test.VRDDetectionEvaluationTest.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation_test.VRDDetectionEvaluationTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook method for setting up the test fixture before exercising it.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation_test.VRDPhraseDetectionEvaluatorTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation_test.</code><code class="sig-name descname">VRDPhraseDetectionEvaluatorTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation_test.VRDPhraseDetectionEvaluatorTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation_test.VRDPhraseDetectionEvaluatorTest.test_vrdphrase_evaluator">
<code class="sig-name descname">test_vrdphrase_evaluator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation_test.VRDPhraseDetectionEvaluatorTest.test_vrdphrase_evaluator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="vlearn.roa.utils.vrd_evaluation_test.VRDRelationDetectionEvaluatorTest">
<em class="property">class </em><code class="sig-prename descclassname">vlearn.roa.utils.vrd_evaluation_test.</code><code class="sig-name descname">VRDRelationDetectionEvaluatorTest</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation_test.VRDRelationDetectionEvaluatorTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.framework.test_util.TensorFlowTestCase</span></code></p>
<dl class="method">
<dt id="vlearn.roa.utils.vrd_evaluation_test.VRDRelationDetectionEvaluatorTest.test_vrdrelation_evaluator">
<code class="sig-name descname">test_vrdrelation_evaluator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vlearn.roa.utils.vrd_evaluation_test.VRDRelationDetectionEvaluatorTest.test_vrdrelation_evaluator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-vlearn.roa.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-vlearn.roa.utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">vlearn</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">vlearn</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="vlearn.html">vlearn package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">vlearn</a><ul>
  <li><a href="vlearn.html">vlearn package</a><ul>
  <li><a href="vlearn.roa.html">vlearn.roa package</a><ul>
      <li>Previous: <a href="vlearn.roa.html" title="previous chapter">vlearn.roa package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Vj.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/vlearn.roa.utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>